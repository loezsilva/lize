{% extends 'redesign/base.html' %}
{% comment %} {% extends 'dashboard/base_fixed.html' %} {% endcomment %}
{% load static %}
{% load format_duration %}
{% load proportion %}
{% load l10n %}

{% block title %}Correção de respostas - Lize{% endblock title %}

{% block css-additional %}
<link href="{% static 'administration/lib/select2/css/select2.min.css' %}" rel="stylesheet" />
<link href="{% static 'dashboard/assets/css/lize.css' %}" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'administration/lib/datatables.net-responsive-dt/css/responsive.dataTables.min.css' %}">
<link rel="stylesheet" href="{% static 'css/annotorious/annotorious.min.css' %}">
<!-- <link rel="stylesheet" href="{% static 'css/viewer/viewer.min.css' %}" /> -->

<style>
    .modal-fullscreen{
        width:100vw;
        max-width:none;
        height:100%;
        margin:0
    }
    .modal-fullscreen .modal-content{
        height:100%;
        border:0;
        border-radius:0
    }
    .modal-fullscreen .modal-footer,.modal-fullscreen .modal-header{
        border-radius:0
    }
    .modal-fullscreen .modal-body{
        overflow-y:auto
    }
    .card-detail{ 
        
        max-height: 70vh;
        overflow: auto;
    }
    #question-details {
        border-width: 1px;
        border-style: solid;
        border-color: #d9d7d7;
    }

    #question-details img {
        min-width: 200px;
        max-width: 100%;
    }

    .text-main {
        color: #001737 !important;
    }

    table#student-responses td {
        min-width: 53.85px;
    }

    td.bg-gray:hover {
        background-color: #dedede !important;
        cursor: pointer;
    }

    td.bg-success, td.bg-pink, td.bg-warning {
        color: white !important;
    }

    td.bg-success:hover {
        background-color: #10753c !important;
        cursor: pointer;
    }

    td.bg-pink:hover {
        background-color: #a80051 !important;
        cursor: pointer;
    }

    td.bg-warning:hover {
        cursor: pointer;
    }

    td.alternative-correct {
        background-color: #10b75990 !important;
    }

    td.alternative-incorrect {
        background-color: #dc354590 !important;
    }

    .containerimg {
        position: relative;
        border: 1px solid #000;
        overflow: hidden;
        width: 400px;
        margin: 100px;
    }
    .containerimg img {
        max-width: 100%;
        -moz-transition: all 0.5s;
        -webkit-transition: all 0.5s;
        transition: all 0.5s;
    }
    .containerimg:hover img {
        -moz-transform: scale(1.2);
        -webkit-transform: scale(1.2);
        transform: scale(1.2);
    }

    .overlay {
        overflow: hidden;
        z-index: 99999 !important;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        transition: .5s ease;
        background: rgba(0, 0, 0, 0.8);
    }
    .overlay i {
        cursor: pointer;
    }
    .overlay i:hover {
        color: coral !important;
    }
    .competence_enem {
        width: 90%;
        overflow-wrap: break-word;  
        word-wrap: break-word; 
        word-break: break-word;
    }
    .table{
        margin-left: auto;
        margin-right: auto;
    }  
    .heder{
        text-align: center
    }
    .remove-p-margin p {
        margin: 0;
    }
    table.dataTable {
      border: unset;
    }
    table.dataTable.no-footer {
      border-bottom-color: unset;
    }
    table.dataTable thead .sorting::before, table.dataTable thead .sorting::after {
      right: 2px;
      color: #CBD5E1;
    }
    table.dataTable thead .sorting_asc::after, table.dataTable thead .sorting_desc::after {
      right: 2px;
      color: #CBD5E1;
    }
    .dataTables_filter {
      display: none;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 0.875rem;
      line-height: 1.25rem;
      font-weight: 600;
      color: #64748b;
      background-color: #fff;
      border: 1px solid #e2e8f0;
      cursor: pointer;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button:hover, .dataTables_wrapper .dataTables_paginate .paginate_button:focus {
      color: #64748b !important;
      background-color: #f9fafb;
      border: 1px solid #e2e8f0;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.current, .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover, .dataTables_wrapper .dataTables_paginate .paginate_button.current:focus {
      border: 0;
      background-color: #ff8f3e;
      color: #fff !important;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.disabled, .dataTables_wrapper .dataTables_paginate .paginate_button.disabled:hover, .dataTables_wrapper .dataTables_paginate .paginate_button.disabled:focus {
      cursor: not-allowed;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.previous {
      margin-right: 8px;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.next {
      margin-left: 8px;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button + .paginate_button {
      margin-left: 8px;
    }
    .dropdown-toggle::after {
      display: none;
    }
    .alternative-correct {
      background-color: #F6FEF9 !important;
      border: 2px solid #12B76A !important;
    }
    .alternative-incorrect {
      background-color: #FFFBFA !important;
      border: 2px solid #FECDCA !important;
    }
    .custom-checkbox .custom-control-label::before, .custom-checkbox .custom-control-label::after, .custom-radio .custom-control-label::before, .custom-radio .custom-control-label::after, .custom-switch .custom-control-label::before, .custom-switch .custom-control-label::after {
      top: 50%;
    }
    .custom-radio .custom-control-input:checked ~ .custom-control-label::after {
      background-image: unset;
    }
    .custom-control-input:checked ~ .custom-control-label::before {
      color: unset;
      border-color: unset;
      background-color: unset;
    }
    .custom-control-label::before {
      content: "";
      position: absolute;
      top: 0.25rem;
      left: -1.5rem;
      width: 1.5rem;
      height: 1.5rem;
      border-radius: 50%;
      border: 2px solid #E2E8F0;
      background-color: transparent;
      box-sizing: border-box;
    }
    .custom-control-label::after {
      content: "";
      position: absolute;
      left: -1.0625rem;
      width: 0.625rem;
      height: 0.625rem;
      border-radius: 50%;
      background-color: transparent;
      transform: translate(-50%, -50%);
      transition: all 0.2s ease;
    }
    .custom-control-input:checked ~ .custom-control-label::before {
      border-color: #12B76A;
    }
    .custom-control-input:checked ~ .custom-control-label::after {
      background-color: #12B76A;
    }
    .alternative-correct .custom-control-input:checked ~ .custom-control-label::before {
      border-color: #12B76A;
    }
    .alternative-correct .custom-control-input:checked ~ .custom-control-label::after {
      background-color: #12B76A;
    }
    .alternative-correct .custom-control-label::before {
      border-color: #12B76A;
    }
    .alternative-incorrect .custom-control-input:checked ~ .custom-control-label::before {
      border-color: #F04438;
    }
    .alternative-incorrect .custom-control-input:checked ~ .custom-control-label::after {
      background-color: #F04438;
    }
    .alternative-incorrect .custom-control-label::before {
      border-color: #F04438;
    }
</style>
{% endblock %}

{% block js-header-additional %}
  <script src="{% static 'js/annotorious/openseadragon.min.js' %}"></script>
  <script src="{% static 'js/annotorious/annotorious.min.js' %}"></script>
  <script src="{% static 'js/annotorious/openseadragon-annotorious.min.js' %}"></script>
{% endblock js-header-additional %}

{% block main %}{% endblock main %}
{% block content-fixed %}
<main class="tw-pt-6 tw-pb-10">
  <div class="tw-px-4 sm:tw-px-6 lg:tw-px-8">
    <div class="tw-flex tw-flex-col tw-gap-6">
      <div class="tw-flex tw-flex-col tw-gap-8">
        <div class="tw-flex tw-items-center tw-justify-between">
          <div class="tw-flex tw-flex-col tw-gap-4">
            <a href="#" onclick="history.back()" class="tw-flex tw-items-center tw-gap-3 tw-text-sm tw-leading-6 tw-text-gray-700">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="#9BA3AF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              Instrumentos avaliativos
            </a>
            <h1 class="tw-text-2xl tw-font-semibold tw-text-gray-700">{{ object.name }}</h1>
          </div>
          <div>
            <button type="button" class="tw-flex tw-items-center tw-gap-4 tw-rounded-lg tw-text-primary-600 tw-border tw-border-primary-600 tw-px-3 tw-py-2 tw-text-sm tw-font-semibold hover:tw-text-white tw-shadow-sm hover:tw-bg-primary-600 focus-visible:tw-outline focus-visible:tw-outline-2 focus-visible:tw-outline-offset-2 focus-visible:tw-outline-primary-600 tw-transition-colors" data-toggle="modal" data-target="#exportToERPModal">
              Exportar para ERP
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.1875 8.75074V16.2507C17.1875 16.6651 17.0229 17.0626 16.7299 17.3556C16.4368 17.6486 16.0394 17.8132 15.625 17.8132H4.375C3.9606 17.8132 3.56317 17.6486 3.27015 17.3556C2.97712 17.0626 2.8125 16.6651 2.8125 16.2507V8.75074C2.8125 8.33634 2.97712 7.93891 3.27015 7.64589C3.56317 7.35286 3.9606 7.18824 4.375 7.18824H5.9375C6.18614 7.18824 6.4246 7.28701 6.60041 7.46283C6.77623 7.63864 6.875 7.8771 6.875 8.12574C6.875 8.37438 6.77623 8.61284 6.60041 8.78865C6.4246 8.96447 6.18614 9.06324 5.9375 9.06324H4.6875V15.9382H15.3125V9.06324H14.0625C13.8139 9.06324 13.5754 8.96447 13.3996 8.78865C13.2238 8.61284 13.125 8.37438 13.125 8.12574C13.125 7.8771 13.2238 7.63864 13.3996 7.46283C13.5754 7.28701 13.8139 7.18824 14.0625 7.18824H15.625C16.0394 7.18824 16.4368 7.35286 16.7299 7.64589C17.0229 7.93891 17.1875 8.33634 17.1875 8.75074ZM7.53828 5.66402L9.0625 4.14136V10.6257C9.0625 10.8744 9.16127 11.1128 9.33709 11.2887C9.5129 11.4645 9.75136 11.5632 10 11.5632C10.2486 11.5632 10.4871 11.4645 10.6629 11.2887C10.8387 11.1128 10.9375 10.8744 10.9375 10.6257V4.14136L12.4617 5.66636C12.5489 5.75357 12.6525 5.82275 12.7664 5.86994C12.8803 5.91714 13.0025 5.94143 13.1258 5.94143C13.2491 5.94143 13.3712 5.91714 13.4852 5.86994C13.5991 5.82275 13.7026 5.75357 13.7898 5.66636C13.877 5.57916 13.9462 5.47563 13.9934 5.36169C14.0406 5.24775 14.0649 5.12563 14.0649 5.0023C14.0649 4.87897 14.0406 4.75685 13.9934 4.64291C13.9462 4.52897 13.877 4.42545 13.7898 4.33824L10.6648 1.21324C10.5777 1.12584 10.4743 1.05649 10.3603 1.00917C10.2463 0.961857 10.1242 0.9375 10.0008 0.9375C9.87739 0.9375 9.75522 0.961857 9.64126 1.00917C9.52731 1.05649 9.42382 1.12584 9.33672 1.21324L6.21172 4.33824C6.12451 4.42545 6.05534 4.52897 6.00814 4.64291C5.96095 4.75685 5.93665 4.87897 5.93665 5.0023C5.93665 5.25137 6.0356 5.49024 6.21172 5.66636C6.38784 5.84248 6.62671 5.94143 6.87578 5.94143C7.12485 5.94143 7.36372 5.84248 7.53984 5.66636L7.53828 5.66402Z" fill="currentColor" />
              </svg>
            </button>
          </div>
        </div>
        <div class="tw-flex tw-items-center tw-justify-between">
          <form method="GET">
            <select name="turma" class="tw-col-start-1 tw-row-start-1 tw-w-96 tw-appearance-none tw-rounded-md tw-bg-white tw-py-1.5 tw-pl-3 tw-pr-8 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:outline-blue-600 sm:text-sm/6" @change="changeSchoolClass">
              <option value="">Selecione</option>
              <option
                value="alunos-avulsos"
                {% if "alunos-avulsos" == request.GET.turma %}selected{% endif %}
              >
                Alunos sem turma
              </option>
              {% for school_class in school_classes %}
                <option
                  value="{{ school_class.pk }}"
                  {% if school_class.pk|stringformat:"s" == request.GET.turma %}selected{% endif %}
                >
                  {{ school_class.full_name }}
                </option>
              {% endfor %}
            </select>
          </form>
          <div>
            <button type="button" class="tw-flex tw-items-center tw-gap-3 tw-off-canvas-menu" id="headlessui-slider-over-button-1" data-toggle-off-canvas="#right-off-canvas">
              <span class="tw-text-sm tw-font-semibold tw-text-slate-500">Filtrar</span>
              <span>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M5 10H15M2.5 5H17.5M7.5 15H12.5" stroke="#FF8F3D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </button>
          </div>
        </div>
      </div>
      {% if has_applications %}
        <div class="tw-flex tw-flex-col tw-gap-4">
          <div class="tw-grid tw-grid-cols-1 sm:tw-gap-4 sm:tw-grid-cols-2 lg:tw-grid-cols-4 tw-bg-white tw-rounded-lg tw-border tw-border-slate-200 tw-py-6">
            <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-border-slate-200 sm:tw-border-r tw-px-2 sm:tw-px-4 lg:tw-px-6">
              <p class="tw-text-xs tw-leading-4.5 tw-text-slate-600">Online</p>
              <div class="tw-flex tw-items-center tw-gap-2">
                <p class="tw-text-4xl tw-leading-11 tw-font-semibold tw-tracking-tight tw-text-gray-950">
                  {{ students_online_count }}
                </p>
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M26 4.5H6C5.07174 4.5 4.1815 4.86875 3.52513 5.52513C2.86875 6.1815 2.5 7.07174 2.5 8V22C2.5 22.9283 2.86875 23.8185 3.52513 24.4749C4.1815 25.1313 5.07174 25.5 6 25.5H26C26.4596 25.5 26.9148 25.4095 27.3394 25.2336C27.764 25.0577 28.1499 24.7999 28.4749 24.4749C28.7999 24.1499 29.0577 23.764 29.2336 23.3394C29.4095 22.9148 29.5 22.4596 29.5 22V8C29.5 7.54037 29.4095 7.08525 29.2336 6.66061C29.0577 6.23597 28.7999 5.85013 28.4749 5.52513C28.1499 5.20012 27.764 4.94231 27.3394 4.76642C26.9148 4.59053 26.4596 4.5 26 4.5ZM26.5 22C26.5 22.1326 26.4473 22.2598 26.3536 22.3536C26.2598 22.4473 26.1326 22.5 26 22.5H6C5.86739 22.5 5.74021 22.4473 5.64645 22.3536C5.55268 22.2598 5.5 22.1326 5.5 22V8C5.5 7.86739 5.55268 7.74021 5.64645 7.64645C5.74021 7.55268 5.86739 7.5 6 7.5H26C26.1326 7.5 26.2598 7.55268 26.3536 7.64645C26.4473 7.74021 26.5 7.86739 26.5 8V22ZM21.5 28.5C21.5 28.8978 21.342 29.2794 21.0607 29.5607C20.7794 29.842 20.3978 30 20 30H12C11.6022 30 11.2206 29.842 10.9393 29.5607C10.658 29.2794 10.5 28.8978 10.5 28.5C10.5 28.1022 10.658 27.7206 10.9393 27.4393C11.2206 27.158 11.6022 27 12 27H20C20.3978 27 20.7794 27.158 21.0607 27.4393C21.342 27.7206 21.5 28.1022 21.5 28.5Z" fill="#039855" />
                </svg>
              </div>
            </div>
            <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-border-slate-200 sm:tw-border-r tw-px-2 sm:tw-px-4 lg:tw-px-6">
              <p class="tw-text-xs tw-leading-4.5 tw-text-slate-600">Presenciais</p>
              <div class="tw-flex tw-items-center tw-gap-2">
                <p class="tw-text-4xl tw-leading-11 tw-font-semibold tw-tracking-tight tw-text-gray-950">
                  {{ students_presential_count }}
                </p>
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.5 10C13.5 9.50555 13.6466 9.0222 13.9213 8.61107C14.196 8.19995 14.5865 7.87952 15.0433 7.6903C15.5001 7.50108 16.0028 7.45157 16.4877 7.54804C16.9727 7.6445 17.4181 7.8826 17.7678 8.23223C18.1174 8.58186 18.3555 9.02732 18.452 9.51227C18.5484 9.99723 18.4989 10.4999 18.3097 10.9567C18.1205 11.4135 17.8 11.804 17.3889 12.0787C16.9778 12.3534 16.4945 12.5 16 12.5C15.337 12.5 14.7011 12.2366 14.2322 11.7678C13.7634 11.2989 13.5 10.663 13.5 10ZM7.5 10C7.5 7.74566 8.39553 5.58365 9.98959 3.98959C11.5837 2.39553 13.7457 1.5 16 1.5C18.2543 1.5 20.4163 2.39553 22.0104 3.98959C23.6045 5.58365 24.5 7.74566 24.5 10C24.5 17.7812 17.0612 22.125 16.7437 22.3025C16.5172 22.4318 16.2609 22.4999 16 22.4999C15.7391 22.4999 15.4828 22.4318 15.2563 22.3025C14.9388 22.125 7.5 17.7812 7.5 10ZM10.5 10C10.5 14.775 14.3387 18.025 16 19.205C17.6513 18.0187 21.5 14.75 21.5 10C21.5 8.54131 20.9205 7.14236 19.8891 6.11091C18.8576 5.07946 17.4587 4.5 16 4.5C14.5413 4.5 13.1424 5.07946 12.1109 6.11091C11.0795 7.14236 10.5 8.54131 10.5 10ZM26.0713 18.2C25.8887 18.1225 25.6926 18.082 25.4943 18.0809C25.296 18.0797 25.0994 18.1178 24.9159 18.1931C24.7324 18.2684 24.5657 18.3793 24.4254 18.5195C24.2851 18.6596 24.1739 18.8262 24.0984 19.0096C24.0229 19.1929 23.9844 19.3895 23.9854 19.5878C23.9863 19.7861 24.0265 19.9822 24.1037 20.1649C24.181 20.3476 24.2936 20.5131 24.4352 20.652C24.5769 20.7908 24.7446 20.9002 24.9287 20.9737C26.695 21.7013 27.5 22.5338 27.5 23C27.5 23.5 26.6087 24.3838 24.6537 25.135C22.3662 26.01 19.2925 26.5 16 26.5C12.7075 26.5 9.63375 26.015 7.34625 25.135C5.39 24.3838 4.5 23.5 4.5 23C4.5 22.5338 5.305 21.7013 7.07125 20.9737C7.25541 20.9002 7.42315 20.7908 7.56476 20.652C7.70637 20.5131 7.81905 20.3476 7.89627 20.1649C7.97349 19.9822 8.01372 19.7861 8.01464 19.5878C8.01555 19.3895 7.97714 19.1929 7.90161 19.0096C7.82608 18.8262 7.71493 18.6596 7.57461 18.5195C7.43429 18.3793 7.26757 18.2684 7.0841 18.1931C6.90063 18.1178 6.70405 18.0797 6.50574 18.0809C6.30742 18.082 6.11131 18.1225 5.92875 18.2C3.90875 19.0312 1.5 20.5387 1.5 23C1.5 27.2675 8.795 29.5 16 29.5C19.6525 29.5 23.1075 28.945 25.7313 27.935C27.5125 27.25 30.5 25.6987 30.5 23C30.5 20.5387 28.0913 19.0312 26.0713 18.2Z" fill="#DC6803" />
                </svg>
              </div>
            </div>
            <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-border-slate-200 sm:tw-border-r tw-px-2 sm:tw-px-4 lg:tw-px-6">
              <p class="tw-text-xs tw-leading-4.5 tw-text-slate-600">Nota Média</p>
              <div class="tw-flex tw-items-center tw-gap-2">
                <p class="tw-text-4xl tw-leading-11 tw-font-semibold tw-tracking-tight tw-text-gray-950">
                  {% if grade_average is not None %}{{ grade_average|floatformat:2 }}{% else %}-{% endif %}
                </p>
              </div>
            </div>
            <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-px-2 sm:tw-px-4 lg:tw-px-6">
              <p class="tw-text-xs tw-leading-4.5 tw-text-slate-600">Duração Média</p>
              <div class="tw-flex tw-items-center tw-gap-2">
                <p class="tw-text-4xl tw-leading-11 tw-font-semibold tw-tracking-tight tw-text-gray-950">
                  {{ duration_average|format_duration }}
                </p>
              </div>
            </div>
          </div>
          <div class="tw-bg-white tw-rounded-lg tw-border tw-border-slate-200">
            <div class="tw-px-4 tw-py-6 sm:tw-px-6 lg:tw-px-8">
              <div class="sm:tw-flex sm:tw-items-center">
                <div class="sm:tw-flex-auto">
                  <h2 class="tw-text-lg tw-font-semibold tw-text-gray-700">
                    Existem <span class="tw-text-primary-600">{{ application_student_details.count }} avaliações</span>
                  </h2>
                </div>
                <div class="tw-mt-4 sm:tw-ml-16 sm:tw-mt-0 sm:tw-flex-none">
                  <div class="tw-grid tw-grid-cols-1">
                    <input type="search" name="dataTableSearch" id="idDataTableSearch" class="tw-col-start-1 tw-row-start-1 tw-block tw-w-full tw-rounded-lg tw-bg-white tw-py-2.25 tw-pl-11 tw-pr-3.5 tw-text-base tw-text-gray-950 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-pl-10.5 sm:tw-text-sm/6" placeholder="Buscar" />
                    <svg class="tw-pointer-events-none tw-col-start-1 tw-row-start-1 tw-ml-3.5 tw-size-5 tw-self-center tw-text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                      <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
                    </svg>
                  </div>
                </div>
              </div>
              <div class="tw-mt-6 tw-flow-root">
                <div class="tw--mx-4 tw--my-2 tw-overflow-x-auto sm:tw--mx-6 lg:tw--mx-8">
                  <div class="tw-inline-block tw-min-w-full tw-py-2 tw-align-middle sm:tw-px-6 lg:tw-px-8">
                    <table id="table-students" class="tw-min-w-full tw-divide-y tw-divide-gray-300">
                      <thead>
                        <tr>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Tipo</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Nome</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Desempenho</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Acertos</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Corrigidas</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Pendências</th>
                          <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">Nota</th>
                          <th scope="col" class="tw-relative tw-py-3.5 tw-pl-3 tw-pr-4 sm:tw-pr-0">
                            <span class="tw-sr-only">Ações</span>
                          </th>
                        </tr>
                      </thead>
                      <tbody class="tw-divide-y tw-divide-gray-200">
                        <tr v-for="applicationStudent in applicationsStudent" :class="{ 'lize-bg-warning-light': applicationStudent.missed }">
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-font-medium tw-text-gray-900">
                            <template v-if="applicationStudent.is_omr">
                              <span class="tw-flex tw-items-center tw-justify-center">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Presencial">
                                  <path d="M6.75 5C6.75 4.75277 6.82331 4.5111 6.96066 4.30554C7.09801 4.09998 7.29324 3.93976 7.52165 3.84515C7.75005 3.75054 8.00139 3.72579 8.24386 3.77402C8.48634 3.82225 8.70907 3.9413 8.88388 4.11612C9.0587 4.29093 9.17775 4.51366 9.22598 4.75614C9.27421 4.99861 9.24946 5.24995 9.15485 5.47835C9.06024 5.70676 8.90002 5.90199 8.69446 6.03934C8.4889 6.17669 8.24723 6.25 8 6.25C7.66848 6.25 7.35054 6.1183 7.11612 5.88388C6.8817 5.64946 6.75 5.33152 6.75 5ZM3.75 5C3.75 3.87283 4.19777 2.79183 4.9948 1.9948C5.79183 1.19777 6.87283 0.75 8 0.75C9.12717 0.75 10.2082 1.19777 11.0052 1.9948C11.8022 2.79183 12.25 3.87283 12.25 5C12.25 8.89062 8.53062 11.0625 8.37187 11.1512C8.25861 11.2159 8.13043 11.2499 8 11.2499C7.86957 11.2499 7.74139 11.2159 7.62813 11.1512C7.46938 11.0625 3.75 8.89062 3.75 5ZM5.25 5C5.25 7.3875 7.16937 9.0125 8 9.6025C8.82563 9.00937 10.75 7.375 10.75 5C10.75 4.27065 10.4603 3.57118 9.94454 3.05546C9.42882 2.53973 8.72935 2.25 8 2.25C7.27065 2.25 6.57118 2.53973 6.05546 3.05546C5.53973 3.57118 5.25 4.27065 5.25 5ZM13.0356 9.1C12.9443 9.06127 12.8463 9.04102 12.7471 9.04043C12.648 9.03984 12.5497 9.05892 12.458 9.09657C12.3662 9.13421 12.2829 9.18967 12.2127 9.25974C12.1425 9.32981 12.087 9.41309 12.0492 9.50478C12.0114 9.59646 11.9922 9.69473 11.9927 9.79388C11.9931 9.89304 12.0133 9.99112 12.0519 10.0825C12.0905 10.1738 12.1468 10.2566 12.2176 10.326C12.2884 10.3954 12.3723 10.4501 12.4644 10.4869C13.3475 10.8506 13.75 11.2669 13.75 11.5C13.75 11.75 13.3044 12.1919 12.3269 12.5675C11.1831 13.005 9.64625 13.25 8 13.25C6.35375 13.25 4.81687 13.0075 3.67313 12.5675C2.695 12.1919 2.25 11.75 2.25 11.5C2.25 11.2669 2.6525 10.8506 3.53562 10.4869C3.6277 10.4501 3.71157 10.3954 3.78238 10.326C3.85319 10.2566 3.90952 10.1738 3.94813 10.0825C3.98674 9.99112 4.00686 9.89304 4.00732 9.79388C4.00778 9.69473 3.98857 9.59646 3.9508 9.50478C3.91304 9.41309 3.85747 9.32981 3.78731 9.25974C3.71714 9.18967 3.63378 9.13421 3.54205 9.09657C3.45031 9.05892 3.35202 9.03984 3.25287 9.04043C3.15371 9.04102 3.05566 9.06127 2.96438 9.1C1.95438 9.51562 0.75 10.2694 0.75 11.5C0.75 13.6337 4.3975 14.75 8 14.75C9.82625 14.75 11.5538 14.4725 12.8656 13.9675C13.7563 13.625 15.25 12.8494 15.25 11.5C15.25 10.2694 14.0456 9.51562 13.0356 9.1Z" fill="#DC6803" />
                                </svg>
                              </span>
                            </template>
                            <template v-else-if="applicationStudent.start_time">
                              <span class="tw-flex tw-items-center tw-justify-center">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Online">
                                  <path d="M13 2.25H3C2.53587 2.25 2.09075 2.43437 1.76256 2.76256C1.43437 3.09075 1.25 3.53587 1.25 4V11C1.25 11.4641 1.43437 11.9092 1.76256 12.2374C2.09075 12.5656 2.53587 12.75 3 12.75H13C13.2298 12.75 13.4574 12.7047 13.6697 12.6168C13.882 12.5288 14.0749 12.3999 14.2374 12.2374C14.3999 12.0749 14.5288 11.882 14.6168 11.6697C14.7047 11.4574 14.75 11.2298 14.75 11V4C14.75 3.77019 14.7047 3.54262 14.6168 3.3303C14.5288 3.11798 14.3999 2.92507 14.2374 2.76256C14.0749 2.60006 13.882 2.47116 13.6697 2.38321C13.4574 2.29527 13.2298 2.25 13 2.25ZM13.25 11C13.25 11.0663 13.2237 11.1299 13.1768 11.1768C13.1299 11.2237 13.0663 11.25 13 11.25H3C2.9337 11.25 2.87011 11.2237 2.82322 11.1768C2.77634 11.1299 2.75 11.0663 2.75 11V4C2.75 3.9337 2.77634 3.87011 2.82322 3.82322C2.87011 3.77634 2.9337 3.75 3 3.75H13C13.0663 3.75 13.1299 3.77634 13.1768 3.82322C13.2237 3.87011 13.25 3.9337 13.25 4V11ZM10.75 14.25C10.75 14.4489 10.671 14.6397 10.5303 14.7803C10.3897 14.921 10.1989 15 10 15H6C5.80109 15 5.61032 14.921 5.46967 14.7803C5.32902 14.6397 5.25 14.4489 5.25 14.25C5.25 14.0511 5.32902 13.8603 5.46967 13.7197C5.61032 13.579 5.80109 13.5 6 13.5H10C10.1989 13.5 10.3897 13.579 10.5303 13.7197C10.671 13.8603 10.75 14.0511 10.75 14.25Z" fill="#039855" />
                                </svg>
                              </span>
                            </template>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm">
                            <span class="tw-flex tw-items-center tw-gap-4">
                              <span class="tw-flex tw-flex-col tw-cursor-pointer" @click.stop.prevent="openStudentModal(applicationStudent)">
                                <span class="tw-font-semibold tw-text-gray-700">
                                  ${applicationStudent.student_name}
                                </span>
                                <span class="tw-text-slate-500">
                                  ${applicationStudent.student_enrollment_number}
                                </span>
                              </span>
                              <span v-if="applicationStudent.has_suspicion_advantage">
                                <a target="_blank" :href="getUrl(urls.applicationDetail, applicationStudent.application_id)">
                                  <i data-toggle="tooltip" title="Suspeita de obtenção de vantagem indevida" class="fas fa-exclamation-triangle fa-lg text-danger m-0 p-0 mt-2"></i>
                                </a>
                              </span>
                            </span>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-font-medium tw-text-gray-400">
                            <div class="tw-flex tw-items-center tw-gap-2">
                              <div class="tw-w-full" aria-hidden="true">
                                <div class="tw-overflow-hidden tw-rounded-full tw-bg-gray-200">
                                  <div
                                    class="tw-h-2 tw-rounded-full"
                                    :class="proportion(!applicationStudent.questions ? applicationStudent.total_correct_answers:getQuestionsSummary('correct_answers', applicationStudent), applicationStudent.total_answers).toFixed(2) <= 20 ? 'tw-bg-red-600' : proportion(!applicationStudent.questions ? applicationStudent.total_correct_answers:getQuestionsSummary('correct_answers', applicationStudent), applicationStudent.total_answers).toFixed(2) <= 60 ? 'tw-bg-blue-600' : 'tw-bg-green-600'"
                                    :style="'width: ' + proportion(!applicationStudent.questions ? applicationStudent.total_correct_answers:getQuestionsSummary('correct_answers', applicationStudent), applicationStudent.total_answers).toFixed(2) + '%'"
                                  ></div>
                                </div>
                              </div>
                              <span>${proportion(!applicationStudent.questions ? applicationStudent.total_correct_answers:getQuestionsSummary('correct_answers', applicationStudent), applicationStudent.total_answers).toFixed(2)}%</span>
                            </div>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4">
                            <span class="tw-text-gray-400">${!applicationStudent.questions ? applicationStudent.total_correct_answers : getQuestionsSummary('correct_answers', applicationStudent)} de ${applicationStudent.total_answers}</span>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4">
                            <div class="tw-flex tw-items-center tw-space-x-1 tw-text-gray-600 tw-text-xl tw-font-medium">
                              <svg class="tw-w-8 tw-h-8 tw--rotate-90" viewBox="0 0 36 36">
                                <circle class="tw-stroke-gray-200" cx="18" cy="18" r="16" fill="none" stroke-width="4" />
                                <circle id="progress" class="tw-stroke-green-600 tw-transition-all tw-duration-300" cx="18" cy="18" r="16" fill="none" stroke-width="4" :stroke-dasharray="getPerformance(applicationStudent) + ' 100'" />
                              </svg>
                              <span class="tw-text-sm tw-font-medium tw-text-gray-400">
                                ${getPerformance(applicationStudent) + '%'}
                              </span>
                            </div>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-text-gray-500">
                            <span class="tw-flex tw-gap-3">
                              <template v-if="applicationStudent.is_ok && !applicationStudent.missed">
                                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Aluno Ok">
                                  <g clip-path="url(#clip0_3772_8585)">
                                    <path d="M12.4142 12.2306C13.3337 11.5077 14.005 10.5161 14.3347 9.39387C14.6643 8.27163 14.6359 7.07454 14.2534 5.96919C13.8709 4.86384 13.1534 3.90521 12.2007 3.22671C11.2479 2.54821 10.1073 2.18359 8.93768 2.18359C7.76802 2.18359 6.62746 2.54821 5.67471 3.22671C4.72196 3.90521 4.00441 4.86384 3.62193 5.96919C3.23945 7.07454 3.21105 8.27163 3.54069 9.39387C3.87033 10.5161 4.54161 11.5077 5.46112 12.2306C3.98239 12.8336 2.67566 13.7928 1.65721 15.0228C1.49725 15.2132 1.41949 15.4594 1.44103 15.7071C1.46256 15.9549 1.58164 16.1839 1.77205 16.3439C1.96247 16.5038 2.20863 16.5816 2.45639 16.5601C2.70414 16.5385 2.93319 16.4195 3.09315 16.229C4.16268 14.9556 6.04706 13.4384 8.93768 13.4384C11.8283 13.4384 13.7127 14.9556 14.7822 16.229C14.9422 16.4195 15.1712 16.5385 15.419 16.5601C15.6667 16.5816 15.9129 16.5038 16.1033 16.3439C16.2937 16.1839 16.4128 15.9549 16.4343 15.7071C16.4559 15.4594 16.3781 15.2132 16.2181 15.0228C15.1999 13.7925 13.8931 12.8333 12.4142 12.2306ZM5.18768 7.81341C5.18768 7.07173 5.40761 6.34671 5.81967 5.73002C6.23172 5.11334 6.81739 4.63269 7.50262 4.34886C8.18784 4.06504 8.94184 3.99077 9.66927 4.13547C10.3967 4.28016 11.0649 4.63732 11.5893 5.16176C12.1138 5.68621 12.4709 6.3544 12.6156 7.08182C12.7603 7.80925 12.6861 8.56325 12.4022 9.24848C12.1184 9.9337 11.6378 10.5194 11.0211 10.9314C10.4044 11.3435 9.67936 11.5634 8.93768 11.5634C7.94344 11.5624 6.99021 11.167 6.28717 10.4639C5.58413 9.76088 5.18871 8.80766 5.18768 7.81341ZM20.226 10.6642L17.726 13.1642C17.6389 13.2516 17.5354 13.3209 17.4214 13.3683C17.3075 13.4156 17.1853 13.4399 17.0619 13.4399C16.9385 13.4399 16.8163 13.4156 16.7024 13.3683C16.5884 13.3209 16.4849 13.2516 16.3978 13.1642L15.1478 11.9142C14.9717 11.7381 14.8728 11.4992 14.8728 11.2501C14.8728 11.0011 14.9717 10.7622 15.1478 10.5861C15.324 10.4099 15.5628 10.311 15.8119 10.311C16.061 10.311 16.2998 10.4099 16.476 10.5861L17.0627 11.1728L18.8994 9.33529C18.9866 9.24808 19.0901 9.17891 19.2041 9.13171C19.318 9.08452 19.4401 9.06022 19.5635 9.06022C19.6868 9.06022 19.8089 9.08452 19.9228 9.13171C20.0368 9.17891 20.1403 9.24808 20.2275 9.33529C20.3147 9.42249 20.3839 9.52602 20.4311 9.63996C20.4783 9.7539 20.5026 9.87602 20.5026 9.99935C20.5026 10.1227 20.4783 10.2448 20.4311 10.3587C20.3839 10.4727 20.3147 10.5762 20.2275 10.6634L20.226 10.6642Z" fill="#12B76A"/>
                                  </g>
                                  <defs>
                                    <clipPath id="clip0_3772_8585">
                                      <rect width="20" height="20" fill="white" transform="translate(0.5)"/>
                                    </clipPath>
                                  </defs>
                                </svg>
                              </template>
                              <template v-if="applicationStudent.missed">
                                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Aluno ausente">
                                  <g clip-path="url(#clip0_3772_8576)">
                                    <path d="M20.5002 10.6247C20.5002 10.8734 20.4014 11.1118 20.2256 11.2877C20.0498 11.4635 19.8113 11.5622 19.5627 11.5622H16.4377C16.189 11.5622 15.9506 11.4635 15.7748 11.2877C15.599 11.1118 15.5002 10.8734 15.5002 10.6247C15.5002 10.3761 15.599 10.1376 15.7748 9.96183C15.9506 9.78601 16.189 9.68724 16.4377 9.68724H19.5627C19.8113 9.68724 20.0498 9.78601 20.2256 9.96183C20.4014 10.1376 20.5002 10.3761 20.5002 10.6247ZM16.2181 15.0216C16.3781 15.212 16.4559 15.4582 16.4343 15.7059C16.4128 15.9537 16.2937 16.1828 16.1033 16.3427C15.9129 16.5027 15.6667 16.5804 15.419 16.5589C15.1712 16.5374 14.9422 16.4183 14.7822 16.2279C13.7127 14.9544 11.8283 13.4372 8.93768 13.4372C6.68065 13.4372 4.60487 14.4279 3.09315 16.2279C2.93319 16.4183 2.70414 16.5374 2.45639 16.5589C2.20863 16.5804 1.96247 16.5027 1.77205 16.3427C1.58164 16.1828 1.46256 15.9537 1.44103 15.7059C1.41949 15.4582 1.49725 15.212 1.65721 15.0216C2.67575 13.7915 3.98243 12.8321 5.46112 12.2286C4.54161 11.5057 3.87033 10.5142 3.54069 9.39192C3.21105 8.26967 3.23945 7.07258 3.62193 5.96723C4.00441 4.86188 4.72196 3.90326 5.67471 3.22476C6.62746 2.54626 7.76802 2.18164 8.93768 2.18164C10.1073 2.18164 11.2479 2.54626 12.2007 3.22476C13.1534 3.90326 13.8709 4.86188 14.2534 5.96723C14.6359 7.07258 14.6643 8.26967 14.3347 9.39192C14.005 10.5142 13.3337 11.5057 12.4142 12.2286C13.8931 12.8318 15.1998 13.7913 16.2181 15.0216ZM8.93768 11.5622C9.67936 11.5622 10.4044 11.3423 11.0211 10.9303C11.6378 10.5182 12.1184 9.93253 12.4022 9.2473C12.6861 8.56208 12.7603 7.80808 12.6156 7.08065C12.4709 6.35322 12.1138 5.68504 11.5893 5.16059C11.0649 4.63614 10.3967 4.27899 9.66927 4.1343C8.94184 3.9896 8.18784 4.06386 7.50262 4.34769C6.81739 4.63152 6.23172 5.11217 5.81967 5.72885C5.40761 6.34554 5.18768 7.07056 5.18768 7.81224C5.18871 8.80648 5.58413 9.75971 6.28717 10.4627C6.99021 11.1658 7.94344 11.5612 8.93768 11.5622Z" fill="#F04438"/>
                                  </g>
                                  <defs>
                                    <clipPath id="clip0_3772_8576">
                                      <rect width="20" height="20" fill="white" transform="translate(0.5)"/>
                                    </clipPath>
                                  </defs>
                                </svg>
                              </template>
                              <template v-else>
                                <template v-if="applicationStudent.count_pendence_discursive > 0 && applicationStudent.has_upload_discursive">
                                  <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Pendência correção discursiva">
                                    <path d="M2.6875 5C2.6875 4.75136 2.78627 4.5129 2.96209 4.33709C3.1379 4.16127 3.37636 4.0625 3.625 4.0625H17.375C17.6236 4.0625 17.8621 4.16127 18.0379 4.33709C18.2137 4.5129 18.3125 4.75136 18.3125 5C18.3125 5.24864 18.2137 5.4871 18.0379 5.66291C17.8621 5.83873 17.6236 5.9375 17.375 5.9375H3.625C3.37636 5.9375 3.1379 5.83873 2.96209 5.66291C2.78627 5.4871 2.6875 5.24864 2.6875 5ZM3.625 9.0625H13.625C13.8736 9.0625 14.1121 8.96373 14.2879 8.78791C14.4637 8.6121 14.5625 8.37364 14.5625 8.125C14.5625 7.87636 14.4637 7.6379 14.2879 7.46209C14.1121 7.28627 13.8736 7.1875 13.625 7.1875H3.625C3.37636 7.1875 3.1379 7.28627 2.96209 7.46209C2.78627 7.6379 2.6875 7.87636 2.6875 8.125C2.6875 8.37364 2.78627 8.6121 2.96209 8.78791C3.1379 8.96373 3.37636 9.0625 3.625 9.0625ZM17.375 10.3125H3.625C3.37636 10.3125 3.1379 10.4113 2.96209 10.5871C2.78627 10.7629 2.6875 11.0014 2.6875 11.25C2.6875 11.4986 2.78627 11.7371 2.96209 11.9129C3.1379 12.0887 3.37636 12.1875 3.625 12.1875H17.375C17.6236 12.1875 17.8621 12.0887 18.0379 11.9129C18.2137 11.7371 18.3125 11.4986 18.3125 11.25C18.3125 11.0014 18.2137 10.7629 18.0379 10.5871C17.8621 10.4113 17.6236 10.3125 17.375 10.3125ZM13.625 13.4375H3.625C3.37636 13.4375 3.1379 13.5363 2.96209 13.7121C2.78627 13.8879 2.6875 14.1264 2.6875 14.375C2.6875 14.6236 2.78627 14.8621 2.96209 15.0379C3.1379 15.2137 3.37636 15.3125 3.625 15.3125H13.625C13.8736 15.3125 14.1121 15.2137 14.2879 15.0379C14.4637 14.8621 14.5625 14.6236 14.5625 14.375C14.5625 14.1264 14.4637 13.8879 14.2879 13.7121C14.1121 13.5363 13.8736 13.4375 13.625 13.4375Z" fill="#CBD5E1"/>
                                  </svg>
                                </template>
                                <template v-if="applicationStudent.count_pendence_choice > 0 && applicationStudent.has_upload_choice">
                                  <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Pendência correção objetiva">
                                    <path d="M14.2883 7.46172C14.3757 7.54882 14.445 7.65231 14.4923 7.76626C14.5397 7.88022 14.564 8.00239 14.564 8.12578C14.564 8.24917 14.5397 8.37134 14.4923 8.4853C14.445 8.59925 14.3757 8.70275 14.2883 8.78984L9.91328 13.1648C9.82619 13.2522 9.72269 13.3216 9.60874 13.3689C9.49478 13.4162 9.37261 13.4406 9.24922 13.4406C9.12583 13.4406 9.00366 13.4162 8.8897 13.3689C8.77575 13.3216 8.67226 13.2522 8.58516 13.1648L6.71016 11.2898C6.62295 11.2026 6.55378 11.0991 6.50658 10.9852C6.45939 10.8712 6.4351 10.7491 6.4351 10.6258C6.4351 10.5025 6.45939 10.3803 6.50658 10.2664C6.55378 10.1525 6.62295 10.0489 6.71016 9.96172C6.79737 9.87451 6.90089 9.80534 7.01483 9.75814C7.12877 9.71095 7.25089 9.68666 7.37422 9.68666C7.49755 9.68666 7.61967 9.71095 7.73361 9.75814C7.84755 9.80534 7.95108 9.87451 8.03828 9.96172L9.25 11.1719L12.9617 7.45938C13.0489 7.37236 13.1525 7.3034 13.2664 7.25642C13.3803 7.20944 13.5023 7.18537 13.6255 7.18559C13.7487 7.18581 13.8706 7.21031 13.9844 7.25769C14.0981 7.30507 14.2014 7.3744 14.2883 7.46172ZM18.9375 10C18.9375 11.6688 18.4427 13.3001 17.5155 14.6876C16.5884 16.0752 15.2706 17.1566 13.7289 17.7952C12.1871 18.4338 10.4906 18.6009 8.85393 18.2754C7.21721 17.9498 5.7138 17.1462 4.53379 15.9662C3.35379 14.7862 2.55019 13.2828 2.22463 11.6461C1.89907 10.0094 2.06616 8.31286 2.70477 6.77111C3.34338 5.22936 4.42484 3.9116 5.81238 2.98448C7.19992 2.05735 8.83122 1.5625 10.5 1.5625C12.737 1.56498 14.8817 2.45473 16.4635 4.03653C18.0453 5.61833 18.935 7.763 18.9375 10ZM17.0625 10C17.0625 8.70206 16.6776 7.43327 15.9565 6.35407C15.2354 5.27487 14.2105 4.43374 13.0114 3.93704C11.8122 3.44034 10.4927 3.31038 9.21972 3.5636C7.94672 3.81681 6.7774 4.44183 5.85962 5.35961C4.94183 6.27739 4.31682 7.44672 4.0636 8.71972C3.81038 9.99272 3.94034 11.3122 4.43704 12.5114C4.93374 13.7105 5.77488 14.7354 6.85407 15.4565C7.93327 16.1776 9.20206 16.5625 10.5 16.5625C12.2399 16.5606 13.908 15.8686 15.1383 14.6383C16.3686 13.408 17.0606 11.7399 17.0625 10Z" fill="#CBD5E1"/>
                                  </svg>
                                </template>
                                <template v-if="applicationStudent.has_questions_choices > 0 && !applicationStudent.has_upload_choice">
                                  <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Pendência upload objetiva">
                                    <path d="M18.313 9.99928C18.313 10.2479 18.2142 10.4864 18.0384 10.6622C17.8626 10.838 17.6241 10.9368 17.3755 10.9368H10.5005C10.2518 10.9368 10.0134 10.838 9.83754 10.6622C9.66173 10.4864 9.56295 10.2479 9.56295 9.99928C9.56295 9.75064 9.66173 9.51218 9.83754 9.33637C10.0134 9.16055 10.2518 9.06178 10.5005 9.06178H17.3755C17.6241 9.06178 17.8626 9.16055 18.0384 9.33637C18.2142 9.51218 18.313 9.75064 18.313 9.99928ZM10.5005 5.93678H17.3755C17.6241 5.93678 17.8626 5.83801 18.0384 5.66219C18.2142 5.48638 18.313 5.24792 18.313 4.99928C18.313 4.75064 18.2142 4.51218 18.0384 4.33637C17.8626 4.16055 17.6241 4.06178 17.3755 4.06178H10.5005C10.2518 4.06178 10.0134 4.16055 9.83754 4.33637C9.66173 4.51218 9.56295 4.75064 9.56295 4.99928C9.56295 5.24792 9.66173 5.48638 9.83754 5.66219C10.0134 5.83801 10.2518 5.93678 10.5005 5.93678ZM17.3755 14.0618H10.5005C10.2518 14.0618 10.0134 14.1606 9.83754 14.3364C9.66173 14.5122 9.56295 14.7506 9.56295 14.9993C9.56295 15.2479 9.66173 15.4864 9.83754 15.6622C10.0134 15.838 10.2518 15.9368 10.5005 15.9368H17.3755C17.6241 15.9368 17.8626 15.838 18.0384 15.6622C18.2142 15.4864 18.313 15.2479 18.313 14.9993C18.313 14.7506 18.2142 14.5122 18.0384 14.3364C17.8626 14.1606 17.6241 14.0618 17.3755 14.0618ZM6.71217 3.086L4.87545 4.92116L4.28874 4.33366C4.11262 4.15754 3.87374 4.05859 3.62467 4.05859C3.3756 4.05859 3.13673 4.15754 2.96061 4.33366C2.78449 4.50978 2.68555 4.74865 2.68555 4.99772C2.68555 5.24679 2.78449 5.48566 2.96061 5.66178L4.21061 6.91178C4.29771 6.99918 4.4012 7.06853 4.51516 7.11585C4.62911 7.16316 4.75129 7.18752 4.87467 7.18752C4.99806 7.18752 5.12024 7.16316 5.23419 7.11585C5.34815 7.06853 5.45164 6.99918 5.53874 6.91178L8.03874 4.41178C8.21486 4.23566 8.3138 3.99679 8.3138 3.74772C8.3138 3.49865 8.21486 3.25978 8.03874 3.08366C7.86262 2.90754 7.62374 2.80859 7.37467 2.80859C7.1256 2.80859 6.88673 2.90754 6.71061 3.08366L6.71217 3.086ZM6.71217 8.086L4.87545 9.92116L4.28874 9.33366C4.11262 9.15754 3.87374 9.05859 3.62467 9.05859C3.3756 9.05859 3.13673 9.15754 2.96061 9.33366C2.78449 9.50978 2.68555 9.74865 2.68555 9.99772C2.68555 10.2468 2.78449 10.4857 2.96061 10.6618L4.21061 11.9118C4.29771 11.9992 4.4012 12.0685 4.51516 12.1158C4.62911 12.1632 4.75129 12.1875 4.87467 12.1875C4.99806 12.1875 5.12024 12.1632 5.23419 12.1158C5.34815 12.0685 5.45164 11.9992 5.53874 11.9118L8.03874 9.41178C8.21486 9.23566 8.3138 8.99679 8.3138 8.74772C8.3138 8.49865 8.21486 8.25978 8.03874 8.08366C7.86262 7.90754 7.62374 7.80859 7.37467 7.80859C7.1256 7.80859 6.88673 7.90754 6.71061 8.08366L6.71217 8.086ZM6.71217 13.086L4.87545 14.9212L4.28874 14.3337C4.20153 14.2465 4.098 14.1773 3.98406 14.1301C3.87012 14.0829 3.748 14.0586 3.62467 14.0586C3.50135 14.0586 3.37922 14.0829 3.26528 14.1301C3.15134 14.1773 3.04782 14.2465 2.96061 14.3337C2.8734 14.4209 2.80423 14.5244 2.75703 14.6383C2.70984 14.7523 2.68555 14.8744 2.68555 14.9977C2.68555 15.121 2.70984 15.2432 2.75703 15.3571C2.80423 15.471 2.8734 15.5746 2.96061 15.6618L4.21061 16.9118C4.29771 16.9992 4.4012 17.0685 4.51516 17.1158C4.62911 17.1632 4.75129 17.1875 4.87467 17.1875C4.99806 17.1875 5.12024 17.1632 5.23419 17.1158C5.34815 17.0685 5.45164 16.9992 5.53874 16.9118L8.03874 14.4118C8.21486 14.2357 8.3138 13.9968 8.3138 13.7477C8.3138 13.4986 8.21486 13.2598 8.03874 13.0837C7.86262 12.9075 7.62374 12.8086 7.37467 12.8086C7.1256 12.8086 6.88673 12.9075 6.71061 13.0837L6.71217 13.086Z" fill="#F04438"/>
                                  </svg>
                                </template>
                                <template v-if="applicationStudent.has_questions_discursives > 0 && !applicationStudent.has_upload_discursive">
                                  <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" data-placement="top" title="Pendência upload discursiva">
                                    <path d="M17.4133 6.2125L13.0383 1.8375C12.9512 1.75033 12.8478 1.68117 12.734 1.63398C12.6202 1.5868 12.4982 1.56251 12.375 1.5625H4.875C4.4606 1.5625 4.06317 1.72712 3.77015 2.02015C3.47712 2.31317 3.3125 2.7106 3.3125 3.125V16.875C3.3125 17.2894 3.47712 17.6868 3.77015 17.9799C4.06317 18.2729 4.4606 18.4375 4.875 18.4375H16.125C16.5394 18.4375 16.9368 18.2729 17.2299 17.9799C17.5229 17.6868 17.6875 17.2894 17.6875 16.875V6.875C17.6875 6.62656 17.5889 6.38827 17.4133 6.2125ZM13 4.45312L14.7969 6.25H13V4.45312ZM5.1875 16.5625V3.4375H11.125V7.1875C11.125 7.43614 11.2238 7.6746 11.3996 7.85041C11.5754 8.02623 11.8139 8.125 12.0625 8.125H15.8125V16.5625H5.1875ZM13.9375 10.3125C13.9375 10.5611 13.8387 10.7996 13.6629 10.9754C13.4871 11.1512 13.2486 11.25 13 11.25H8C7.75136 11.25 7.5129 11.1512 7.33709 10.9754C7.16127 10.7996 7.0625 10.5611 7.0625 10.3125C7.0625 10.0639 7.16127 9.8254 7.33709 9.64959C7.5129 9.47377 7.75136 9.375 8 9.375H13C13.2486 9.375 13.4871 9.47377 13.6629 9.64959C13.8387 9.8254 13.9375 10.0639 13.9375 10.3125ZM13.9375 13.4375C13.9375 13.6861 13.8387 13.9246 13.6629 14.1004C13.4871 14.2762 13.2486 14.375 13 14.375H8C7.75136 14.375 7.5129 14.2762 7.33709 14.1004C7.16127 13.9246 7.0625 13.6861 7.0625 13.4375C7.0625 13.1889 7.16127 12.9504 7.33709 12.7746C7.5129 12.5988 7.75136 12.5 8 12.5H13C13.2486 12.5 13.4871 12.5988 13.6629 12.7746C13.8387 12.9504 13.9375 13.1889 13.9375 13.4375Z" fill="#F04438"/>
                                  </svg>
                                </template>
                              </template>
                            </span>
                          </td>
                          <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-base/5 tw-font-semibold tw-text-gray-700">
                            <template v-if="applicationStudent.total_grade">
                              ${!applicationStudent.questions ? applicationStudent.total_grade.toFixed(2) : getQuestionsSummary('total_grade', applicationStudent).toFixed(2)}
                            </template>
                            <template v-else>-</template>
                          </td>
                          <td class="tw-relative tw-whitespace-nowrap tw-py-4 tw-pl-3 tw-pr-4 tw-text-right tw-text-sm tw-font-medium sm:tw-pr-0">
                            <div class="dropdown">
                              <button class="tw-inline-flex tw-justify-center tw-gap-x-1.5 tw-rounded-md tw-bg-white tw-px-3 tw-py-2 tw-text-sm tw-font-semibold tw-text-gray-900 tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-300 hover:tw-bg-gray-50 dropdown-toggle" type="button" id="dropdownMenuButtonConfig" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Opções
                                <svg class="tw--mr-1 tw-size-5 tw-text-pink-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                                  <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                                </svg>
                              </button>
                              <div class="dropdown-menu" aria-labelledby="dropdownMenuButtonConfig">
                                <a target="_blank" :href="getUrl(urls.examPrint, '{{ object.pk }}', applicationStudent.id)" class="dropdown-item nav-link">
                                  Imprimir <i class="fas fa-print"></i>
                                </a>
                                <button type="button" class="dropdown-item nav-link" title="Zerar prova do aluno" @click="clearApplicationStudent(applicationStudent)">
                                  Zerar prova <i class="fas fa-trash"></i>
                                </button>
                                <button type="button" class="dropdown-item nav-link" title="O aluno faltou" @click="clearApplicationStudent(applicationStudent, missed = !applicationStudent.missed)">
                                  ${applicationStudent.missed ? 'Remover falta' : 'Marcar falta'}
                                </button>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% else %}
        <h5>Selecione uma turma acima para ver os resultados</h5>
      {% endif %}
    </div>
  </div>
</main>
{% endblock content-fixed %}
{% block endmain %}{% endblock endmain %}
{% block slide-over %}
<div class="tw-relative tw-z-[1000] tw-off-canvas tw-off-canvas-right tw-invisible" aria-labelledby="slide-over-title" role="dialog" aria-modal="true" id="right-off-canvas">
  <div class="tw-fixed tw-inset-0 tw-bg-[#9BA3AF] tw-bg-opacity-60 tw-transition-opacity"></div>
  <div class="tw-fixed tw-inset-0 tw-overflow-hidden">
    <div class="tw-absolute tw-inset-0 tw-overflow-hidden">
      <div class="tw-pointer-events-none tw-fixed tw-inset-y-0 tw-right-0 tw-flex tw-max-w-full tw-pl-10" v-click-outside="onClickOutsideFilters">
        <div class="tw-pointer-events-auto tw-w-screen tw-max-w-md">
          <div class="tw-flex tw-h-full tw-flex-col tw-divide-y tw-divide-gray-200 tw-bg-white tw-border-l">
            <div class="tw-h-0 tw-flex-1 tw-overflow-y-auto">
              <div class="tw-px-4 tw-pt-6 sm:tw-px-6">
                <div class="tw-flex tw-items-center tw-justify-between">
                  <h2 class="tw-text-base tw-font-semibold tw-leading-6 tw-text-gray-900" id="slide-over-title">
                    Filtrar cadernos
                  </h2>
                  <div class="tw-ml-3 tw-flex tw-h-7 tw-items-center">
                    <button type="button" class="tw-relative tw-rounded-md tw-bg-white tw-text-gray-400 hover:tw-text-gray-500 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-primary-500 focus:tw-ring-offset-2 tw-off-canvas-close" id="headlessui-slider-over-close-button-1">
                      <span class="tw-absolute tw--inset-2.5"></span>
                      <span class="tw-sr-only">Fechar painel</span>
                      <svg class="tw-h-6 tw-w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="tw-mt-1">
                  <p class="tw-text-sm tw-text-gray-500">
                    Adicione abaixo os filtros que você deseja aplicar.
                  </p>
                </div>
              </div>
              <form id="filterForm" method="GET" class="tw-flex tw-flex-1 tw-flex-col tw-justify-between">
                <input type="hidden" value="{{ request.GET.turma }}" name="turma" />
                <div class="tw-divide-y tw-divide-gray-200 tw-px-4 sm:tw-px-6">
                  <div class="tw-space-y-6 tw-pb-5 tw-pt-6">
                    <div>
                      <label class="tw-block tw-text-sm tw-font-medium tw-leading-6 tw-text-gray-900">Filtrar por disciplinas</label>
                      <div class="tw-mt-2">
                        <select id="subjects-select" name="disciplinas" class="tw-mt-2 tw-block tw-w-full tw-rounded-md tw-border-0 tw-py-1.5 tw-pl-3 tw-pr-10 tw-text-gray-900 tw-ring-1 tw-ring-inset tw-ring-gray-300 focus:tw-ring-2 focus:tw-ring-primary-600 sm:tw-text-sm sm:tw-leading-6" multiple>
                          {% for subject in exam_subjects %}
                            <option
                              value="{{ subject.pk }}"
                              {% if subject.pk|stringformat:"s" in subjects_filter %}selected{% endif %}
                            >
                              {{ subject }}
                            </option>
                          {% endfor %}
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="tw-flex tw-flex-wrap tw-space-y-3 sm:tw-space-x-3 sm:tw-space-y-0 tw-px-4 tw-py-4">
              <button type="submit" class="tw-inline-flex tw-w-full tw-flex-shrink-0 tw-items-center tw-justify-center tw-rounded-md tw-bg-blue-600 tw-px-3 tw-py-2 tw-text-sm tw-font-semibold tw-text-white tw-shadow-sm hover:tw-bg-blue-500 focus-visible:tw-outline focus-visible:tw-outline-2 focus-visible:tw-outline-offset-2 focus-visible:tw-outline-blue-600 sm:tw-flex-1" form="filterForm">
                Aplicar filtro
              </button>
              <template>
                <button type="button" class="tw-inline-flex tw-w-full tw-flex-1 tw-items-center tw-justify-center tw-rounded-md tw-px-3 tw-py-2 tw-text-sm tw-font-semibold tw-text-primary-600 tw-border tw-border-primary-600 tw-shadow-sm hover:tw-text-white hover:tw-bg-primary-600 tw-off-canvas-close">
                  Fechar
                </button>
              </template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock slide-over %}
{% block extra-modal %}
<div class="overlay text-center d-none">
  <div class="row m-0 shadow bg-secondary fixed-top">
    <div class="col">
      <h4 class="text-white pt-3 m-0 pb-1">Pressione SHIFT e mova o mouse para criar uma seleção, ou clique na imagem e arraste o mouse para move-la <i class="fas fa-times text-white fa-2x float-right" @click="showAnnotorious(close = true)"></i></h4>
    </div>
    <div class="col-12 pb-2">
      <div id="toolbarDiv">
        <div class="row m-0 d-flex justify-content-center">
          <i class="fas fa-home m-2 text-white" style="font-size: 1.1rem;" id="home"></i>
          <i class="fas fa-search-plus m-2 text-white" style="font-size: 1.1rem;" id="zoom-in"></i>
          <i class="fas fa-search-minus m-2 text-white" style="font-size: 1.1rem;" id="zoom-out"></i>
          <i class="fas fa-undo m-2 text-white" style="font-size: 1.1rem;" id="rotate-left"></i>
          <i class="fas fa-undo m-2 text-white" style="transform: rotate(-90deg); transform: scaleX(-1); font-size: 1.1rem;" id="rotate-right"></i>
          <i class="fas fa-expand-arrows-alt m-2 text-white" style="font-size: 1.1rem;" id="full-page"></i>
        </div>
      </div>
    </div>
  </div>
  <div class="row m-0" style="padding-top: 100px;">
    <div class="container p-0">
      <div class="row d-flex justify-content-center">
        <div class="col">
          <div class="overlay-content" id="img-content" style="height: 720px;"></div>
        </div>
      </div>
    </div>
    <div class="bg-dark p-2 shadow py-4 rounded" style="position: absolute; width: 300px; right: 0; top: 20%" id="annotations-list" v-if="annotationsList.length > 0">
      <h5 class="text-white">Lista de Anotações</h5>
      <div class="row m-0 mt-3" v-for="(annotation, indexAnnotation) in annotationsList">
        <div class="col-12">
          <div class="dropdown">
            <button class="btn btn-xs btn-secondary py-0 m-1 dropdown-toggle float-right" data-toggle="dropdown" @mouseenter="anno.selectAnnotation(annotation.id)"> Adicionar tag <i class="fas fa-tags mx-1"></i></button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <h6 class="dropdown-header tx-uppercase tx-12 tx-bold tx-inverse">Adicionar TAG especial</h6>
              <a class="dropdown-item bg-danger text-white my-1" href="#" @click="createTagInAnnotation('ERRO', annotation)">Tag de Erro</a>
              <a class="dropdown-item bg-warning my-1" href="#" @click="createTagInAnnotation('ATENÇÃO', annotation)">Tag de Atenção</a>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="card" style="cursor: pointer;" @click="anno.selectAnnotation(annotation.id)">
            <div class="card-body p-1">
              <p class="mb-0 pt-1 text-truncate" v-for="(comment, index) in annotation.comments"> ${comment} </p>
              <div class="mt-1" v-if="annotation.tags.length > 0">
                <strong class="tx-10">TAG(S):</strong> <span class="badge mx-1" v-bind:class="getBadgeColor(tag)" v-for="tag in annotation.tags">${tag}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row m-0 fixed-bottom bg-secondary">
    <div class="col shadow">
      <h4 class="text-center text-white py-2">Aluno: ${this.applicationStudent.fullname} - Questão: ${this.selectedQuestion.order}</h4>
    </div>
  </div>
</div>  

<div class="modal" tabindex="-1" role="dialog" id="detailModal">
  <div class="modal-dialog modal-fullscreen" role="document">
    <div class="modal-content">
      <template v-if="spinnerVerification">
        <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-mt-8">
          <h6 class="tw-text-base tw-font-medium tw-text-slate-700 tw-mb-0">Carregando...</h6>
          <div class="spinner-border tw-text-primary-600" role="status">
            <span class="tw-sr-only">Carregando...</span>
          </div>
        </div>
      </template>
      <template v-else>
        <div class="tw-sticky tw-top-0 tw-z-10 tw-flex tw-justify-between tw-items-center tw-bg-white tw-border-b tw-border-slate-200 tw-px-4 tw-py-2">
          <div class="tw-flex tw-items-center tw-justify-between tw-flex-1">
            <div class="tw-flex tw-gap-x-4">
              <!-- <img class="tw-inline-block tw-size-12 tw-rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="" /> -->
              <span class="tw-inline-block tw-size-12 tw-overflow-hidden tw-rounded-full tw-bg-gray-100" :class="applicationStudent?.pk ? 'tw-visible' : 'tw-invisible'">
                <svg class="tw-size-full tw-text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
              </span>
              <div class="tw-flex tw-flex-col tw-justify-center tw-min-w-0 tw-flex-auto">
                <p class="tw-text-sm tw-font-semibold tw-text-slate-950">
                  ${applicationStudent.fullname}
                </p>
                <p class="tw-text-xs/4.5 tw-text-gray-500">
                  ${applicationStudent.enrollment_number}
                </p>
                <span v-if="applicationStudent.start_time" class="text-muted">
                  de ${formatDate(applicationStudent.start_time)} <template v-if="applicationStudent.end_time">às ${formatDate(applicationStudent.end_time)}</template>
                </span>
                <template v-if="applicationStudent.empty_questions > 0">
                  <span class="text-danger" v-if="applicationStudent.empty_questions == 1">
                    (finalizou a prova confirmando que havia 1 questão em branco)
                  </span>
                  <span class="text-danger" v-else>
                    (finalizou a prova confirmando que havia ${applicationStudent.empty_questions} questões em branco)
                  </span>
                </template>
              </div>
            </div>
            <div class="tw-flex tw-gap-x-2">
              <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200" :class="previousSelectedApplicationStudent ? 'tw-opacity-100 hover:tw-bg-gray-50' : 'tw-opacity-50'" @click="previousSelectedApplicationStudent ? changeStudent('previous') : ''" :disabled="!previousSelectedApplicationStudent">
                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4 tw-text-gray-300">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                </svg>
                Anterior
              </button>
              <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200" :class="nextSelectedApplicationStudent ? 'tw-opacity-100 hover:tw-bg-gray-50' : 'tw-opacity-50'" @click="nextSelectedApplicationStudent ? changeStudent('next') : ''" :disabled="!nextSelectedApplicationStudent">
                Próximo
                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4 tw-text-gray-300">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                </svg>
              </button>
            </div>
          </div>
          <div class="tw-flex tw-items-center tw-justify-end tw-flex-1">
            <div class="tw-flex tw-items-center tw-gap-2">
              <div class="tw-flex tw-items-center tw-gap-6">
                <span class="tw-flex tw-items-center tw-gap-2 tw-text-xs/4.5" v-if="applicationStudent.is_omr">
                  <span class="tw-text-slate-500">
                    Aplicação: <span class="tw-font-semibold tw-text-slate-800">Presencial</span>
                  </span>
                  <span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M13 2.25H3C2.53587 2.25 2.09075 2.43437 1.76256 2.76256C1.43437 3.09075 1.25 3.53587 1.25 4V11C1.25 11.4641 1.43437 11.9092 1.76256 12.2374C2.09075 12.5656 2.53587 12.75 3 12.75H13C13.2298 12.75 13.4574 12.7047 13.6697 12.6168C13.882 12.5288 14.0749 12.3999 14.2374 12.2374C14.3999 12.0749 14.5288 11.882 14.6168 11.6697C14.7047 11.4574 14.75 11.2298 14.75 11V4C14.75 3.77019 14.7047 3.54262 14.6168 3.3303C14.5288 3.11798 14.3999 2.92507 14.2374 2.76256C14.0749 2.60006 13.882 2.47116 13.6697 2.38321C13.4574 2.29527 13.2298 2.25 13 2.25ZM13.25 11C13.25 11.0663 13.2237 11.1299 13.1768 11.1768C13.1299 11.2237 13.0663 11.25 13 11.25H3C2.9337 11.25 2.87011 11.2237 2.82322 11.1768C2.77634 11.1299 2.75 11.0663 2.75 11V4C2.75 3.9337 2.77634 3.87011 2.82322 3.82322C2.87011 3.77634 2.9337 3.75 3 3.75H13C13.0663 3.75 13.1299 3.77634 13.1768 3.82322C13.2237 3.87011 13.25 3.9337 13.25 4V11ZM10.75 14.25C10.75 14.4489 10.671 14.6397 10.5303 14.7803C10.3897 14.921 10.1989 15 10 15H6C5.80109 15 5.61032 14.921 5.46967 14.7803C5.32902 14.6397 5.25 14.4489 5.25 14.25C5.25 14.0511 5.32902 13.8603 5.46967 13.7197C5.61032 13.579 5.80109 13.5 6 13.5H10C10.1989 13.5 10.3897 13.579 10.5303 13.7197C10.671 13.8603 10.75 14.0511 10.75 14.25Z" fill="#039855" />
                    </svg>
                  </span>
                </span>
                <span class="tw-flex tw-items-center tw-gap-2 tw-text-xs/4.5" v-if="applicationStudent.randomization_version">
                  <span class="tw-text-slate-500">
                    Ordem: <span class="tw-font-semibold tw-text-slate-800">Randomizada</span>
                  </span>
                  <span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M15.0306 10.9701C15.1005 11.0397 15.156 11.1225 15.1939 11.2137C15.2317 11.3049 15.2512 11.4026 15.2512 11.5013C15.2512 11.6 15.2317 11.6978 15.1939 11.7889C15.156 11.8801 15.1005 11.9629 15.0306 12.0326L13.5306 13.5326C13.3897 13.6734 13.1986 13.7526 12.9994 13.7526C12.8001 13.7526 12.609 13.6734 12.4681 13.5326C12.3272 13.3917 12.2481 13.2006 12.2481 13.0013C12.2481 12.802 12.3272 12.6109 12.4681 12.4701L12.6875 12.2507H12.5569C11.8009 12.2498 11.0559 12.069 10.3837 11.723C9.7115 11.3771 9.13134 10.876 8.69125 10.2613L6.08625 6.61193C5.7852 6.19124 5.38825 5.84833 4.92828 5.61161C4.46831 5.37489 3.95856 5.25116 3.44125 5.25068H2C1.80109 5.25068 1.61032 5.17166 1.46967 5.03101C1.32902 4.89035 1.25 4.69959 1.25 4.50068C1.25 4.30176 1.32902 4.111 1.46967 3.97035C1.61032 3.82969 1.80109 3.75068 2 3.75068H3.44125C4.19726 3.75151 4.9422 3.93239 5.61441 4.27833C6.28663 4.62427 6.86679 5.12534 7.30688 5.74005L9.91375 9.38943C10.2148 9.81011 10.6118 10.153 11.0717 10.3897C11.5317 10.6265 12.0414 10.7502 12.5588 10.7507H12.6875L12.4675 10.5313C12.3266 10.3904 12.2474 10.1993 12.2474 10.0001C12.2474 9.80079 12.3266 9.6097 12.4675 9.4688C12.6084 9.32791 12.7995 9.24875 12.9987 9.24875C13.198 9.24875 13.3891 9.32791 13.53 9.4688L15.0306 10.9701ZM9.05437 6.4313C9.20407 6.56222 9.39963 6.62832 9.59806 6.61508C9.79649 6.60184 9.98153 6.51033 10.1125 6.36068C10.4176 6.01198 10.7937 5.73255 11.2156 5.54111C11.6375 5.34966 12.0954 5.25064 12.5588 5.25068H12.6875L12.4675 5.47005C12.3266 5.61095 12.2474 5.80204 12.2474 6.0013C12.2474 6.20056 12.3266 6.39165 12.4675 6.53255C12.6084 6.67345 12.7995 6.7526 12.9987 6.7526C13.198 6.7526 13.3891 6.67345 13.53 6.53255L15.03 5.03255C15.0999 4.96287 15.1554 4.88008 15.1933 4.78891C15.2311 4.69775 15.2506 4.60001 15.2506 4.5013C15.2506 4.40259 15.2311 4.30485 15.1933 4.21369C15.1554 4.12252 15.0999 4.03973 15.03 3.97005L13.53 2.47005C13.3891 2.32915 13.198 2.25 12.9987 2.25C12.7995 2.25 12.6084 2.32915 12.4675 2.47005C12.3266 2.61095 12.2474 2.80204 12.2474 3.0013C12.2474 3.20056 12.3266 3.39165 12.4675 3.53255L12.6875 3.75068H12.5569C11.8796 3.751 11.2102 3.89617 10.5936 4.17643C9.97699 4.4567 9.42747 4.86559 8.98188 5.37568C8.85196 5.52548 8.78665 5.72063 8.80024 5.91845C8.81383 6.11628 8.9052 6.30067 9.05437 6.4313ZM6.94562 9.57005C6.79593 9.43913 6.60037 9.37303 6.40194 9.38627C6.20351 9.39952 6.01847 9.49102 5.8875 9.64068C5.58243 9.98937 5.20633 10.2688 4.78443 10.4602C4.36252 10.6517 3.90456 10.7507 3.44125 10.7507H2C1.80109 10.7507 1.61032 10.8297 1.46967 10.9703C1.32902 11.111 1.25 11.3018 1.25 11.5007C1.25 11.6996 1.32902 11.8904 1.46967 12.031C1.61032 12.1717 1.80109 12.2507 2 12.2507H3.44125C4.11855 12.2504 4.78795 12.1052 5.40454 11.8249C6.02113 11.5446 6.57066 11.1358 7.01625 10.6257C7.14639 10.4761 7.21202 10.2811 7.19879 10.0833C7.18555 9.88547 7.09453 9.70095 6.94562 9.57005Z" fill="#CBD5E1" />
                    </svg>
                  </span>
                </span>
                <template v-if="selectedApplicationStudent && selectedApplicationStudent.can_be_corrected">
                  <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-sm tw-font-semibold tw-text-gray-600 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" @click="changeViewType(), !correctionFast ? getEnunciation(selectedQuestion) : ''">
                    <template v-if="correctionFast">
                      <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="tw-size-5 tw-text-gray-300">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z" />
                      </svg>
                      Correção completa
                    </template>
                    <template v-else>
                      <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="tw-size-5 tw-text-gray-300">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5" />
                      </svg>
                      Correção rápida
                    </template>
                  </button>
                </template>
              </div>
              <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-p-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap hover:tw-bg-gray-50" data-dismiss="modal" aria-label="Fechar">
                <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="tw-size-6 tw-text-gray-500">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>
        </div>
        <!-- tw-grid tw-grid-cols-1 tw-items-start tw-flex-1 lg:tw-grid-cols-2 -->
        <div class="tw-flex tw-items-start tw-flex-1">
          <!-- Left column -->
          <div class="tw-w-[50%] tw-top-[4.0625rem] tw-fixed tw-inset-y-0 tw-left-0 tw-bg-white tw-overflow-y-auto tw-border-r tw-border-slate-200">
            <div>
              <template v-if="selectedApplicationStudent && !selectedApplicationStudent.can_be_corrected">
                <div class="tw-bg-honey-100 tw-px-4 tw-py-3">
                  <div class="tw-flex tw-items-center">
                    <div class="tw-shrink-0">
                      <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                      </svg>
                    </div>
                    <div class="tw-ml-3">
                      <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                        <p class="tw-mb-0">Essa prova não poderá ser corrigida, a data limite para correção expirou!</p>
                      </div>
                    </div>
                  </div>
                </div>
              </template>
              <div class="tw-p-6">
                <template v-if="correctionFast">
                  <div class="tw-flex tw-flex-col tw-gap-2">
                    <div class="tw-flex tw-items-center tw-justify-between">
                      <div>
                        <p class="tw-text-sm tw-font-semibold tw-text-slate-950">${applicationStudent.exam_name}</p>
                      </div>
                      <div>
                        <span class="tw-isolate tw-inline-flex tw-rounded-lg">
                          <button
                            type="button"
                            class="tw-relative tw-inline-flex tw-items-center tw-rounded-l-lg tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                            :class="['Objetiva', 'Discursiva', 'Arquivo anexado', 'Somatório'].every(item => filterCorrectionFast.includes(item)) ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                            @click="filterCorrectionFast = ['Objetiva', 'Discursiva', 'Arquivo anexado', 'Somatório']"
                          >
                            Todas
                          </button>
                          <button
                            v-for="(btn, index) in visibleButtons"
                            type="button"
                            class="tw-relative tw-inline-flex tw-items-center tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                            :class="[
                              getLastRoundedClasses(index),
                              {
                                'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50':
                                  (btn === 'Objetivas' && filterCorrectionFast.length === 1 && filterCorrectionFast.includes('Objetiva')) ||
                                  (btn === 'Dissertativas' && filterCorrectionFast.length === 2 && ['Discursiva', 'Arquivo anexado'].every(item => filterCorrectionFast.includes(item))) ||
                                  (btn === 'Somatórias' && filterCorrectionFast.length === 1 && filterCorrectionFast.includes('Somatório')),
                                'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100':
                                  !(
                                    (btn === 'Objetivas' && filterCorrectionFast.length === 1 && filterCorrectionFast.includes('Objetiva')) ||
                                    (btn === 'Dissertativas' && filterCorrectionFast.length === 2 && ['Discursiva', 'Arquivo anexado'].every(item => filterCorrectionFast.includes(item))) ||
                                    (btn === 'Somatórias' && filterCorrectionFast.length === 1 && filterCorrectionFast.includes('Somatório'))
                                  )
                              }
                            ]"
                            @click="
                              filterCorrectionFast = btn === 'Objetivas'
                                ? ['Objetiva']
                                : btn === 'Dissertativas'
                                ? ['Discursiva', 'Arquivo anexado']
                                : ['Somatório']
                            "
                          >
                            ${btn}
                          </button>
                          <!-- <button
                            type="button"
                            class="tw-relative tw-inline-flex tw-items-center tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                            :class="filterCorrectionFast.length === 1 && ['Objetiva'].every(item => filterCorrectionFast.includes(item)) ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                            @click="filterCorrectionFast = ['Objetiva']"
                          >
                            Objetivas
                          </button>
                          <button
                            type="button"
                            class="tw-relative tw-inline-flex tw-items-center tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                            :class="filterCorrectionFast.length === 2 && ['Discursiva', 'Arquivo anexado'].every(item => filterCorrectionFast.includes(item)) ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                            @click="filterCorrectionFast = ['Discursiva', 'Arquivo anexado']"
                          >
                            Dissertativas
                          </button>
                          <button
                            type="button"
                            class="tw-relative tw-inline-flex tw-items-center tw-rounded-r-lg tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                            :class="filterCorrectionFast.length === 1 && ['Somatório'].every(item => filterCorrectionFast.includes(item)) ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                            @click="filterCorrectionFast = ['Somatório']"
                          >
                            Somatórias
                          </button> -->
                        </span>
                      </div>
                    </div>
                    <div>
                      <div v-if="!question.text_correction" v-for="(question, index) in applicationStudent.questions.filter(question => ['Discursiva', 'Arquivo anexado'].includes(question.category) && filterCorrectionFast.includes('Discursiva') || question.category == 'Objetiva' && filterCorrectionFast.includes('Objetiva') || question.category == 'Somatório' && filterCorrectionFast.includes('Somatório'))" class="tw-flex tw-items-center tw-justify-between tw-gap-2 tw-border-b tw-border-gray-200 tw-py-4">
                        <div class="tw-flex tw-items-center tw-gap-2">
                          <p class="tw-text-sm tw-font-semibold tw-text-gray-700 tw-whitespace-nowrap">
                            Questão ${question.question_number}
                            <span v-if="question.empty || selectedApplicationStudent.empty_option_questions.includes(question.pk)" class="text-muted">(Em branco)</span>
                          </p>
                          <span class="tw-bg-gray-50 tw-rounded tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-px-3 tw-py-1">Valor: <span class="tw-text-gray-700">${question.question_weight}</span></span>
                        </div>
                        <template v-if="question.category === 'Arquivo anexado'">
                          {% if object.group_attachments %}
                            <div class="row row-xs" v-if="getAttachmentsExamTeacherSubject(question.exam_teacher_subject)">
                              <div class="col-sm-12 col-lg-6 col-xl-6 p-1" v-for="(attachment, index) in getAttachmentsExamTeacherSubject(question.exam_teacher_subject).attachments">
                                <div class="card">
                                  <div class="card-body py-2 d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                      <i class="fas fa-file fa-2x text-primary"></i>
                                      <h6 class="ml-1 mb-0"><a :href="attachment.file" target="_blank" class="link-02">Anexo ${index + 1}</a></h6>
                                    </div>
                                    <div>
                                      <template v-if="checkAnswerType(attachment.file)">
                                        <a href="javascript:void(0)" class="btn btn-xs btn-primary" data-animation="effect-scale" @click="showAnnotorious(false, false, attachment.file)">
                                          <i class="fas fa-image"></i>
                                        </a>
                                      </template>
                                      <template v-else>
                                        <a :href="attachment.file" target="_blank" class="btn btn-xs btn-primary">
                                          <i class="fas fa-download"></i>
                                        </a>
                                      </template>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <span class="text-danger" v-if="question && !getAttachmentsExamTeacherSubject(question.exam_teacher_subject).attachments.length">O aluno não enviou arquivo</span>
                            </div>
                          {% else %}
                            <template v-if="question.corrected_but_no_answer">
                              <span class="text-danger">A questão foi corrigida, mas a resposta do aluno não foi detectada automaticamente. Verifique na imagem do cartão ao lado.</span>
                            </template>
                            <template v-else>
                              <template v-if="!(question.file_answer && question.file_answer_url)">
                                <br />
                                <span class="text-danger">Sem resposta enviada.</span>
                              </template>
                            </template>
                          {% endif %}
                        </template>
                        <template v-if="question.category === 'Discursiva'">
                          <p v-if="question.textual_answer">
                            ${question.textual_answer_content}
                          </p>
                          <span class="text-danger" v-else>Sem resposta</span>
                        </template>
                        <template v-if="question.annuled">
                          <span class="tw-inline-flex tw-items-center tw-gap-1 tw-rounded-md tw-bg-gray-50 tw-px-2 tw-py-1 tw-text-xs tw-font-medium tw-text-gray-600 tw-ring-1 tw-ring-inset tw-ring-gray-500/10">
                            Questão anulada
                            <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                              <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                          </span>
                        </template>
                        <template v-else>
                          <template v-if="question.category === 'Objetiva'">
                            <div class="tw-flex tw-items-center tw-gap-6">
                              <div class="tw-flex tw-items-center tw-gap-1">
                                <!-- <button type="button" class="tw-size-8 tw-rounded tw-bg-green-200 tw-text-green-700 tw-text-xs/4.5 tw-font-semibold">A</button>
                                <button type="button" class="tw-size-8 tw-rounded tw-bg-gray-100 tw-text-gray-500 tw-text-xs/4.5 tw-font-semibold">B</button>
                                <button type="button" class="tw-size-8 tw-rounded tw-bg-gray-100 tw-text-gray-500 tw-text-xs/4.5 tw-font-semibold">C</button>
                                <button type="button" class="tw-size-8 tw-rounded tw-bg-red-100 tw-text-red-700 tw-text-xs/4.5 tw-font-semibold">D</button>
                                <button type="button" class="tw-size-8 tw-rounded tw-bg-gray-100 tw-text-gray-500 tw-text-xs/4.5 tw-font-semibold">E</button> -->
                                <button
                                  v-for="(_alternative, indexAlternative) in question.alternatives"
                                  type="button"
                                  class="tw-size-8 tw-rounded tw-text-xs/4.5 tw-font-semibold tw-uppercase"
                                  :class="{
                                    'tw-bg-gray-100 tw-text-gray-500': !(question.answer == _alternative.id && _alternative.is_correct) && !(question.answer == _alternative.id && !_alternative.is_correct),
                                    'tw-bg-mint-200 tw-text-mint-700': question.answer == _alternative.id && _alternative.is_correct,
                                    'tw-bg-poppy-100 tw-text-poppy-700': question.answer == _alternative.id && !_alternative.is_correct,
                                  }"
                                  @click="updateChoiceAnswer(_alternative.id, question)"
                                  :disabled="loadingSaveQuestion.includes(question.id || question.pk)"
                                >
                                  ${generateAlternativeOrder(indexAlternative)}
                                </button>
                              </div>
                              <div class="tw-flex tw-items-center tw-gap-2">
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Marcar resposta como em branco" v-if="!selectedApplicationStudent.empty_option_questions.includes(question.pk)" @click="selectedQuestion = question, setEmptyAnswer()">
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A" />
                                  </svg>
                                </button>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Remover nota" v-if="question.option_answer" @click="selectedQuestion = question, setQuestionList(question, null, false, true)">
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M13.5 3H2.5C2.30109 3 2.11032 3.07902 1.96967 3.21967C1.82902 3.36032 1.75 3.55109 1.75 3.75C1.75 3.94891 1.82902 4.13968 1.96967 4.28033C2.11032 4.42098 2.30109 4.5 2.5 4.5H2.75V13C2.75 13.3315 2.8817 13.6495 3.11612 13.8839C3.35054 14.1183 3.66848 14.25 4 14.25H12C12.3315 14.25 12.6495 14.1183 12.8839 13.8839C13.1183 13.6495 13.25 13.3315 13.25 13V4.5H13.5C13.6989 4.5 13.8897 4.42098 14.0303 4.28033C14.171 4.13968 14.25 3.94891 14.25 3.75C14.25 3.55109 14.171 3.36032 14.0303 3.21967C13.8897 3.07902 13.6989 3 13.5 3ZM11.75 12.75H4.25V4.5H11.75V12.75ZM4.75 1.25C4.75 1.05109 4.82902 0.860322 4.96967 0.71967C5.11032 0.579018 5.30109 0.5 5.5 0.5H10.5C10.6989 0.5 10.8897 0.579018 11.0303 0.71967C11.171 0.860322 11.25 1.05109 11.25 1.25C11.25 1.44891 11.171 1.63968 11.0303 1.78033C10.8897 1.92098 10.6989 2 10.5 2H5.5C5.30109 2 5.11032 1.92098 4.96967 1.78033C4.82902 1.63968 4.75 1.44891 4.75 1.25Z" fill="#F04438" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </template>
                          <template v-else-if="question.category === 'Somatório'">
                            <div class="tw-flex tw-items-center tw-gap-6">
                              <div>
                                <div class="tw-flex tw-items-center tw-gap-1">
                                  <button
                                    v-for="(_alternative, indexAlternative) in question.alternatives"
                                    type="button"
                                    class="tw-size-8 tw-rounded tw-text-xs/4.5 tw-font-semibold tw-uppercase"
                                    :class="{
                                      'tw-bg-gray-100 tw-text-gray-500': !(question.sum_question_checked_answers.includes(_alternative.id) && _alternative.is_correct) && !(question.sum_question_checked_answers.includes(_alternative.id) && !_alternative.is_correct),
                                      'tw-bg-mint-200 tw-text-mint-700': _alternative.is_correct,
                                      'tw-border tw-border-mint-700': question.sum_question_checked_answers.includes(_alternative.id) && _alternative.is_correct,
                                      'tw-bg-gray-100 tw-text-gray-500 tw-border tw-border-gray-500': question.sum_question_checked_answers.includes(_alternative.id) && !_alternative.is_correct,
                                    }"
                                  >
                                    ${generateAlternativeOrder(indexAlternative, true)}
                                  </button>
                                </div>
                              </div>
                              <div class="tw-relative">
                                <label :for="question.pk" class="tw-absolute tw--top-2 tw-left-2 tw-inline-block tw-rounded-lg tw-bg-white tw-px-1 tw-text-xs tw-font-medium tw-text-gray-900">
                                  Resposta
                                </label>
                                <input type="number" :id="question.pk" data-type="question.pk" :tabindex="index+1" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" @keyup="question.sum_question_sum_value = $event.target.value, $forceUpdate()" min="1" :max="99" @input="question.formValid = ''" @blur="updateSumQuestionAnswer(question.sum_question_sum_value, question, false)" step="0.01" placeholder="0,00" v-model="question.sum_question_sum_value" />
                              </div>
                              <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Marcar resposta como em branco" v-if="!selectedApplicationStudent.empty_option_questions.includes(question.pk)" @click="selectedQuestion = question, setEmptyAnswer()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                  <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A" />
                                </svg>
                              </button>
                            </div>
                          </template>
                          <template v-else>
                            <div class="tw-flex tw-items-center tw-gap-4">
                              <div>
                                <div class="tw-flex tw-items-center tw-gap-1" v-if="!selectedQuestion.text_correction">
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-p-2 tw-text-poppy-600 tw-border tw-border-poppy-600 hover:tw-text-white hover:tw-bg-poppy-600" title="Atribuir nota zero" @click="selectedQuestion = question, setQuestionList(question, 0, hasCorrection=true)">
                                    <span class="tw-sr-only">0%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" title="Atribuir 25% da nota" @click="selectedQuestion = question, setQuestionList(question, (question.question_weight * 0.25).toFixed(4), hasCorrection=true)">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">25%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" title="Atribuir metade da nota" @click="selectedQuestion = question, setQuestionList(question, (question.question_weight * 0.5).toFixed(4), hasCorrection=true)">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">50%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" title="Atribuir 75% da nota" @click="selectedQuestion = question, setQuestionList(question, (question.question_weight * 0.75).toFixed(4), hasCorrection=true)">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">75%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-p-2 tw-text-mint-600 tw-border tw-border-mint-600 hover:tw-text-white hover:tw-bg-mint-600" title="Atribuir nota máxima" @click="selectedQuestion = question, setQuestionList(question, question.question_weight, hasCorrection=true)">
                                    <span class="tw-sr-only">100%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                </div>
                              </div>
                              <div class="tw-relative">
                                <label :for="question.pk" class="tw-absolute tw--top-2 tw-left-2 tw-inline-block tw-rounded-lg tw-bg-white tw-px-1 tw-text-xs tw-font-medium tw-text-gray-900">Nota</label>
                                <input type="number" :id="question.pk" data-type="question.pk" :tabindex="index+1" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" @keyup="question.teacher_grade = $event.target.value, $forceUpdate()" min="0" :max="question.question_weight" @input="question.formValid = ''" @blur="sendTeacherFeedback(question, next = false, hasCorrection=true)" step="0.01" placeholder="0,00" v-model="question.teacher_grade" />
                                <p class="tw-mt-2 tw-text-xs tw-text-red-600" :id="question.pk + '-grade-error'" v-if="question.formValid == 'is-invalid'">
                                  Valor maior que a nota.
                                </p>
                              </div>
                              <div class="tw-flex tw-items-center tw-gap-2">
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Adicionar comentário" id="dropdownMenuClickable" data-toggle="dropdown" data-bs-auto-close="inside" aria-expanded="false">
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M10.75 6.75011C10.75 6.94902 10.671 7.13979 10.5304 7.28044C10.3897 7.42109 10.1989 7.50011 10 7.50011H6.00003C5.80112 7.50011 5.61035 7.42109 5.4697 7.28044C5.32905 7.13979 5.25003 6.94902 5.25003 6.75011C5.25003 6.5512 5.32905 6.36043 5.4697 6.21978C5.61035 6.07913 5.80112 6.00011 6.00003 6.00011H10C10.1989 6.00011 10.3897 6.07913 10.5304 6.21978C10.671 6.36043 10.75 6.5512 10.75 6.75011ZM10 8.50011H6.00003C5.80112 8.50011 5.61035 8.57913 5.4697 8.71978C5.32905 8.86043 5.25003 9.0512 5.25003 9.25011C5.25003 9.44902 5.32905 9.63978 5.4697 9.78044C5.61035 9.92109 5.80112 10.0001 6.00003 10.0001H10C10.1989 10.0001 10.3897 9.92109 10.5304 9.78044C10.671 9.63978 10.75 9.44902 10.75 9.25011C10.75 9.0512 10.671 8.86043 10.5304 8.71978C10.3897 8.57913 10.1989 8.50011 10 8.50011ZM14.75 8.00011C14.7503 9.15633 14.4535 10.2932 13.8882 11.3018C13.3229 12.3104 12.508 13.1569 11.5216 13.7601C10.5351 14.3633 9.41033 14.7031 8.25493 14.7467C7.09952 14.7904 5.95227 14.5365 4.92316 14.0095L2.89628 14.6876C2.67563 14.762 2.4386 14.7732 2.2119 14.7201C1.98519 14.667 1.77783 14.5516 1.61319 14.387C1.44854 14.2223 1.33316 14.0149 1.28004 13.7882C1.22691 13.5615 1.23817 13.3245 1.31253 13.1039L1.98816 11.077C1.52421 10.1682 1.27233 9.16609 1.25145 8.14595C1.23057 7.12582 1.44123 6.11422 1.8676 5.18723C2.29396 4.26023 2.92494 3.44196 3.71308 2.79393C4.50123 2.14591 5.42603 1.68499 6.41795 1.44584C7.40988 1.20669 8.44311 1.19552 9.43997 1.41319C10.4368 1.63085 11.3714 2.07168 12.1733 2.70253C12.9753 3.33337 13.6238 4.13782 14.0701 5.05539C14.5164 5.97296 14.7489 6.97976 14.75 8.00011ZM13.25 8.00011C13.2497 7.19482 13.0642 6.4004 12.7077 5.6783C12.3513 4.9562 11.8335 4.32577 11.1944 3.83579C10.5554 3.3458 9.81216 3.0094 9.02229 2.8526C8.23241 2.6958 7.41706 2.7228 6.63929 2.93152C5.86153 3.14024 5.1422 3.52509 4.53696 4.05628C3.93171 4.58747 3.45678 5.25078 3.1489 5.99488C2.84101 6.73899 2.70843 7.54395 2.76141 8.34749C2.81438 9.15103 3.0515 9.93161 3.45441 10.6289C3.50766 10.7208 3.54077 10.823 3.55155 10.9287C3.56232 11.0344 3.55051 11.1412 3.51691 11.242L2.89628 13.1039L4.75816 12.4832C4.83475 12.4577 4.91493 12.4446 4.99566 12.4445C5.12738 12.4447 5.25672 12.4796 5.37066 12.5457C6.1688 13.0076 7.0745 13.251 7.99662 13.2516C8.91875 13.2522 9.82476 13.0099 10.6235 12.5491C11.4222 12.0884 12.0855 11.4253 12.5466 10.6267C13.0077 9.82816 13.2503 8.92223 13.25 8.00011Z" fill="#94A3B8" />
                                  </svg>
                                </button>
                                <div class="tw-rounded-lg tw-shadow-xl tw-p-4 dropdown-menu" aria-labelledby="dropdownMenuClickable">
                                  <div>
                                    <span class="tw-inline-flex tw-items-center tw-rounded-md tw-bg-yellow-50 tw-px-2 tw-py-1 tw-text-xs tw-font-medium tw-text-yellow-800 tw-ring-1 tw-ring-inset tw-ring-yellow-600/20">
                                      Questão ${index+1}
                                    </span>
                                    <label for="feedback-textarea" class="tw-block tw-text-sm/6 tw-font-medium tw-text-gray-900 tw-mt-1">
                                      Comentário do professor
                                    </label>
                                    <div class="tw-mt-2">
                                      <textarea rows="3" id="feedback-textarea" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" @blur="sendTeacherFeedback(question)" v-model="question.teacher_feedback" placeholder="Deixe um feedback personalizado..."></textarea>
                                    </div>
                                    <p class="tw-text-xs/4.5 tw-text-gray-600 tw-mt-2 tw-mb-0">
                                      O texto será salvo automaticamente ao sair do campo de comentário.
                                    </p>
                                  </div>
                                </div>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Marcar resposta como em branco" v-if="!question.empty" @click="selectedQuestion = question, setEmptyAnswer()">
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A" />
                                  </svg>
                                </button>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50 tooltips" data-tippy-content="Remover nota" v-if="(question.textual_answer || question.file_answer) && question.teacher_grade != null" @click="selectedQuestion = question, setQuestionList(question)">
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M13.5 3H2.5C2.30109 3 2.11032 3.07902 1.96967 3.21967C1.82902 3.36032 1.75 3.55109 1.75 3.75C1.75 3.94891 1.82902 4.13968 1.96967 4.28033C2.11032 4.42098 2.30109 4.5 2.5 4.5H2.75V13C2.75 13.3315 2.8817 13.6495 3.11612 13.8839C3.35054 14.1183 3.66848 14.25 4 14.25H12C12.3315 14.25 12.6495 14.1183 12.8839 13.8839C13.1183 13.6495 13.25 13.3315 13.25 13V4.5H13.5C13.6989 4.5 13.8897 4.42098 14.0303 4.28033C14.171 4.13968 14.25 3.94891 14.25 3.75C14.25 3.55109 14.171 3.36032 14.0303 3.21967C13.8897 3.07902 13.6989 3 13.5 3ZM11.75 12.75H4.25V4.5H11.75V12.75ZM4.75 1.25C4.75 1.05109 4.82902 0.860322 4.96967 0.71967C5.11032 0.579018 5.30109 0.5 5.5 0.5H10.5C10.6989 0.5 10.8897 0.579018 11.0303 0.71967C11.171 0.860322 11.25 1.05109 11.25 1.25C11.25 1.44891 11.171 1.63968 11.0303 1.78033C10.8897 1.92098 10.6989 2 10.5 2H5.5C5.30109 2 5.11032 1.92098 4.96967 1.78033C4.82902 1.63968 4.75 1.44891 4.75 1.25Z" fill="#F04438" />
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </template>
                        </template>
                      </div>
                    </div>
                  </div>
                </template>
                <template v-else>
                  <template v-if="applicationStudent.questions.length">
                    <div class="tw-flex tw-flex-col tw-gap-6">
                      <div class="tw-flex tw-flex-col tw-gap-4">
                        <div class="tw-flex tw-flex-col tw-gap-2">
                          <div class="tw-flex tw-items-center tw-justify-between">
                            <div>
                              <p class="tw-text-sm tw-font-semibold tw-text-slate-950">Respostas</p>
                            </div>
                            <div>
                              <button type="button" class="tw-p-1.5 tw-rounded-full tw-border tw-border-gray-200 hover:tw-bg-gray-50" @click="previousSelectedQuestion ? getEnunciation(previousSelectedQuestion) : ''">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-5" :class="previousSelectedQuestion ? 'tw-text-primary-600' : 'tw-text-gray-300'">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                                </svg>
                              </button>
                              <button type="button" class="tw-p-1.5 tw-rounded-full tw-border tw-border-gray-200 hover:tw-bg-gray-50" @click="nextSelectedQuestion ? getEnunciation(nextSelectedQuestion) : ''">
                                <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-5" :class="nextSelectedQuestion ? 'tw-text-primary-600' : 'tw-text-gray-300'">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                                </svg>
                              </button>
                            </div>
                          </div>
                          <div class="tw-flex tw-gap-1.5 tw-overflow-x-scroll">
                            <div
                              v-for="answer in applicationStudent.questions"
                              class="tw-min-w-10 tw-min-h-10 tw-size-10 tw-flex tw-flex-col tw-items-center tw-justify-center tw-rounded tw-cursor-pointer"
                              :class="getAnswerTwClass(answer, selectedQuestion)"
                              @click="getEnunciation(answer)"
                              :title="answer.annuled ? 'Questão anulada' : (answer.empty || selectedApplicationStudent.empty_option_questions.includes(answer.pk)) ? 'Questão em branco' : ''"
                            >
                              <template v-if="answer.annuled">
                                <span>
                                  <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                    <g clip-path="url(#clip0_5000_10884)">
                                      <path d="M7.89797 4.89797L6.79688 6L7.89938 7.10203C8.00505 7.2077 8.06442 7.35103 8.06442 7.50047C8.06442 7.64991 8.00505 7.79323 7.89938 7.89891C7.7937 8.00458 7.65038 8.06394 7.50094 8.06394C7.3515 8.06394 7.20817 8.00458 7.1025 7.89891L6 6.79688L4.89797 7.89937C4.7923 8.00505 4.64898 8.06441 4.49953 8.06441C4.35009 8.06441 4.20677 8.00505 4.1011 7.89937C3.99542 7.7937 3.93606 7.65038 3.93606 7.50094C3.93606 7.35149 3.99542 7.20817 4.1011 7.1025L5.20313 6L4.10203 4.89797C4.04971 4.84565 4.0082 4.78353 3.97989 4.71516C3.95157 4.6468 3.937 4.57353 3.937 4.49953C3.937 4.35009 3.99636 4.20677 4.10203 4.10109C4.20771 3.99542 4.35103 3.93606 4.50047 3.93606C4.64991 3.93606 4.79324 3.99542 4.89891 4.10109L6 5.20312L7.10203 4.10063C7.20771 3.99495 7.35103 3.93559 7.50047 3.93559C7.64991 3.93559 7.79324 3.99495 7.89891 4.10063C8.00458 4.2063 8.06395 4.34962 8.06395 4.49906C8.06395 4.64851 8.00458 4.79183 7.89891 4.8975L7.89797 4.89797ZM11.0625 6C11.0625 7.00127 10.7656 7.98005 10.2093 8.81257C9.65304 9.6451 8.86239 10.294 7.93734 10.6771C7.01229 11.0603 5.99439 11.1606 5.01236 10.9652C4.03033 10.7699 3.12828 10.2877 2.42027 9.57973C1.71227 8.87173 1.23011 7.96967 1.03478 6.98764C0.839439 6.00562 0.939694 4.98772 1.32286 4.06266C1.70603 3.13761 2.3549 2.34696 3.18743 1.79069C4.01995 1.23441 4.99873 0.9375 6 0.9375C7.3422 0.938989 8.62901 1.47284 9.57809 2.42192C10.5272 3.371 11.061 4.6578 11.0625 6ZM9.9375 6C9.9375 5.22124 9.70657 4.45996 9.27391 3.81244C8.84126 3.16492 8.2263 2.66024 7.50682 2.36222C6.78733 2.0642 5.99563 1.98623 5.23183 2.13816C4.46803 2.29009 3.76644 2.6651 3.21577 3.21577C2.6651 3.76644 2.29009 4.46803 2.13816 5.23183C1.98623 5.99563 2.06421 6.78733 2.36223 7.50682C2.66025 8.2263 3.16493 8.84125 3.81244 9.27391C4.45996 9.70657 5.22124 9.9375 6 9.9375C7.04395 9.93638 8.04482 9.52118 8.783 8.783C9.52118 8.04482 9.93639 7.04395 9.9375 6Z" fill="currentColor" />
                                    </g>
                                    <defs>
                                      <clipPath id="clip0_5000_10884">
                                        <rect width="12" height="12" fill="white"/>
                                      </clipPath>
                                    </defs>
                                  </svg>
                                </span>
                              </template>
                              <template v-else-if="answer.empty || selectedApplicationStudent.empty_option_questions.includes(answer.pk)">
                                <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                  <path d="M9.54555 2.93759L10.1666 2.25415C10.2649 2.14342 10.3155 1.99844 10.3075 1.85064C10.2996 1.70284 10.2337 1.56413 10.1242 1.46458C10.0146 1.36503 9.87026 1.31267 9.72237 1.31885C9.57449 1.32503 9.43499 1.38925 9.33414 1.49759L8.71351 2.18009C7.77933 1.52118 6.63656 1.22636 5.5002 1.35111C4.36385 1.47586 3.31225 2.01157 2.54326 2.85745C1.77427 3.70334 1.3409 4.80108 1.32469 5.94414C1.30848 7.08721 1.71054 8.1968 2.45523 9.06415L1.83414 9.74759C1.78342 9.80207 1.74402 9.86608 1.71822 9.9359C1.69242 10.0057 1.68074 10.08 1.68384 10.1543C1.68695 10.2287 1.70479 10.3017 1.73632 10.3692C1.76786 10.4366 1.81246 10.4971 1.86754 10.5471C1.92263 10.5972 1.98711 10.6358 2.05723 10.6608C2.12736 10.6858 2.20174 10.6965 2.27607 10.6925C2.3504 10.6885 2.4232 10.6698 2.49024 10.6375C2.55728 10.6052 2.61724 10.5598 2.66664 10.5042L3.28726 9.82165C4.22145 10.4806 5.36422 10.7754 6.50058 10.6506C7.63693 10.5259 8.68853 9.99017 9.45752 9.14429C10.2265 8.2984 10.6599 7.20066 10.6761 6.05759C10.6923 4.91453 10.2902 3.80494 9.54555 2.93759ZM2.43789 6.00087C2.43735 5.35862 2.61057 4.72819 2.93921 4.17639C3.26784 3.62459 3.73965 3.17198 4.30461 2.86653C4.86957 2.56108 5.50665 2.41417 6.14833 2.44137C6.79 2.46857 7.41236 2.66886 7.94945 3.02103L3.2193 8.22415C2.71282 7.5939 2.4371 6.8094 2.43789 6.00087ZM6.00039 9.56337C5.30769 9.56403 4.63001 9.36144 4.05133 8.98071L8.78148 3.77759C9.20114 4.30125 9.46424 4.93286 9.54041 5.5996C9.61659 6.26633 9.50275 6.94101 9.21203 7.54584C8.9213 8.15066 8.46553 8.66099 7.89729 9.01796C7.32904 9.37493 6.67146 9.564 6.00039 9.56337Z" fill="currentColor" />
                                </svg>
                              </template>
                              <template v-else-if="(!answer.answer && !answer.textual_answer && !answer.file_answer) && applicationStudent.duplicated_answers.includes(answer.pk || answer.id)">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none">
                                  <path d="M6 15L8 17L12.5 12.5M8 8V5.2C8 4.0799 8 3.51984 8.21799 3.09202C8.40973 2.71569 8.71569 2.40973 9.09202 2.21799C9.51984 2 10.0799 2 11.2 2H18.8C19.9201 2 20.4802 2 20.908 2.21799C21.2843 2.40973 21.5903 2.71569 21.782 3.09202C22 3.51984 22 4.0799 22 5.2V12.8C22 13.9201 22 14.4802 21.782 14.908C21.5903 15.2843 21.2843 15.5903 20.908 15.782C20.4802 16 19.9201 16 18.8 16H16M5.2 22H12.8C13.9201 22 14.4802 22 14.908 21.782C15.2843 21.5903 15.5903 21.2843 15.782 20.908C16 20.4802 16 19.9201 16 18.8V11.2C16 10.0799 16 9.51984 15.782 9.09202C15.5903 8.71569 15.2843 8.40973 14.908 8.21799C14.4802 8 13.9201 8 12.8 8H5.2C4.0799 8 3.51984 8 3.09202 8.21799C2.71569 8.40973 2.40973 8.71569 2.21799 9.09202C2 9.51984 2 10.0799 2 11.2V18.8C2 19.9201 2 20.4802 2.21799 20.908C2.40973 21.2843 2.71569 21.5903 3.09202 21.782C3.51984 22 4.07989 22 5.2 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                              </template>
                              <template v-else>
                                <template v-if="answer.corrected_but_no_answer">
                                  <span>
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                      <path d="M10.688 2.25V9.75C10.688 9.99864 10.5892 10.2371 10.4134 10.4129C10.2376 10.5887 9.99911 10.6875 9.75047 10.6875H6.56297C6.41378 10.6875 6.27071 10.6282 6.16522 10.5227C6.05973 10.4173 6.00047 10.2742 6.00047 10.125C6.00047 9.97582 6.05973 9.83274 6.16522 9.72725C6.27071 9.62176 6.41378 9.5625 6.56297 9.5625H9.56297V2.4375H2.43797V6.5625C2.43797 6.71168 2.3787 6.85476 2.27322 6.96025C2.16773 7.06574 2.02465 7.125 1.87547 7.125C1.72628 7.125 1.58321 7.06574 1.47772 6.96025C1.37223 6.85476 1.31297 6.71168 1.31297 6.5625V2.25C1.31297 2.00136 1.41174 1.7629 1.58756 1.58709C1.76337 1.41127 2.00183 1.3125 2.25047 1.3125H9.75047C9.99911 1.3125 10.2376 1.41127 10.4134 1.58709C10.5892 1.7629 10.688 2.00136 10.688 2.25ZM6.02344 7.10203C5.97118 7.04959 5.90908 7.00798 5.84071 6.97959C5.77234 6.9512 5.69903 6.93659 5.625 6.93659C5.55097 6.93659 5.47766 6.9512 5.40929 6.97959C5.34092 7.00798 5.27882 7.04959 5.22656 7.10203L3.00047 9.32813L2.27344 8.60203C2.22111 8.54971 2.159 8.5082 2.09063 8.47989C2.02227 8.45157 1.949 8.43699 1.875 8.43699C1.801 8.43699 1.72773 8.45157 1.65937 8.47989C1.591 8.5082 1.52889 8.54971 1.47656 8.60203C1.42424 8.65436 1.38273 8.71647 1.35442 8.78484C1.3261 8.8532 1.31152 8.92647 1.31152 9.00047C1.31152 9.07447 1.3261 9.14774 1.35442 9.2161C1.38273 9.28447 1.42424 9.34658 1.47656 9.39891L2.60156 10.5239C2.65382 10.5763 2.71592 10.618 2.78429 10.6463C2.85266 10.6747 2.92597 10.6894 3 10.6894C3.07403 10.6894 3.14734 10.6747 3.21571 10.6463C3.28408 10.618 3.34618 10.5763 3.39844 10.5239L6.02344 7.89891C6.07588 7.84665 6.11748 7.78455 6.14587 7.71618C6.17427 7.64781 6.18888 7.5745 6.18888 7.50047C6.18888 7.42644 6.17427 7.35313 6.14587 7.28476C6.11748 7.21639 6.07588 7.15429 6.02344 7.10203Z" fill="currentColor" />
                                    </svg>
                                  </span>
                                </template>
                                <template v-else>
                                  <span v-if="answer.category === 'Discursiva' && answer.textual_answer">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                      <g clip-path="url(#clip0_7015_2911)">
                                        <path d="M8.431 2.24362L9.2745 1.39962C9.45034 1.22379 9.68883 1.125 9.9375 1.125C10.1862 1.125 10.4247 1.22379 10.6005 1.39962C10.7763 1.57546 10.8751 1.81395 10.8751 2.06262C10.8751 2.3113 10.7763 2.54979 10.6005 2.72562L3.416 9.91012C3.15166 10.1743 2.82568 10.3685 2.4675 10.4751L1.125 10.8751L1.525 9.53262C1.63164 9.17444 1.82582 8.84846 2.09 8.58412L8.4315 2.24362H8.431ZM8.431 2.24362L9.75 3.56262" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
                                      </g>
                                      <defs>
                                        <clipPath id="clip0_7015_2911">
                                          <rect width="12" height="12" fill="white" />
                                        </clipPath>
                                      </defs>
                                    </svg>
                                  </span>
                                  {% if object.group_attachments %}
                                    <span v-if="answer.category === 'Arquivo anexado'">
                                      <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                        <path d="M9.95966 6.39748L6.1131 10.2412C5.58548 10.7687 4.86996 11.0649 4.12393 11.0648C3.3779 11.0646 2.66248 10.7681 2.13505 10.2405C1.60762 9.71291 1.31139 8.99739 1.31152 8.25136C1.31166 7.50533 1.60814 6.78991 2.13576 6.26248L6.73701 1.67389C7.08877 1.32231 7.56579 1.12487 8.06313 1.125C8.30938 1.12507 8.55322 1.17363 8.7807 1.26793C9.00819 1.36223 9.21487 1.50041 9.38896 1.67459C9.56304 1.84876 9.70111 2.05552 9.79529 2.28306C9.88947 2.5106 9.93791 2.75445 9.93784 3.00071C9.93778 3.24697 9.88921 3.4908 9.79491 3.71829C9.70061 3.94577 9.56243 4.15246 9.38826 4.32654L9.38029 4.33404L4.88966 8.65685C4.83641 8.70807 4.7736 8.7483 4.70481 8.77524C4.63602 8.80218 4.56259 8.8153 4.48872 8.81387C4.41486 8.81243 4.342 8.79646 4.2743 8.76686C4.20661 8.73727 4.14541 8.69463 4.09419 8.64139C4.04298 8.58814 4.00275 8.52533 3.97581 8.45653C3.94887 8.38774 3.93574 8.31431 3.93718 8.24045C3.93862 8.16658 3.95459 8.09372 3.98418 8.02603C4.01378 7.95833 4.05641 7.89713 4.10966 7.84592L8.59607 3.52779C8.7363 3.38669 8.81474 3.19566 8.81412 2.99672C8.81351 2.79779 8.73389 2.60724 8.59279 2.46701C8.52292 2.39757 8.44006 2.34258 8.34894 2.30517C8.25782 2.26775 8.16022 2.24865 8.06172 2.24896C7.86278 2.24957 7.67224 2.32919 7.53201 2.47029L2.93076 7.05748C2.6143 7.37406 2.43656 7.80339 2.43665 8.25101C2.4367 8.47266 2.48039 8.69212 2.56525 8.89687C2.65011 9.10163 2.77447 9.28766 2.93122 9.44435C3.08798 9.60105 3.27406 9.72533 3.47885 9.81011C3.68364 9.89489 3.90312 9.9385 4.12476 9.93846C4.57238 9.93837 5.00164 9.76047 5.3181 9.44388L9.16466 5.60014C9.21699 5.54781 9.2791 5.50631 9.34747 5.47799C9.41583 5.44967 9.4891 5.4351 9.5631 5.4351C9.6371 5.4351 9.71037 5.44967 9.77873 5.47799C9.8471 5.50631 9.90921 5.54781 9.96154 5.60014C10.0139 5.65246 10.0554 5.71458 10.0837 5.78294C10.112 5.8513 10.1266 5.92458 10.1266 5.99857C10.1266 6.07257 10.112 6.14584 10.0837 6.21421C10.0554 6.28257 10.0139 6.34469 9.96154 6.39701L9.95966 6.39748Z" fill="currentColor" />
                                      </svg>
                                    </span>
                                  {% else %}
                                    <span v-if="answer.category === 'Arquivo anexado' && answer.file_answer">
                                      <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                        <path d="M9.95966 6.39748L6.1131 10.2412C5.58548 10.7687 4.86996 11.0649 4.12393 11.0648C3.3779 11.0646 2.66248 10.7681 2.13505 10.2405C1.60762 9.71291 1.31139 8.99739 1.31152 8.25136C1.31166 7.50533 1.60814 6.78991 2.13576 6.26248L6.73701 1.67389C7.08877 1.32231 7.56579 1.12487 8.06313 1.125C8.30938 1.12507 8.55322 1.17363 8.7807 1.26793C9.00819 1.36223 9.21487 1.50041 9.38896 1.67459C9.56304 1.84876 9.70111 2.05552 9.79529 2.28306C9.88947 2.5106 9.93791 2.75445 9.93784 3.00071C9.93778 3.24697 9.88921 3.4908 9.79491 3.71829C9.70061 3.94577 9.56243 4.15246 9.38826 4.32654L9.38029 4.33404L4.88966 8.65685C4.83641 8.70807 4.7736 8.7483 4.70481 8.77524C4.63602 8.80218 4.56259 8.8153 4.48872 8.81387C4.41486 8.81243 4.342 8.79646 4.2743 8.76686C4.20661 8.73727 4.14541 8.69463 4.09419 8.64139C4.04298 8.58814 4.00275 8.52533 3.97581 8.45653C3.94887 8.38774 3.93574 8.31431 3.93718 8.24045C3.93862 8.16658 3.95459 8.09372 3.98418 8.02603C4.01378 7.95833 4.05641 7.89713 4.10966 7.84592L8.59607 3.52779C8.7363 3.38669 8.81474 3.19566 8.81412 2.99672C8.81351 2.79779 8.73389 2.60724 8.59279 2.46701C8.52292 2.39757 8.44006 2.34258 8.34894 2.30517C8.25782 2.26775 8.16022 2.24865 8.06172 2.24896C7.86278 2.24957 7.67224 2.32919 7.53201 2.47029L2.93076 7.05748C2.6143 7.37406 2.43656 7.80339 2.43665 8.25101C2.4367 8.47266 2.48039 8.69212 2.56525 8.89687C2.65011 9.10163 2.77447 9.28766 2.93122 9.44435C3.08798 9.60105 3.27406 9.72533 3.47885 9.81011C3.68364 9.89489 3.90312 9.9385 4.12476 9.93846C4.57238 9.93837 5.00164 9.76047 5.3181 9.44388L9.16466 5.60014C9.21699 5.54781 9.2791 5.50631 9.34747 5.47799C9.41583 5.44967 9.4891 5.4351 9.5631 5.4351C9.6371 5.4351 9.71037 5.44967 9.77873 5.47799C9.8471 5.50631 9.90921 5.54781 9.96154 5.60014C10.0139 5.65246 10.0554 5.71458 10.0837 5.78294C10.112 5.8513 10.1266 5.92458 10.1266 5.99857C10.1266 6.07257 10.112 6.14584 10.0837 6.21421C10.0554 6.28257 10.0139 6.34469 9.96154 6.39701L9.95966 6.39748Z" fill="currentColor" />
                                      </svg>
                                    </span>
                                  {% endif %}
                                  <span v-if="answer.category === 'Objetiva'">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                      <g clip-path="url(#clip0_5000_10896)">
                                        <path d="M8.27297 4.47703C8.32541 4.52929 8.36702 4.59139 8.39541 4.65976C8.4238 4.72813 8.43841 4.80144 8.43841 4.87547C8.43841 4.9495 8.4238 5.02281 8.39541 5.09118C8.36702 5.15955 8.32541 5.22165 8.27297 5.27391L5.64797 7.89891C5.59571 7.95135 5.53362 7.99295 5.46524 8.02135C5.39687 8.04974 5.32357 8.06435 5.24953 8.06435C5.1755 8.06435 5.1022 8.04974 5.03382 8.02135C4.96545 7.99295 4.90335 7.95135 4.8511 7.89891L3.7261 6.77391C3.67377 6.72158 3.63227 6.65947 3.60395 6.5911C3.57563 6.52274 3.56106 6.44947 3.56106 6.37547C3.56106 6.30147 3.57563 6.2282 3.60395 6.15984C3.63227 6.09147 3.67377 6.02936 3.7261 5.97703C3.77842 5.92471 3.84054 5.8832 3.9089 5.85489C3.97726 5.82657 4.05054 5.81199 4.12453 5.81199C4.19853 5.81199 4.2718 5.82657 4.34017 5.85489C4.40853 5.8832 4.47065 5.92471 4.52297 5.97703L5.25 6.70312L7.47703 4.47563C7.52937 4.42342 7.59148 4.38204 7.65981 4.35385C7.72815 4.32566 7.80137 4.31122 7.87529 4.31135C7.94922 4.31148 8.02239 4.32618 8.09062 4.35461C8.15886 4.38304 8.22082 4.42464 8.27297 4.47703ZM11.0625 6C11.0625 7.00127 10.7656 7.98005 10.2093 8.81257C9.65304 9.6451 8.86239 10.294 7.93734 10.6771C7.01229 11.0603 5.99439 11.1606 5.01236 10.9652C4.03033 10.7699 3.12828 10.2877 2.42027 9.57973C1.71227 8.87173 1.23011 7.96967 1.03478 6.98764C0.839439 6.00562 0.939694 4.98772 1.32286 4.06266C1.70603 3.13761 2.3549 2.34696 3.18743 1.79069C4.01995 1.23441 4.99873 0.9375 6 0.9375C7.3422 0.938989 8.62901 1.47284 9.57809 2.42192C10.5272 3.371 11.061 4.6578 11.0625 6ZM9.9375 6C9.9375 5.22124 9.70657 4.45996 9.27391 3.81244C8.84126 3.16492 8.2263 2.66024 7.50682 2.36222C6.78733 2.0642 5.99563 1.98623 5.23183 2.13816C4.46803 2.29009 3.76644 2.6651 3.21577 3.21577C2.6651 3.76644 2.29009 4.46803 2.13816 5.23183C1.98623 5.99563 2.06421 6.78733 2.36223 7.50682C2.66025 8.2263 3.16493 8.84125 3.81244 9.27391C4.45996 9.70657 5.22124 9.9375 6 9.9375C7.04395 9.93638 8.04482 9.52118 8.783 8.783C9.52118 8.04482 9.93639 7.04395 9.9375 6Z" fill="currentColor" />
                                      </g>
                                      <defs>
                                        <clipPath id="clip0_5000_10896">
                                          <rect width="12" height="12" fill="white" />
                                        </clipPath>
                                      </defs>
                                    </svg>
                                  </span>
                                  <span v-else-if="answer.category === 'Somatório'">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                      <g clip-path="url(#clip0_5000_10902)">
                                        <path d="M9.57953 2.41869C8.75096 1.58955 7.66052 1.07339 6.49402 0.958146C5.32753 0.842904 4.15716 1.13572 3.18237 1.78669C2.20757 2.43766 1.48867 3.40651 1.14816 4.52814C0.807652 5.64977 0.86661 6.85476 1.31499 7.93779C1.76337 9.02082 2.57342 9.91486 3.60711 10.4676C4.6408 11.0203 5.83416 11.1974 6.98383 10.9689C8.13351 10.7403 9.16835 10.1201 9.91202 9.21407C10.6557 8.30801 11.0622 7.17211 11.0622 5.99994C11.0622 4.65686 10.5289 3.36874 9.57953 2.41869ZM8.24969 9.23431C8.01543 9.39802 7.76393 9.53556 7.49969 9.64447V5.29681L8.24969 4.54681V9.23431ZM3.21531 3.21462C3.8852 2.54578 4.77344 2.14039 5.71764 2.07257C6.66183 2.00474 7.59889 2.27902 8.3575 2.84525L2.84594 8.35915C2.27907 7.60036 2.00441 6.6628 2.07224 5.71808C2.14008 4.77335 2.54585 3.88465 3.21531 3.21462ZM4.49969 8.29681V9.64165C4.19439 9.51608 3.90617 9.35244 3.64188 9.15462L4.49969 8.29681ZM5.62469 9.91962V7.17181L6.37469 6.42181V9.92056C6.12522 9.94392 5.8741 9.94361 5.62469 9.91962ZM9.37469 8.03197V3.96791C9.74307 4.5817 9.93766 5.28408 9.93766 5.99994C9.93766 6.71579 9.74307 7.41818 9.37469 8.03197Z" fill="currentColor" />
                                      </g>
                                      <defs>
                                        <clipPath id="clip0_5000_10902">
                                          <rect width="12" height="12" fill="white" />
                                        </clipPath>
                                      </defs>
                                    </svg>
                                  </span>
                                </template>
                              </template>
                              <!-- <span v-html="getAnswerIcon(answer)"></span> -->
                              <span class="tw-text-xs/4.5 tw-font-semibold">${answer.question_number}</span>
                            </div>
                          </div>
                          <template v-if="!applicationStudent.is_omr">
                            <div class="tw-overflow-x-scroll tw-mt-1">
                              <table class="tw-min-w-full tw-divide-y tw-divide-gray-300">
                                <tbody class="tw-divide-y tw-divide-gray-200">
                                  <tr>
                                    <td class="tw-whitespace-nowrap tw-py-2 tw-pl-4 tw-pr-3 tw-text-xs/4.5 tw-font-medium tw-text-slate-700 sm:tw-pl-0">
                                      <span class="tw-flex tw-items-center tw-justify-between">
                                        <span>
                                          Tempo
                                        </span>
                                        <span>
                                          <a
                                            href="#"
                                            class="tw-ml-2"
                                            :class="[ordering.category === 'duration' ? 'tw-text-primary-600' : 'tw-text-slate-500']"
                                            @click.prevent.default="orderQuestions('duration')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                        </span>
                                      </span>
                                    </td>
                                    <td class="tw-whitespace-nowrap tw-px-3 tw-py-2 tw-text-xs/4.5 tw-text-slate-500" v-for="answer in applicationStudent.questions">
                                      ${answer.duration ? answer.duration.substring(3) : '-'}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td class="tw-whitespace-nowrap tw-py-2 tw-pl-4 tw-pr-3 tw-text-xs/4.5 tw-font-medium tw-text-slate-700 sm:tw-pl-0">
                                      <span class="tw-flex tw-items-center tw-justify-between">
                                        <span>
                                          Alterações
                                        </span>
                                        <span>
                                          <a
                                            href="#"
                                            class="tw-ml-2"
                                            :class="[ordering.category === 'total_answers' ? 'tw-text-primary-600' : 'tw-text-slate-500']"
                                            @click.prevent.default="orderQuestions('total_answers')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                        </span>
                                      </span>
                                    </td>
                                    <td class="tw-whitespace-nowrap tw-px-3 tw-py-2 tw-text-xs/4.5 tw-text-slate-500" v-for="answer in applicationStudent.questions">
                                      ${answer.total_answers || '-'}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td class="tw-whitespace-nowrap tw-py-2 tw-pl-4 tw-pr-3 tw-text-xs/4.5 tw-font-medium tw-text-slate-700 sm:tw-pl-0">
                                      <span class="tw-flex tw-items-center tw-justify-between">
                                        <span>
                                          Última modificação
                                        </span>
                                        <span>
                                          <a
                                            href="#"
                                            class="tw-ml-2"
                                            :class="[ordering.category === 'last_modified' ? 'tw-text-primary-600' : 'tw-text-slate-500']"
                                            @click.prevent.default="orderQuestions('last_modified')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                        </span>
                                      </span>
                                    </td>
                                    <td class="tw-whitespace-nowrap tw-px-3 tw-py-2 tw-text-xs/4.5 tw-text-slate-500" v-for="answer in applicationStudent.questions">
                                      <template v-if="answer.last_modified">${moment(answer.last_modified).format('HH:mm')}</template>
                                      <template v-else>-</template>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <!-- <div class="tw-mt-2 tw-flow-root">
                              <div class="tw--mx-4 tw--my-2 tw-overflow-x-auto sm:tw--mx-6 lg:tw--mx-8">
                                <div class="tw-inline-block tw-min-w-full tw-py-2 tw-align-middle sm:tw-px-6 lg:tw-px-8">
                                  <table class="tw-min-w-full tw-divide-y tw-divide-gray-300">
                                    <tbody class="tw-divide-y tw-divide-gray-200">
                                      <tr>
                                        <td class="tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-sm tw-font-medium tw-text-gray-900 sm:tw-pl-0">
                                          <a
                                            href="#"
                                            class="ml-2 float-right"
                                            :class="[ordering.category === 'duration' ? 'text-primary' : 'text-secondary']"
                                            @click.prevent.default="orderQuestions('duration')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                          Tempo
                                        </td>
                                        <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-text-gray-500" v-for="answer in applicationStudent.questions">
                                          ${answer.duration ? answer.duration.substring(3) : ''}
                                        </td>
                                      </tr>
                                      <tr>
                                        <td class="tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-sm tw-font-medium tw-text-gray-900 sm:tw-pl-0">
                                          <a
                                            href="#"
                                            class="ml-2 float-right"
                                            :class="[ordering.category === 'total_answers' ? 'text-primary' : 'text-secondary']"
                                            @click.prevent.default="orderQuestions('total_answers')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                          Alterações
                                        </td>
                                        <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-text-gray-500" v-for="answer in applicationStudent.questions">
                                          ${answer.total_answers || '-'}
                                        </td>
                                      </tr>
                                      <tr>
                                        <td class="tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-sm tw-font-medium tw-text-gray-900 sm:tw-pl-0">
                                          <a
                                            href="#"
                                            class="ml-2 float-right"
                                            :class="[ordering.category === 'last_modified' ? 'text-primary' : 'text-secondary']"
                                            @click.prevent.default="orderQuestions('last_modified')"
                                          >
                                            <i class="fas fa-sort fa-rotate-90"></i>
                                          </a>
                                          Última modificação
                                        </td>
                                        <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-text-gray-500" v-for="answer in applicationStudent.questions">
                                          <template v-if="answer.last_modified">${moment(answer.last_modified).format('HH:mm')}</template>
                                          <template v-else>-</template>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div> -->

                            <!-- <div>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>
                                      <a
                                        href="#"
                                        class="ml-2 float-right"
                                        :class="[ordering.category === 'duration' ? 'text-primary' : 'text-secondary']"
                                        @click.prevent.default="orderQuestions('duration')"
                                      >
                                        <i class="fas fa-sort fa-rotate-90"></i>
                                      </a>
                                      Tempo
                                    </td>
                                    <td v-for="answer in applicationStudent.questions" class="text-center">
                                      ${answer.duration ? answer.duration.substring(3) : ''}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <a
                                        href="#"
                                        class="ml-2 float-right"
                                        :class="[ordering.category === 'total_answers' ? 'text-primary' : 'text-secondary']"
                                        @click.prevent.default="orderQuestions('total_answers')"
                                      >
                                        <i class="fas fa-sort fa-rotate-90"></i>
                                      </a>
                                      Alterações
                                    </td>
                                    <td v-for="answer in applicationStudent.questions" class="text-center">
                                      ${answer.total_answers || '-'}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <a
                                        href="#"
                                        class="ml-2 float-right"
                                        :class="[ordering.category === 'last_modified' ? 'text-primary' : 'text-secondary']"
                                        @click.prevent.default="orderQuestions('last_modified')"
                                      >
                                        <i class="fas fa-sort fa-rotate-90"></i>
                                      </a>
                                      Última modificação
                                    </td>
                                    <td v-for="answer in applicationStudent.questions" class="text-center">
                                      <template v-if="answer.last_modified">
                                        ${moment(answer.last_modified).format('HH:mm')}
                                      </template>
                                      <template v-else>
                                        -
                                      </template>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div> -->
                          </template>
                        </div>
                        <div class="tw-flex tw-flex-col tw-gap-2" v-show="selectedQuestion">
                          <template v-if="(!selectedQuestion.answer && !selectedQuestion.textual_answer && !selectedQuestion.file_answer) && applicationStudent.duplicated_answers.includes(selectedQuestion.pk || selectedQuestion.id)">
                            <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3 tw-mb-1">
                              <div class="tw-flex tw-items-center">
                                <div class="tw-shrink-0">
                                  <svg class="tw-size-5 tw-text-honey-800" viewBox="0 0 24 24" fill="none">
                                    <path d="M6 15L8 17L12.5 12.5M8 8V5.2C8 4.0799 8 3.51984 8.21799 3.09202C8.40973 2.71569 8.71569 2.40973 9.09202 2.21799C9.51984 2 10.0799 2 11.2 2H18.8C19.9201 2 20.4802 2 20.908 2.21799C21.2843 2.40973 21.5903 2.71569 21.782 3.09202C22 3.51984 22 4.0799 22 5.2V12.8C22 13.9201 22 14.4802 21.782 14.908C21.5903 15.2843 21.2843 15.5903 20.908 15.782C20.4802 16 19.9201 16 18.8 16H16M5.2 22H12.8C13.9201 22 14.4802 22 14.908 21.782C15.2843 21.5903 15.5903 21.2843 15.782 20.908C16 20.4802 16 19.9201 16 18.8V11.2C16 10.0799 16 9.51984 15.782 9.09202C15.5903 8.71569 15.2843 8.40973 14.908 8.21799C14.4802 8 13.9201 8 12.8 8H5.2C4.0799 8 3.51984 8 3.09202 8.21799C2.71569 8.40973 2.40973 8.71569 2.21799 9.09202C2 9.51984 2 10.0799 2 11.2V18.8C2 19.9201 2 20.4802 2.21799 20.908C2.40973 21.2843 2.71569 21.5903 3.09202 21.782C3.51984 22 4.07989 22 5.2 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                  </svg>
                                </div>
                                <div class="tw-ml-3">
                                  <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                    <p class="tw-mb-0">
                                      Possível <span class="tw-font-bold">marcação dupla</span> ou <span class="tw-font-bold">resposta em branco</span> na última folha enviada.
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </template>
                          <div class="tw-flex tw-items-center tw-gap-2">
                            <p class="tw-text-sm tw-font-semibold tw-text-orange-400">
                              Questão ${selectedQuestion.order}
                            </p>
                            <span class="tw-bg-gray-50 tw-rounded tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-px-3 tw-py-1">Valor da questão: <span class="tw-text-gray-700">${selectedQuestion.question_weight}</span></span>
                          </div>
                          <template v-if="applicationStudent.is_abstract">
                            Gabarito Avulso: <strong>${applicationStudent.exam_name}</strong> - Questão: <strong>${selectedQuestion.order}</strong>
                          </template>
                          <template v-else>
                            <div
                              id="collapseEnunciation"
                              class="tw-text-xs/4.5 tw-font-semibold tw-text-gray-800"
                              :class="expandedEnunciation ? '' : 'tw-max-h-12'"
                              v-html="selectedQuestion.enunciation"
                              style="transition: height 200ms; overflow: auto;"
                            ></div>
                            <div class="tw-mt-4">
                              <button type="button" :aria-expanded="expandedEnunciation" aria-controls="collapseEnunciation" class="tw-inline-flex tw-items-center tw-gap-1 tw-text-xs/4.5 tw-font-semibold tw-text-slate-500 tw-bg-white tw-ring-1 tw-ring-slate-200 tw-rounded-lg tw-px-4 tw-py-1 hover:tw-bg-gray-50" @click="expandedEnunciation = !expandedEnunciation">
                                Detalhes da questão
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="tw-transform tw-transition-transform tw-duration-300" :class="expandedEnunciation ? 'tw-rotate-180' : ''">
                                  <path d="M13.5306 6.53122L8.5306 11.5312C8.46092 11.6011 8.37813 11.6566 8.28696 11.6945C8.1958 11.7323 8.09806 11.7518 7.99935 11.7518C7.90064 11.7518 7.8029 11.7323 7.71173 11.6945C7.62057 11.6566 7.53778 11.6011 7.4681 11.5312L2.4681 6.53122C2.3272 6.39033 2.24805 6.19923 2.24805 5.99997C2.24805 5.80072 2.3272 5.60962 2.4681 5.46872C2.60899 5.32783 2.80009 5.24867 2.99935 5.24867C3.19861 5.24867 3.3897 5.32783 3.5306 5.46872L7.99997 9.9381L12.4693 5.4681C12.6102 5.3272 12.8013 5.24805 13.0006 5.24805C13.1999 5.24805 13.391 5.3272 13.5318 5.4681C13.6727 5.60899 13.7519 5.80009 13.7519 5.99935C13.7519 6.19861 13.6727 6.3897 13.5318 6.5306L13.5306 6.53122Z" fill="#CBD5E1" />
                                </svg>
                              </button>
                            </div>
                          </template>
                          <template v-if="selectedQuestion.answer_created_by_id && selectedQuestion.answer_created_by_id !== applicationStudent.user_pk">
                            <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3 tw-mt-4">
                              <div class="tw-flex tw-items-center">
                                <div class="tw-shrink-0">
                                  <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                                  </svg>
                                </div>
                                <div class="tw-ml-3">
                                  <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                    <p class="tw-mb-0">
                                      Resposta alterada manualmente por <span class="tw-font-bold">${selectedQuestion.answer_created_by_name}</span> em <span class="tw-font-bold">${moment(selectedQuestion.answer_created_at).format('LLL')}</span>.
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </template>
                        </div>
                      </div>
                      <div class="tw-flex tw-items-center tw-justify-between">
                        <div>
                          <span class="tw-isolate tw-inline-flex tw-rounded-lg">
                            <button
                              type="button"
                              class="tw-relative tw-inline-flex tw-items-center tw-rounded-l-lg tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                              :class="currentAnswerTab === 'student-answer' ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                              @click="currentAnswerTab = 'student-answer'"
                            >
                              Resposta do aluno
                            </button>
                            <button
                              type="button"
                              class="tw-relative tw-inline-flex tw-items-center tw-rounded-r-lg tw-px-4 tw-py-1.5 tw-text-sm tw-ring-inset tw-ring-gray-200 focus:tw-z-10"
                              :class="currentAnswerTab === 'commented-answer' ? 'tw-bg-white tw-font-semibold tw-text-slate-950 tw-ring-1 hover:tw-bg-gray-50' : 'tw-bg-slate-50 tw-text-slate-500 hover:tw-bg-slate-100'"
                              @click="currentAnswerTab = 'commented-answer'"
                            >
                              Resposta comentada
                            </button>
                          </span>
                        </div>
                        <div>
                          <template v-if="selectedQuestion.file_answer && selectedQuestion.file_answer_url && checkAnswerType(selectedQuestion.file_answer_url)">
                            <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" @click="showAnnotorious()">
                              Anotar na resposta
                              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <g clip-path="url(#clip0_3677_8184)">
                                  <path d="M15.8059 9.5C15.7228 9.40812 14.3215 7.88437 12.0428 6.95687C11.9084 5.81437 11.474 4.77562 10.7865 3.975C9.81964 2.845 8.42401 2.25 6.74964 2.25C3.40214 2.25 1.23026 5.23688 1.13964 5.36375C1.02361 5.52561 0.976627 5.72694 1.00904 5.92345C1.04144 6.11995 1.15059 6.29553 1.31245 6.41156C1.47432 6.52759 1.67564 6.57457 1.87215 6.54217C2.06865 6.50976 2.24423 6.40061 2.36026 6.23875C2.37776 6.21125 4.16526 3.75 6.74964 3.75C7.99026 3.75 8.96526 4.15313 9.64839 4.94875C10.015 5.38496 10.2797 5.89738 10.4234 6.44875C9.80363 6.31611 9.17156 6.24948 8.53776 6.25C6.85026 6.25 5.42589 6.69562 4.42214 7.53937C3.51839 8.29937 2.99964 9.36125 2.99964 10.4531C2.99964 12.0912 4.21464 13.75 6.53776 13.75C9.78339 13.75 11.684 11.2325 12.0296 8.59813C13.0183 9.07888 13.9189 9.7229 14.6934 10.5031C14.7575 10.5822 14.8371 10.6473 14.9272 10.6946C15.0173 10.7419 15.1161 10.7704 15.2176 10.7783C15.319 10.7862 15.421 10.7733 15.5174 10.7405C15.6137 10.7077 15.7024 10.6557 15.778 10.5875C15.8536 10.5194 15.9145 10.4366 15.9571 10.3441C15.9996 10.2516 16.0229 10.1515 16.0255 10.0498C16.0281 9.94801 16.01 9.8468 15.9722 9.75229C15.9345 9.65778 15.8779 9.57194 15.8059 9.5ZM9.52276 10.8588C9.00526 11.4938 8.06776 12.25 6.53776 12.25C5.12964 12.25 4.49964 11.3475 4.49964 10.4531C4.49964 9.15125 5.76339 7.75 8.53776 7.75C9.22782 7.75183 9.91431 7.84899 10.5778 8.03875C10.5146 9.09 10.1378 10.1038 9.52276 10.8588Z" fill="#FD853A" />
                                </g>
                                <defs>
                                  <clipPath id="clip0_3677_8184">
                                    <rect width="16" height="16" fill="white" />
                                  </clipPath>
                                </defs>
                              </svg>
                            </button>
                          </template>
                        </div>
                      </div>

                      <div v-if="currentAnswerTab === 'student-answer'" class="tw-flex tw-flex-col tw-gap-4 tw--mt-2">

                        <template v-if="selectedApplicationStudent.can_be_corrected">
                          <template v-if="selectedQuestion.category === 'Objetiva'">
                            <!-- <table class="w-100 mt-2">
                              <tr v-for="alternative in selectedQuestion.alternatives">
                                <td class="form-check" v-if="alternative" :class="getOptionClass(alternative, selectedQuestion.answer)">
                                  <div class="custom-control custom-radio my-2">
                                    <input name="alternativa" v-model="alternativeUpdate" class="custom-control-input cp" type="radio" :checked="alternative.id == selectedQuestion.answer" :value="alternative.id" :id="alternative.id" />
                                    <label class="custom-control-label remove-p-margin cp" :for="alternative.id" v-html="alternative.text"></label>
                                  </div>
                                </td>
                              </tr>
                            </table> -->
                            <div class="tw-flex tw-flex-col tw-gap-4">
                              <div
                                v-for="(alternative, index) in selectedQuestion.alternatives"
                                class="tw-rounded-lg tw-border tw-border-gray-200 tw-p-4"
                                :class="getOptionClass(alternative, selectedQuestion.answer)"
                              >
                                <div class="custom-control custom-radio">
                                  <input
                                    type="radio"
                                    :id="alternative.id"
                                    name="alternativa"
                                    class="custom-control-input"
                                    :checked="alternative.id === selectedQuestion.answer"
                                    :value="alternative.id"
                                    v-model="alternativeUpdate"
                                  />
                                  <label class="custom-control-label remove-p-margin tw-flex tw-items-center tw-gap-4 tw-pb-0" :for="alternative.id">
                                    <span
                                      class="tw-text-2xl tw-font-semibold tw-ml-4"
                                      :class="[alternative.is_correct ? 'tw-text-mint-900' : (alternative.id === selectedQuestion.answer && !alternative.is_correct) ? 'tw-text-poppy-800' : 'tw-text-slate-400']"
                                    >
                                      ${getAlternativeLetter(index)}
                                    </span>
                                    <span
                                      class="tw-text-sm"
                                      :class="[alternative.is_correct ? 'tw-text-mint-900' : 'tw-text-slate-600']"
                                      v-html="alternative.text"
                                    >
                                    </span>
                                  </label>
                                </div>
                              </div>
                            </div>
                            <template v-if="selectedApplicationStudent.empty_option_questions.includes(selectedQuestion.pk)">
                              <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3 tw-mt-4">
                                <div class="tw-flex tw-items-center">
                                  <div class="tw-shrink-0">
                                    <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                                    </svg>
                                  </div>
                                  <div class="tw-ml-3">
                                    <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                      <p class="tw-mb-0">
                                        A resposta foi marcada como <span class="tw-font-bold">"Em branco"</span>.
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </template>



                            <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                              <div class="tw-border-y tw-border-slate-200 tw-py-4">
                                <p class="tw-text-xs/4.5 tw-font-medium tw-text-slate-500 tw-mb-0">Nota</p>
                                <div class="tw-flex tw-items-center tw-gap-1.5">
                                  <template v-if="selectedQuestion.category === 'Somatório'">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Em branco
                                      </span>
                                    </template>
                                  </template>
                                  <template v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Em branco
                                      </span>
                                    </template>
                                  </template>
                                  <template v-else>
                                    <template v-if="selectedQuestion.teacher_grade">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${selectedQuestion.teacher_grade}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Não corrigida
                                      </span>
                                    </template>
                                  </template>
                                </div>

                                <!-- <span class="font-weight-bold">Nota do aluno na questão:</span>
                                <span class="badge badge-info" v-if="selectedQuestion.category === 'Somatório'">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                  </template>
                                  <template v-else>
                                    Em branco
                                  </template>
                                </span>
                                <span class="badge badge-info" v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                  </template>
                                  <template v-else>
                                    Em branco
                                  </template>
                                </span>
                                <span class="badge badge-info" v-else>
                                  ${selectedQuestion.teacher_grade || 'Não corrigida'}
                                </span> -->
                              </div>
                            </template>



                            <div class="tw-flex tw-items-center tw-justify-between tw-mt-2">
                              <div class="tw-flex tw-items-center tw-gap-2">
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" v-if="selectedQuestion.option_answer" title="Apagar resposta" @click="removeGradeAlert(isOption = true)">
                                  Apagar resposta
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M13.5 3H2.5C2.30109 3 2.11032 3.07902 1.96967 3.21967C1.82902 3.36032 1.75 3.55109 1.75 3.75C1.75 3.94891 1.82902 4.13968 1.96967 4.28033C2.11032 4.42098 2.30109 4.5 2.5 4.5H2.75V13C2.75 13.3315 2.8817 13.6495 3.11612 13.8839C3.35054 14.1183 3.66848 14.25 4 14.25H12C12.3315 14.25 12.6495 14.1183 12.8839 13.8839C13.1183 13.6495 13.25 13.3315 13.25 13V4.5H13.5C13.6989 4.5 13.8897 4.42098 14.0303 4.28033C14.171 4.13968 14.25 3.94891 14.25 3.75C14.25 3.55109 14.171 3.36032 14.0303 3.21967C13.8897 3.07902 13.6989 3 13.5 3ZM11.75 12.75H4.25V4.5H11.75V12.75ZM4.75 1.25C4.75 1.05109 4.82902 0.860322 4.96967 0.71967C5.11032 0.579018 5.30109 0.5 5.5 0.5H10.5C10.6989 0.5 10.8897 0.579018 11.0303 0.71967C11.171 0.860322 11.25 1.05109 11.25 1.25C11.25 1.44891 11.171 1.63968 11.0303 1.78033C10.8897 1.92098 10.6989 2 10.5 2H5.5C5.30109 2 5.11032 1.92098 4.96967 1.78033C4.82902 1.63968 4.75 1.44891 4.75 1.25Z" fill="#F04438"/>
                                  </svg>
                                </button>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" v-if="!selectedApplicationStudent.empty_option_questions.includes(selectedQuestion.pk)" title="Marcar resposta como em branco" @click="setEmptyAnswer()">
                                  Em branco
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A"/>
                                  </svg>
                                </button>
                              </div>
                              <div>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-white tw-whitespace-nowrap hover:tw-bg-primary-950/2" :class="alternativeUpdate === selectedQuestion.answer ? 'tw-bg-primary-400' : 'tw-bg-primary-600'" @click="updateChoiceAnswer(alternativeUpdate, selectedQuestion, true)" :disabled="alternativeUpdate === selectedQuestion.answer">
                                  Salvar
                                </button>
                              </div>
                            </div>
                          </template>
                          <template v-if="selectedQuestion.category === 'Somatório'">
                            <div>
                              <fieldset>
                                <legend class="tw-sr-only">Itens</legend>
                                <div class="tw-flex tw-flex-col tw-gap-4">
                                  <div class="tw-flex tw-items-center tw-gap-4 tw-rounded-lg tw-border tw-border-gray-200 tw-p-4" v-for="(alternative, index) in selectedQuestion.alternatives" :class="getOptionClass(alternative, selectedQuestion.answer)">
                                    <div class="tw-flex tw-h-6 tw-shrink-0 tw-items-center">
                                      <div class="tw-group tw-grid tw-size-4 tw-grid-cols-1">
                                        <input :id="alternative.id" type="checkbox" :value="alternative.id" :checked="selectedQuestion.sum_question_checked_answers.includes(alternative.id)" disabled class="tw-col-start-1 tw-row-start-1 tw-appearance-none tw-rounded tw-border tw-border-gray-300 tw-bg-white checked:tw-border-mint-600 checked:tw-bg-mint-600 indeterminate:tw-border-mint-600 indeterminate:tw-bg-mint-600 focus-visible:tw-outline focus-visible:tw-outline-2 focus-visible:tw-outline-offset-2 focus-visible:tw-outline-mint-600 disabled:tw-border-gray-300 disabled:tw-bg-gray-100 disabled:checked:tw-bg-gray-100 forced-colors:tw-appearance-auto" />
                                        <svg class="tw-pointer-events-none tw-col-start-1 tw-row-start-1 tw-size-3.5 tw-self-center tw-justify-self-center tw-stroke-white group-has-[:disabled]:tw-stroke-gray-950/25" viewBox="0 0 14 14" fill="none">
                                          <path class="tw-opacity-0 group-has-[:checked]:tw-opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                          <path class="tw-opacity-0 group-has-[:indeterminate]:tw-opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                      </div>
                                    </div>
                                    <div class="tw-text-sm/6">
                                      <label class="remove-p-margin tw-flex tw-items-center tw-gap-4" :for="alternative.id">
                                        <span class="tw-text-2xl tw-font-semibold tw-text-slate-400">
                                          ${2**index}
                                        </span>
                                        <span class="tw-text-sm tw-text-slate-600" v-html="alternative.text"></span>
                                      </label>
                                    </div>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                            <template v-if="false && selectedApplicationStudent.empty_option_questions.includes(selectedQuestion.pk)">
                              <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3 tw-mt-4">
                                <div class="tw-flex tw-items-center">
                                  <div class="tw-shrink-0">
                                    <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                                    </svg>
                                  </div>
                                  <div class="tw-ml-3">
                                    <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                      <p class="tw-mb-0">
                                        A resposta foi marcada como <span class="tw-font-bold">"Em branco"</span>.
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </template>
                            <div>
                              <label for="sumValue" class="tw-block tw-text-sm/6 tw-font-medium tw-text-gray-900">
                                Valor informado na resposta do aluno
                              </label>
                              <div class="mt-2">
                                <input type="number" id="sumValue" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" placeholder="Digite o valor do somatório" v-model="selectedQuestion.sum_question_sum_value" @keyup="$forceUpdate()" />
                              </div>
                              <p class="tw-mt-2 tw-text-sm tw-text-gray-500" id="sumValue-description">
                                Você pode ajustar o valor informado pelo aluno, caso identifique algum erro na resposta.
                              </p>
                            </div>
                            <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                              <div class="tw-border-y tw-border-slate-200 tw-py-4">
                                <p class="tw-text-xs/4.5 tw-font-medium tw-text-slate-500 tw-mb-0">Nota</p>
                                <div class="tw-flex tw-items-center tw-gap-1.5">
                                  <template v-if="selectedQuestion.category === 'Somatório'">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Em branco
                                      </span>
                                    </template>
                                  </template>
                                  <template v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Em branco
                                      </span>
                                    </template>
                                  </template>
                                  <template v-else>
                                    <template v-if="selectedQuestion.teacher_grade">
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        ${selectedQuestion.teacher_grade}
                                      </span>
                                      <span class="tw-text-sm tw-text-slate-400">
                                        de ${selectedQuestion.question_weight}
                                      </span>
                                    </template>
                                    <template v-else>
                                      <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                        Não corrigida
                                      </span>
                                    </template>
                                  </template>
                                </div>

                                <!-- <span class="font-weight-bold">Nota do aluno na questão:</span>
                                <span class="badge badge-info" v-if="selectedQuestion.category === 'Somatório'">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                  </template>
                                  <template v-else>
                                    Em branco
                                  </template>
                                </span>
                                <span class="badge badge-info" v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                  </template>
                                  <template v-else>
                                    Em branco
                                  </template>
                                </span>
                                <span class="badge badge-info" v-else>
                                  ${selectedQuestion.teacher_grade || 'Não corrigida'}
                                </span> -->
                              </div>
                            </template>

                            <div class="tw-flex tw-items-center tw-justify-between tw-mt-2">
                              <div class="tw-flex tw-items-center tw-gap-2">
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" v-if="!selectedApplicationStudent.empty_option_questions.includes(selectedQuestion.pk)" title="Marcar resposta como em branco" @click="setEmptyAnswer()">
                                  Em branco
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A"/>
                                  </svg>
                                </button>
                              </div>
                              <div>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-white tw-whitespace-nowrap hover:tw-bg-primary-950/2" :class="selectedQuestion.sum_question_sum_value < 1 ? 'tw-bg-primary-400' : 'tw-bg-primary-600'" @click="updateSumQuestionAnswer(selectedQuestion.sum_question_sum_value, selectedQuestion, true)" :disabled="selectedQuestion.sum_question_sum_value < 1">
                                  Salvar
                                </button>
                              </div>
                            </div>

                          </template>
                        </template>
                        <template v-else-if="selectedQuestion.category !== 'Arquivo anexado'">
                          <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                            <div class="tw-border-y tw-border-slate-200 tw-py-4">
                              <p class="tw-text-xs/4.5 tw-font-medium tw-text-slate-500 tw-mb-0">Nota</p>
                              <div class="tw-flex tw-items-center tw-gap-1.5">
                                <template v-if="selectedQuestion.category === 'Somatório'">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                    </span>
                                    <span class="tw-text-sm tw-text-slate-400">
                                      de ${selectedQuestion.question_weight}
                                    </span>
                                  </template>
                                  <template v-else>
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      Em branco
                                    </span>
                                  </template>
                                </template>
                                <template v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                  <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                    </span>
                                    <span class="tw-text-sm tw-text-slate-400">
                                      de ${selectedQuestion.question_weight}
                                    </span>
                                  </template>
                                  <template v-else>
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      Em branco
                                    </span>
                                  </template>
                                </template>
                                <template v-else>
                                  <template v-if="selectedQuestion.teacher_grade">
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      ${selectedQuestion.teacher_grade}
                                    </span>
                                    <span class="tw-text-sm tw-text-slate-400">
                                      de ${selectedQuestion.question_weight}
                                    </span>
                                  </template>
                                  <template v-else>
                                    <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                      Não corrigida
                                    </span>
                                  </template>
                                </template>
                              </div>

                              <!-- <span class="font-weight-bold">Nota do aluno na questão:</span>
                              <span class="badge badge-info" v-if="selectedQuestion.category === 'Somatório'">
                                <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                  ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                </template>
                                <template v-else>
                                  Em branco
                                </template>
                              </span>
                              <span class="badge badge-info" v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                  ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                </template>
                                <template v-else>
                                  Em branco
                                </template>
                              </span>
                              <span class="badge badge-info" v-else>
                                ${selectedQuestion.teacher_grade || 'Não corrigida'}
                              </span> -->
                            </div>
                          </template>
                        </template>
                        <template v-if="selectedQuestion.category === 'Arquivo anexado'">
                          {% if object.group_attachments %}
                            <div class="row row-xs" v-if="getAttachmentsExamTeacherSubject(selectedQuestion.exam_teacher_subject)">
                              <div class="col-sm-12 col-lg-6 col-xl-6 p-1" v-for="(attachment, index) in getAttachmentsExamTeacherSubject(selectedQuestion.exam_teacher_subject).attachments">
                                <div class="card">
                                  <div class="card-body py-2 d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                      <i class="fas fa-file fa-2x text-primary"></i>
                                      <h6 class="ml-1 mb-0">
                                        <a :href="attachment.file" target="_blank" class="link-02">Anexo ${index + 1}</a>
                                      </h6>
                                    </div>
                                    <div>
                                      <template v-if="checkAnswerType(attachment.file)">
                                        <a href="javascript:void(0)" class="btn btn-xs btn-primary" data-animation="effect-scale" @click="showAnnotorious(false, false, attachment.file)">
                                          <i class="fas fa-image"></i>
                                        </a>
                                      </template>
                                      <template v-else>
                                        <a :href="attachment.file" target="_blank" class="btn btn-xs btn-primary">
                                          <i class="fas fa-download"></i>
                                        </a>
                                      </template>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <span class="text-danger" v-if="selectedQuestion && !getAttachmentsExamTeacherSubject(selectedQuestion.exam_teacher_subject).attachments.length">O aluno não enviou arquivo</span>
                            </div>
                          {% else %}
                            <template v-if="selectedQuestion.corrected_but_no_answer">
                              <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3">
                                <div class="tw-flex tw-items-center">
                                  <div class="tw-shrink-0">
                                    <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                                    </svg>
                                  </div>
                                  <div class="tw-ml-3">
                                    <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                      <p class="tw-mb-0">A questão foi corrigida, mas a resposta do aluno não foi detectada automaticamente. Verifique na imagem do cartão ao lado.</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </template>
                            <template v-else>
                              <div class="d-flex justify-content-center">
                                <template v-if="selectedQuestion.file_answer && selectedQuestion.file_answer_url">
                                  <div class="d-flex flex-column justify-content-center">
                                    <img @click="checkAnswerType(selectedQuestion.file_answer_url) ? showAnnotorious():''" :src="checkAnswerType(selectedQuestion.file_answer_url) ? selectedQuestion.file_answer_url:''" class="img-fluid cp" style="max-height: 300px;">
                                    <a v-if="!checkAnswerType(selectedQuestion.file_answer_url)" :href="!checkAnswerType(selectedQuestion.file_answer_url) ? selectedQuestion.file_answer_url: 'javascript:void(0)'" :target="!checkAnswerType(selectedQuestion.file_answer_url) ? '_blank':''" class="btn btn-primary btn-sm mt-2" data-animation="effect-scale">
                                      <i class="fas fa-image" v-if="checkAnswerType(selectedQuestion.file_answer_url)"></i>
                                      Baixar arquivo enviado
                                    </a>
                                  </div>
                                </template>
                                <template v-else>
                                  <span class="text-danger">Resposta não detectada automaticamente. Verifique o cartão reposta ao lado para atribuir nota.</span>
                                </template>
                              </div>
                            </template>
                          {% endif %}
                        </template>

                        <template v-if="selectedQuestion.category === 'Discursiva'">
                          <template v-if="selectedQuestion.empty">
                            <div class="tw-rounded-lg tw-bg-honey-100 tw-px-4 tw-py-3 tw-mt-4">
                              <div class="tw-flex tw-items-center">
                                <div class="tw-shrink-0">
                                  <svg class="tw-size-5 tw-text-honey-800" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                                  </svg>
                                </div>
                                <div class="tw-ml-3">
                                  <div class="tw-text-xs/4.5 tw-font-medium tw-text-honey-800">
                                    <p class="tw-mb-0">
                                      A resposta foi marcada como <span class="tw-font-bold">"Em branco"</span>.
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </template>
                          <span class="font-weight-bold">Resposta do aluno:</span>
                          <p v-if="selectedQuestion.textual_answer">${selectedQuestion.textual_answer_content}</p>
                          <p class="text-danger" v-else>Sem resposta</p>
                        </template>

                        <template v-if="selectedQuestion.category === 'Discursiva' || selectedQuestion.category === 'Arquivo anexado'">
                          <template v-if="selectedApplicationStudent.can_be_corrected && selectedQuestion.suggestions.length > 0">
                            <div>
                              <div class="tw-rounded-lg tw-bg-orange-50 tw-border tw-border-orange-300 tw-p-6">
                                <div class="tw-flex tw-items-center">
                                  <div class="tw-shrink-0">
                                    <svg class="tw-size-4 tw-text-orange-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                                    </svg>
                                  </div>
                                  <div class="tw-ml-1">
                                    <h3 class="tw-text-xs/4.5 tw-text-orange-800">
                                      Sugestões da <span class="tw-font-semibold">Lize AI</span>
                                    </h3>
                                  </div>
                                </div>
                                <div class="tw-divide-y tw-divide-orange-200 tw-mt-2">
                                  <div class="tw-flex tw-items-center tw-justify-between tw-gap-2 tw-py-3">
                                    <div class="tw-flex tw-items-center tw-gap-2">
                                      <p class="tw-text-xs/4.5 tw-text-orange-800 tw-font-semibold tw-mb-0">
                                        Nota da IA
                                      </p>
                                      <span class="tw-bg-orange-100 tw-rounded tw-text-xs/4.5 tw-text-orange-800 tw-py-1 tw-px-4">
                                        <!-- <span class="tw-font-bold">0.67</span> de 0.67 -->
                                        <span class="tw-font-bold">
                                          ${selectedQuestion.suggestions[0].grade * 100}%
                                        </span>
                                      </span>
                                    </div>
                                    <div>
                                      <button type="button" class="tw-flex tw-items-center tw-gap-1.5 tw-rounded-lg tw-text-orange-600 tw-border tw-border-orange-600 tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-whitespace-nowrap hover:tw-text-white tw-shadow-sm hover:tw-bg-orange-600 focus-visible:tw-outline focus-visible:tw-outline-2 focus-visible:tw-outline-offset-2 focus-visible:tw-outline-orange-600 tw-transition-colors" title="Aprovar nota" @click="setSuggestion(selectedQuestion.suggestions[0])">
                                        <svg width="16" height="17" viewBox="0 0 16 17" fill="none">
                                          <path d="M14.8125 5.65242C14.6482 5.46632 14.4462 5.3173 14.2199 5.21525C13.9936 5.11321 13.7482 5.06047 13.5 5.06055H10.25V4.31055C10.2492 3.58146 9.95918 2.88246 9.44363 2.36692C8.92808 1.85137 8.22909 1.56137 7.5 1.56055C7.36077 1.56056 7.2243 1.59933 7.10585 1.67252C6.98741 1.7457 6.89168 1.85041 6.82937 1.97492L4.53625 6.56055H2C1.66848 6.56055 1.35054 6.69224 1.11612 6.92666C0.881696 7.16108 0.75 7.47903 0.75 7.81055V13.3105C0.75 13.6421 0.881696 13.96 1.11612 14.1944C1.35054 14.4289 1.66848 14.5605 2 14.5605H12.75C13.1765 14.5605 13.5883 14.4047 13.9081 14.1223C14.2278 13.84 14.4334 13.4507 14.4862 13.0274L15.2362 7.02742C15.2671 6.78129 15.2453 6.53141 15.1722 6.29436C15.0992 6.0573 14.9765 5.83849 14.8125 5.65242ZM2.25 8.06055H4.25V13.0605H2.25V8.06055ZM13.75 6.8418L13 12.8418C12.9923 12.9025 12.9627 12.9584 12.9166 12.9987C12.8705 13.039 12.8112 13.061 12.75 13.0605H5.75V7.48742L7.92625 3.13555C8.1676 3.2231 8.37615 3.38284 8.52353 3.59307C8.67091 3.80329 8.74998 4.0538 8.75 4.31055V5.81055C8.75 6.00946 8.82902 6.20022 8.96967 6.34088C9.11032 6.48153 9.30109 6.56055 9.5 6.56055H13.5C13.5356 6.56027 13.5709 6.56761 13.6035 6.58208C13.636 6.59655 13.6651 6.61781 13.6888 6.64445C13.7125 6.67108 13.7302 6.70247 13.7407 6.73651C13.7513 6.77054 13.7545 6.80644 13.75 6.8418Z" fill="currentColor" />
                                        </svg>
                                        Aprovar a nota
                                      </button>
                                    </div>
                                  </div>
                                  <div class="tw-flex tw-items-center tw-justify-between tw-gap-2 tw-py-3">
                                    <div>
                                      <p class="tw-text-xs/4.5 tw-text-orange-800 tw-font-semibold tw-mb-0">
                                        Feedback da IA
                                      </p>
                                      <p class="tw-text-xs/4.5 tw-text-orange-800 tw-mt-1 tw-mb-0">
                                        ${selectedQuestion.suggestions[0].teacher_feedback}
                                      </p>
                                    </div>
                                    <div>
                                      <button type="button" class="tw-flex tw-items-center tw-gap-1.5 tw-rounded-lg tw-text-orange-600 tw-border tw-border-orange-600 tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-whitespace-nowrap hover:tw-text-white tw-shadow-sm hover:tw-bg-orange-600 focus-visible:tw-outline focus-visible:tw-outline-2 focus-visible:tw-outline-offset-2 focus-visible:tw-outline-orange-600 tw-transition-colors" title="Aprovar nota e feedback" @click="setSuggestion(selectedQuestion.suggestions[0], true)">
                                        <svg width="16" height="17" viewBox="0 0 16 17" fill="none">
                                          <path d="M14.8125 5.65242C14.6482 5.46632 14.4462 5.3173 14.2199 5.21525C13.9936 5.11321 13.7482 5.06047 13.5 5.06055H10.25V4.31055C10.2492 3.58146 9.95918 2.88246 9.44363 2.36692C8.92808 1.85137 8.22909 1.56137 7.5 1.56055C7.36077 1.56056 7.2243 1.59933 7.10585 1.67252C6.98741 1.7457 6.89168 1.85041 6.82937 1.97492L4.53625 6.56055H2C1.66848 6.56055 1.35054 6.69224 1.11612 6.92666C0.881696 7.16108 0.75 7.47903 0.75 7.81055V13.3105C0.75 13.6421 0.881696 13.96 1.11612 14.1944C1.35054 14.4289 1.66848 14.5605 2 14.5605H12.75C13.1765 14.5605 13.5883 14.4047 13.9081 14.1223C14.2278 13.84 14.4334 13.4507 14.4862 13.0274L15.2362 7.02742C15.2671 6.78129 15.2453 6.53141 15.1722 6.29436C15.0992 6.0573 14.9765 5.83849 14.8125 5.65242ZM2.25 8.06055H4.25V13.0605H2.25V8.06055ZM13.75 6.8418L13 12.8418C12.9923 12.9025 12.9627 12.9584 12.9166 12.9987C12.8705 13.039 12.8112 13.061 12.75 13.0605H5.75V7.48742L7.92625 3.13555C8.1676 3.2231 8.37615 3.38284 8.52353 3.59307C8.67091 3.80329 8.74998 4.0538 8.75 4.31055V5.81055C8.75 6.00946 8.82902 6.20022 8.96967 6.34088C9.11032 6.48153 9.30109 6.56055 9.5 6.56055H13.5C13.5356 6.56027 13.5709 6.56761 13.6035 6.58208C13.636 6.59655 13.6651 6.61781 13.6888 6.64445C13.7125 6.67108 13.7302 6.70247 13.7407 6.73651C13.7513 6.77054 13.7545 6.80644 13.75 6.8418Z" fill="currentColor" />
                                        </svg>
                                        Aprovar nota e feedback
                                      </button>
                                    </div>
                                  </div>
                                  <div class="tw-flex tw-items-center tw-justify-between tw-py-3">
                                    <div>
                                      <p class="tw-text-xs/4.5 tw-text-orange-800 tw-font-semibold tw-mb-0">
                                        Justificativa
                                      </p>
                                      <p class="tw-text-xs/4.5 tw-text-orange-800 tw-mt-1 tw-mb-0">
                                        ${selectedQuestion.suggestions[0].comment}
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </template>
                          <template v-if="selectedApplicationStudent.can_be_corrected">
                            <div class="tw-flex tw-flex-col tw-gap-2">
                              <div class="tw-flex tw-items-center tw-justify-between">
                                <div>
                                  <span class="tw-flex tw-items-center tw-gap-2">
                                    <svg width="16" height="17" viewBox="0 0 16 17" fill="none">
                                      <path d="M10.75 6.80089C10.75 6.9998 10.671 7.19057 10.5304 7.33122C10.3897 7.47187 10.1989 7.55089 10 7.55089H6.00003C5.80112 7.55089 5.61035 7.47187 5.4697 7.33122C5.32905 7.19057 5.25003 6.9998 5.25003 6.80089C5.25003 6.60198 5.32905 6.41121 5.4697 6.27056C5.61035 6.12991 5.80112 6.05089 6.00003 6.05089H10C10.1989 6.05089 10.3897 6.12991 10.5304 6.27056C10.671 6.41121 10.75 6.60198 10.75 6.80089ZM10 8.55089H6.00003C5.80112 8.55089 5.61035 8.62991 5.4697 8.77056C5.32905 8.91121 5.25003 9.10198 5.25003 9.30089C5.25003 9.4998 5.32905 9.69057 5.4697 9.83122C5.61035 9.97187 5.80112 10.0509 6.00003 10.0509H10C10.1989 10.0509 10.3897 9.97187 10.5304 9.83122C10.671 9.69057 10.75 9.4998 10.75 9.30089C10.75 9.10198 10.671 8.91121 10.5304 8.77056C10.3897 8.62991 10.1989 8.55089 10 8.55089ZM14.75 8.05089C14.7503 9.20712 14.4535 10.344 13.8882 11.3526C13.3229 12.3612 12.508 13.2077 11.5216 13.8109C10.5351 14.4141 9.41033 14.7538 8.25493 14.7975C7.09952 14.8412 5.95227 14.5873 4.92316 14.0603L2.89628 14.7384C2.67563 14.8128 2.4386 14.824 2.2119 14.7709C1.98519 14.7178 1.77783 14.6024 1.61319 14.4377C1.44854 14.2731 1.33316 14.0657 1.28004 13.839C1.22691 13.6123 1.23817 13.3753 1.31253 13.1546L1.98816 11.1278C1.52421 10.219 1.27233 9.21687 1.25145 8.19673C1.23057 7.1766 1.44123 6.16501 1.8676 5.23801C2.29396 4.31102 2.92494 3.49274 3.71308 2.84472C4.50123 2.19669 5.42603 1.73577 6.41795 1.49662C7.40988 1.25747 8.44311 1.2463 9.43997 1.46397C10.4368 1.68163 11.3714 2.12246 12.1733 2.75331C12.9753 3.38415 13.6238 4.1886 14.0701 5.10617C14.5164 6.02374 14.7489 7.03054 14.75 8.05089ZM13.25 8.05089C13.2497 7.2456 13.0642 6.45118 12.7077 5.72908C12.3513 5.00698 11.8335 4.37655 11.1944 3.88657C10.5554 3.39658 9.81216 3.06018 9.02229 2.90338C8.23241 2.74658 7.41706 2.77358 6.63929 2.9823C5.86153 3.19102 5.1422 3.57587 4.53696 4.10706C3.93171 4.63826 3.45678 5.30156 3.1489 6.04567C2.84101 6.78977 2.70843 7.59473 2.76141 8.39827C2.81438 9.20181 3.0515 9.9824 3.45441 10.6796C3.50766 10.7716 3.54077 10.8738 3.55155 10.9795C3.56232 11.0852 3.55051 11.192 3.51691 11.2928L2.89628 13.1546L4.75816 12.534C4.83475 12.5085 4.91493 12.4954 4.99566 12.4953C5.12738 12.4955 5.25672 12.5304 5.37066 12.5965C6.1688 13.0583 7.0745 13.3018 7.99662 13.3024C8.91875 13.303 9.82476 13.0607 10.6235 12.5999C11.4222 12.1391 12.0855 11.4761 12.5466 10.6775C13.0077 9.87894 13.2503 8.97301 13.25 8.05089Z" fill="#94A3B8" />
                                    </svg>
                                    <span class="tw-text-xs/4.5 tw-font-semibold tw-text-gray-500">Comentários</span>
                                  </span>
                                </div>
                                <div>
                                  <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" data-toggle="collapse" data-target="#collapseTeacherComment" aria-expanded="false" aria-controls="collapseTeacherComment">
                                    Adicionar comentário
                                    <svg width="16" height="17" viewBox="0 0 16 17" fill="none">
                                      <path d="M14.25 8.05078C14.25 8.24969 14.171 8.44046 14.0303 8.58111C13.8897 8.72176 13.6989 8.80078 13.5 8.80078H8.75V13.5508C8.75 13.7497 8.67098 13.9405 8.53033 14.0811C8.38968 14.2218 8.19891 14.3008 8 14.3008C7.80109 14.3008 7.61032 14.2218 7.46967 14.0811C7.32902 13.9405 7.25 13.7497 7.25 13.5508V8.80078H2.5C2.30109 8.80078 2.11032 8.72176 1.96967 8.58111C1.82902 8.44046 1.75 8.24969 1.75 8.05078C1.75 7.85187 1.82902 7.6611 1.96967 7.52045C2.11032 7.3798 2.30109 7.30078 2.5 7.30078H7.25V2.55078C7.25 2.35187 7.32902 2.1611 7.46967 2.02045C7.61032 1.8798 7.80109 1.80078 8 1.80078C8.19891 1.80078 8.38968 1.8798 8.53033 2.02045C8.67098 2.1611 8.75 2.35187 8.75 2.55078V7.30078H13.5C13.6989 7.30078 13.8897 7.3798 14.0303 7.52045C14.171 7.6611 14.25 7.85187 14.25 8.05078Z" fill="#94A3B8" />
                                    </svg>
                                  </button>
                                </div>
                              </div>
                              <div class="collapse" id="collapseTeacherComment">
                                <textarea rows="3" name="feedback-textarea" id="feedback-textarea" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" placeholder="Deixe um feedback personalizado..." v-model="selectedQuestion.teacher_feedback"></textarea>
                              </div>
                            </div>
                            <div class="tw-flex tw-items-center tw-justify-between tw-border-y tw-border-slate-200 tw-py-4">
                              <div class="tw-relative">
                                <label for="grade" class="tw-absolute tw--top-2 tw-left-2 tw-inline-block tw-rounded-lg tw-bg-white tw-px-1 tw-text-xs tw-font-medium tw-text-gray-900">Nota</label>
                                <input v-if="selectedQuestion.text_correction" type="number" name="grade" id="grade" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" placeholder="0,00" v-model="totalPoints" :disabled="selectedQuestion.text_correction" step="0.01" value="0" />
                                <input v-else type="number" name="grade" id="grade" class="tw-block tw-w-full tw-rounded-md tw-bg-white tw-px-3 tw-py-1.5 tw-text-base tw-text-gray-900 tw-outline tw-outline-1 tw--outline-offset-1 tw-outline-gray-300 placeholder:tw-text-gray-400 focus:tw-outline focus:tw-outline-2 focus:tw--outline-offset-2 focus:tw-outline-blue-600 sm:tw-text-sm/6" placeholder="0,00" v-model="selectedQuestion.teacher_grade" :disabled="selectedQuestion.text_correction" step="0.01" value="0" min="0" :max="selectedQuestion.question_weight" @keyup="selectedQuestion.teacher_grade = $event.target.value, $forceUpdate()" />
                                <p class="tw-mt-2 tw-text-xs tw-text-red-600" id="grade-error" v-if="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight))">
                                  O valor da nota deve ser entre 0 e o valor máximo da questão (${selectedQuestion.question_weight}).
                                </p>
                              </div>
                              <div>
                                <div class="tw-flex tw-items-center tw-gap-1" v-if="!selectedQuestion.text_correction">
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-p-2 tw-text-poppy-600 tw-border tw-border-poppy-600 hover:tw-text-white hover:tw-bg-poppy-600" title="Atribuir nota zero" @click="setGrade(0)">
                                    <span class="tw-sr-only">0%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" @click="setGrade(parseFloat(selectedQuestion.question_weight * 0.25).toFixed(4))">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">25%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" @click="setGrade(parseFloat(selectedQuestion.question_weight * 0.5).toFixed(4))">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">50%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-px-2 tw-py-1.75 tw-text-honey-600 tw-border tw-border-honey-500 hover:tw-text-white hover:tw-bg-honey-600" @click="setGrade(parseFloat(selectedQuestion.question_weight * 0.75).toFixed(4))">
                                    <span class="tw-text-xs/4.5 tw-font-semibold">75%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                  <button type="button" class="tw-flex tw-items-center tw-rounded-lg tw-p-2 tw-text-mint-600 tw-border tw-border-mint-600 hover:tw-text-white hover:tw-bg-mint-600" title="Atribuir nota máxima" @click="setGrade(selectedQuestion.question_weight)">
                                    <span class="tw-sr-only">100%</span>
                                    <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="tw-size-4">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                    </svg>
                                  </button>
                                </div>
                              </div>
                            </div>
                            <template v-if="selectedQuestion.text_correction">
                              <div class="tw-overflow-hidden tw-border-2 tw-border-gray-100 sm:tw-rounded-lg">
                                <table class="tw-min-w-full tw-divide-y-2 tw-divide-gray-100">
                                  <thead class="tw-bg-gray-50">
                                    <tr>
                                      <th scope="col" class="tw-py-3.5 tw-pl-4 tw-pr-3 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900 sm:tw-pl-6">
                                        Competências
                                      </th>
                                      <th scope="col" class="tw-px-3 tw-py-3.5 tw-text-left tw-text-sm tw-font-semibold tw-text-gray-900">
                                        Pontos
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody class="tw-divide-y tw-divide-gray-200 tw-bg-white">
                                    <tr v-for="criterion in selectedQuestion.generate_correction_criterion">
                                      <td class="tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-sm tw-font-medium tw-text-gray-900 sm:tw-pl-6">
                                        ${criterion.name}
                                      </td>
                                      <td class="tw-whitespace-nowrap tw-px-3 tw-py-4 tw-text-sm tw-text-gray-500">
                                        <div class="tw-flex tw-items-center tw-gap-2">
                                          <label
                                            v-for="point in criterion.value"
                                            :for="'line-competence-enem-' + criterion.id + '-' + point"
                                            class="tw-flex tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-md tw-px-2 tw-py-1 tw-text-xs tw-font-medium tw-text-gray-900 tw-ring-1 tw-ring-inset focus:tw-outline-none sm:tw-flex-1"
                                            :class="criterion.checkedLabel === point ? 'tw-bg-blue-50 tw-text-blue-700 tw-ring-blue-700/10' : 'tw-bg-white tw-text-gray-900 tw-ring-gray-200'"
                                            @click="selectedCorrection(criterion.question, criterion.order, point, criterion.id); criterion.checkedLabel = point; $forceUpdate()"
                                          >
                                            <input type="radio" :id="'line-competence-enem-' + criterion.id + '-' + point" :name="'line_competence_enem-' + criterion.id" :value="point.toString().replace('.',',')" class="tw-sr-only" />
                                            <span>
                                              ${point.toString().replace('.',',')}
                                            </span>
                                          </label>
                                        </div>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </template>
                            <div class="tw-flex tw-items-center tw-justify-between tw-mt-2">
                              <div class="tw-flex tw-items-center tw-gap-2">
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" v-if="(selectedQuestion.textual_answer || selectedQuestion.file_answer)" title="Apagar resposta" @click="removeGradeAlert()">
                                  Apagar resposta
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M13.5 3H2.5C2.30109 3 2.11032 3.07902 1.96967 3.21967C1.82902 3.36032 1.75 3.55109 1.75 3.75C1.75 3.94891 1.82902 4.13968 1.96967 4.28033C2.11032 4.42098 2.30109 4.5 2.5 4.5H2.75V13C2.75 13.3315 2.8817 13.6495 3.11612 13.8839C3.35054 14.1183 3.66848 14.25 4 14.25H12C12.3315 14.25 12.6495 14.1183 12.8839 13.8839C13.1183 13.6495 13.25 13.3315 13.25 13V4.5H13.5C13.6989 4.5 13.8897 4.42098 14.0303 4.28033C14.171 4.13968 14.25 3.94891 14.25 3.75C14.25 3.55109 14.171 3.36032 14.0303 3.21967C13.8897 3.07902 13.6989 3 13.5 3ZM11.75 12.75H4.25V4.5H11.75V12.75ZM4.75 1.25C4.75 1.05109 4.82902 0.860322 4.96967 0.71967C5.11032 0.579018 5.30109 0.5 5.5 0.5H10.5C10.6989 0.5 10.8897 0.579018 11.0303 0.71967C11.171 0.860322 11.25 1.05109 11.25 1.25C11.25 1.44891 11.171 1.63968 11.0303 1.78033C10.8897 1.92098 10.6989 2 10.5 2H5.5C5.30109 2 5.11032 1.92098 4.96967 1.78033C4.82902 1.63968 4.75 1.44891 4.75 1.25Z" fill="#F04438"/>
                                  </svg>
                                </button>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-gray-500 tw-whitespace-nowrap tw-border tw-border-gray-200 hover:tw-bg-gray-50" v-if="!selectedQuestion.text_correction && !selectedQuestion.empty" title="Marcar resposta como em branco" @click="setEmptyAnswer()">
                                  Em branco
                                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12.7264 3.91483L13.5545 3.00358C13.6855 2.85595 13.753 2.66264 13.7424 2.46557C13.7318 2.2685 13.644 2.08355 13.4979 1.95082C13.3519 1.81809 13.1594 1.74828 12.9622 1.75651C12.765 1.76475 12.579 1.85038 12.4445 1.99483L11.617 2.90483C10.3715 2.02628 8.84777 1.6332 7.33263 1.79953C5.81749 1.96586 4.41536 2.68014 3.39004 3.80798C2.36472 4.93583 1.78689 6.39948 1.76528 7.92357C1.74366 9.44766 2.27975 10.9271 3.27267 12.0836L2.44454 12.9948C2.37692 13.0675 2.32438 13.1528 2.28998 13.2459C2.25558 13.339 2.24 13.438 2.24415 13.5372C2.24829 13.6363 2.27207 13.7337 2.31412 13.8236C2.35616 13.9135 2.41563 13.9942 2.48908 14.0609C2.56253 14.1276 2.6485 14.1792 2.742 14.2124C2.8355 14.2457 2.93468 14.2601 3.03378 14.2548C3.13289 14.2494 3.22995 14.2245 3.31934 14.1814C3.40873 14.1383 3.48868 14.0778 3.55454 14.0036L4.38204 13.0936C5.62762 13.9721 7.15132 14.3652 8.66646 14.1989C10.1816 14.0326 11.5837 13.3183 12.609 12.1904C13.6344 11.0626 14.2122 9.59893 14.2338 8.07484C14.2554 6.55075 13.7193 5.0713 12.7264 3.91483ZM3.24954 7.99921C3.24882 7.14287 3.47979 6.3023 3.91797 5.56656C4.35615 4.83083 4.98522 4.22735 5.7385 3.82009C6.49179 3.41282 7.34123 3.21694 8.19679 3.2532C9.05236 3.28947 9.88217 3.55653 10.5983 4.02608L4.29142 10.9636C3.61612 10.1232 3.24849 9.07725 3.24954 7.99921ZM7.99954 12.7492C7.07594 12.7501 6.17238 12.48 5.40079 11.9723L11.7077 5.03483C12.2672 5.73304 12.618 6.5752 12.7196 7.46417C12.8211 8.35315 12.6694 9.25273 12.2817 10.0592C11.8941 10.8656 11.2864 11.546 10.5287 12.022C9.77107 12.4979 8.8943 12.75 7.99954 12.7492Z" fill="#FD853A"/>
                                  </svg>
                                </button>
                              </div>
                              <div>
                                <button type="button" class="tw-flex tw-flex-nowrap tw-items-center tw-gap-2 tw-rounded-lg tw-px-3 tw-py-2 tw-text-xs/4.5 tw-font-semibold tw-text-white tw-whitespace-nowrap hover:tw-bg-primary-950/2" :class="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight)) ? 'tw-bg-primary-400' : 'tw-bg-primary-600'" @click="sendTeacherFeedback(selectedQuestion)" :disabled="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight))">
                                  Salvar
                                </button>
                              </div>
                            </div>
                          </template>

                          <!-- <button type="button" class="btn btn-xs btn-primary" title="Salvar nota e ir para a próxima questão" :disabled="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight))" @click="sendTeacherFeedback(selectedQuestion, true)" v-if="applicationStudent.questions.findIndex(question => question.pk == selectedQuestion.pk) != applicationStudent.questions.length - 1">
                            <i class="fas fa-arrow-right"></i>
                          </button> -->

                          <div>
                            <template v-if="selectedApplicationStudent.can_be_corrected">
                              <div>
                                <!-- <div class="d-flex justify-content-between">
                                  <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-xs btn-secondary" v-if="(selectedQuestion.textual_answer || selectedQuestion.file_answer)" title="Deletar nota" @click="removeGradeAlert()">
                                      <i class="fas fa-trash"></i>
                                    </button>
                                    <button type="button" @click="sendTeacherFeedback(selectedQuestion)" class="btn btn-xs btn-primary mx-1" title="Salvar nota" :disabled="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight))">
                                      <i class="fas fa-save"></i>
                                    </button>
                                    <button type="button" class="btn btn-xs btn-primary" title="Salvar nota e ir para a próxima questão" :disabled="!(parseFloat(selectedQuestion.teacher_grade) >= 0 && parseFloat(selectedQuestion.teacher_grade) <= parseFloat(selectedQuestion.question_weight))" @click="sendTeacherFeedback(selectedQuestion, true)" v-if="applicationStudent.questions.findIndex(question => question.pk == selectedQuestion.pk) != applicationStudent.questions.length - 1">
                                      <i class="fas fa-arrow-right"></i>
                                    </button>
                                  </div>
                                </div> -->
                                <div v-if="spinnerFeedbackSaved">
                                  <div class="spinner-border spinner-border-sm text-primary" role="status">
                                    <span class="sr-only">Carregando...</span>
                                  </div>
                                  <span class="text-info">Salvando nota...</span>
                                </div>
                                <span class="text-info" v-if="!spinnerFeedbackSaved && feedbackSaved && !feedbackError">Correção salva!</span>
                                <span class="text-danger" v-if="feedbackError">Erro no envio, tente novamente</span>
                              </div>
                            </template>
                            <template v-else>
                              <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                                <div class="tw-border-y tw-border-slate-200 tw-py-4">
                                  <p class="tw-text-xs/4.5 tw-font-medium tw-text-slate-500 tw-mb-0">Nota</p>
                                  <div class="tw-flex tw-items-center tw-gap-1.5">
                                    <template v-if="selectedQuestion.category === 'Somatório'">
                                      <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                        </span>
                                        <span class="tw-text-sm tw-text-slate-400">
                                          de ${selectedQuestion.question_weight}
                                        </span>
                                      </template>
                                      <template v-else>
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          Em branco
                                        </span>
                                      </template>
                                    </template>
                                    <template v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                      <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                        </span>
                                        <span class="tw-text-sm tw-text-slate-400">
                                          de ${selectedQuestion.question_weight}
                                        </span>
                                      </template>
                                      <template v-else>
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          Em branco
                                        </span>
                                      </template>
                                    </template>
                                    <template v-else>
                                      <template v-if="selectedQuestion.teacher_grade">
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          ${selectedQuestion.teacher_grade}
                                        </span>
                                        <span class="tw-text-sm tw-text-slate-400">
                                          de ${selectedQuestion.question_weight}
                                        </span>
                                      </template>
                                      <template v-else>
                                        <span class="tw-text-lg tw-text-slate-700 tw-font-semibold">
                                          Não corrigida
                                        </span>
                                      </template>
                                    </template>
                                  </div>

                                  <!-- <span class="font-weight-bold">Nota do aluno na questão:</span>
                                  <span class="badge badge-info" v-if="selectedQuestion.category === 'Somatório'">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                                    </template>
                                    <template v-else>
                                      Em branco
                                    </template>
                                  </span>
                                  <span class="badge badge-info" v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                                    <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                      ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                                    </template>
                                    <template v-else>
                                      Em branco
                                    </template>
                                  </span>
                                  <span class="badge badge-info" v-else>
                                    ${selectedQuestion.teacher_grade || 'Não corrigida'}
                                  </span> -->
                                </div>
                              </template>
                            </template>
                          </div>
                        </template>

                        <!-- <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                          <p v-if="selectedQuestion.teacher_feedback">
                            <span class="font-weight-bold">Comentário do professor:</span>
                            <span>${selectedQuestion.teacher_feedback}</span>
                          </p>
                          <p>
                            <span class="font-weight-bold">Nota do aluno na questão:</span>
                            <span class="badge badge-info" v-if="selectedQuestion.category === 'Somatório'">
                              <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                ${(selectedQuestion.teacher_grade * selectedQuestion.question_weight).toFixed(4)}
                              </template>
                              <template v-else>
                                Em branco
                              </template>
                            </span>
                            <span class="badge badge-info" v-else-if="['Discursiva', 'Arquivo anexado'].includes(selectedQuestion.category)">
                              <template v-if="selectedQuestion.teacher_grade || selectedQuestion.teacher_grade === 0">
                                ${(selectedQuestion.percent_grade * selectedQuestion.question_weight).toFixed(4)}
                              </template>
                              <template v-else>
                                Em branco
                              </template>
                            </span>
                            <span class="badge badge-info" v-else>
                              ${selectedQuestion.teacher_grade || 'Não corrigida'}
                            </span>
                          </p>
                          <div v-if="selectedQuestion.feedback">
                            <hr>
                            <h6>Feedback do professor</h6>
                            <div v-html="selectedQuestion.feedback"></div>
                          </div>
                        </template> -->

                        <template v-if="selectedQuestion.similar_answers && selectedQuestion.similar_answers.length">
                          <span class="font-weight-bold">Respostas similares</span>
                          <span class="badge badge-danger">${selectedQuestion.similar_answers.length} encontradas</span>
                          <div id="accordion">
                            <div class="card" v-for="answer in selectedQuestion.similar_answers">
                              <div class="card-header p-2">
                                <a :href="'#collapse-'+answer.student_application.pk" data-toggle="collapse">
                                  ${answer.student_application.student}
                                </a>
                                <span class="badge badge-primary float-right">
                                  ${(parseFloat(answer.similarity) * 100).toFixed(2)} %
                                </span>
                              </div>
                              <div class="collapse card-body p-2" :id="'collapse-'+answer.student_application.pk" data-parent="#accordion" style="background: #f5f6fa;">
                                <p class="mb-0">${answer.content}</p>
                              </div>
                            </div>
                          </div>
                        </template>
                      </div>
                      <div class="tw-flex tw-flex-col tw-gap-4 tw--mt-2" v-else-if="currentAnswerTab === 'commented-answer'">
                        <template v-if="selectedQuestion.enunciation || applicationStudent.is_abstract">
                          <template v-if="selectedQuestion.commented_awnser">
                            <div class="tw-flex tw-flex-col tw-gap-1 tw-bg-slate-50 tw-rounded-lg tw-p-6">
                              <p class="tw-text-xs/4.5 tw-font-semibold tw-text-slate-700 tw-mb-0">
                                Resposta comentada
                              </p>
                              <div
                                class="tw-text-xs/4.5 tw-text-slate-700 remove-p-margin"
                                v-html="selectedQuestion.commented_awnser"
                              ></div>
                            </div>
                          </template>
                          <template v-if="selectedQuestion.feedback">
                            <div class="tw-flex tw-flex-col tw-gap-1 tw-bg-slate-50 tw-rounded-lg tw-p-6">
                              <p class="tw-text-xs/4.5 tw-font-semibold tw-text-slate-700 tw-mb-0">
                                Feedback do professor
                              </p>
                              <div
                                class="tw-text-xs/4.5 tw-text-slate-700 remove-p-margin"
                                v-html="selectedQuestion.feedback"
                              ></div>
                            </div>
                          </template>
                          <template v-if="selectedQuestion.teacher_feedback">
                            <div class="tw-flex tw-flex-col tw-gap-1 tw-bg-slate-50 tw-rounded-lg tw-p-6">
                              <p class="tw-text-xs/4.5 tw-font-semibold tw-text-slate-700 tw-mb-0">
                                Comentário do professor
                              </p>
                              <div class="tw-text-xs/4.5 tw-text-slate-700">
                                ${selectedQuestion.teacher_feedback}
                              </div>
                            </div>
                          </template>
                        </template>
                      </div>
                    </div>
                  </template>
                </template>
              </div>
            </div>
          </div>
          <!-- Right column -->
          <div class="tw-ml-[50%] tw-w-full tw-bg-slate-200 tw-min-h-full tw-overflow-y-auto">
            <template v-if="applicationStudent.questions.length && hasFiles()">
              <div class="tw-px-11 tw-pt-4 tw-pb-8">
                <div class="tw-flex tw-flex-col tw-items-center tw-justify-center">
                  <div>
                    <div class="tw-flex tw-items-center tw-justify-center">
                      <span class="tw-isolate tw-inline-flex tw-rounded-lg tw-gap-2">
                        <!-- <button
                          type="button"
                          class="tw-relative tw-inline-flex tw-items-center tw-rounded-l-lg tw-px-3 tw-py-1.5 tw-text-sm focus:tw-z-10"
                          :class="true ? 'tw-bg-slate-700 tw-font-semibold tw-text-white' : 'tw-bg-white tw-text-gray-500 hover:tw-bg-gray-50'"
                          @click=""
                        >
                          Todas
                        </button> -->
                        <button
                          type="button"
                          class="tw-relative tw-inline-flex tw-items-center tw-rounded-lg tw-px-3 tw-py-1.5 tw-text-sm focus:tw-z-10"
                          :class="shownImage == url ? 'tw-bg-slate-700 tw-font-semibold tw-text-white' : 'tw-bg-white tw-text-gray-500 hover:tw-bg-gray-50'"
                          @click="selectImage(url)"
                          v-for="(url, index) in applicationStudent.omr_scan_url.objectives_urls.filter(u => u.length)"
                        >
                          Objetivas
                        </button>
                        <button
                          type="button"
                          class="tw-relative tw-inline-flex tw-items-center tw-rounded-lg tw-px-3 tw-py-1.5 tw-text-sm focus:tw-z-10"
                          :class="shownImage == url ? 'tw-bg-slate-700 tw-font-semibold tw-text-white' : 'tw-bg-white tw-text-gray-500 hover:tw-bg-gray-50'"
                          @click="selectImage(url, 'Discursivas')"
                          v-for="(url, index) in applicationStudent.omr_scan_url.discursive_urls.filter(u => u.length)"
                        >
                          ${index + 1}ª folha discursiva
                        </button>
                      </span>
                    </div>
                  </div>
                  <template v-if="imgLoading">
                    <div class="tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-mt-4">
                      <h6 class="tw-text-sm tw-font-medium tw-text-slate-700 tw-mb-0">Carregando, aguarde...</h6>
                      <div class="spinner-border tw-text-primary-600" role="status">
                        <span class="tw-sr-only">Carregando...</span>
                      </div>
                    </div>
                  </template>
                </div>
                <img :src="shownImage" @click="viewImage()" id="previewImage" onLoad="app.imgLoading = false" v-show="!imgLoading" class="tw-max-w-full tw-h-auto tw-shadow tw-mt-6" style="cursor: zoom-in;" />
              </div>
            </template>
            <template v-else>
              <div class="tw-px-11 tw-py-8">
                <div class="tw-flex tw-flex-col tw-items-center tw-justify-center">
                  <div class="tw-flex tw-flex-col tw-items-center tw-justify-center">
                    <p class="tw-text-sm tw-font-medium tw-text-slate-700 tw-mb-0">
                      Nenhum arquivo encontrado para o aluno selecionado.
                    </p>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>

<div class="modal fade" id="modalImgAnnotorious" tabindex="-1" aria-labelledby="modalImgAnnotoriousLabel">
  <div class="modal-dialog modal-xl">
    <div class="modal-content border-0">
      <div class="modal-body">
        <div class="row text-center">
          <div class="col">
            <div id="img-content" style="height: 720px;"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer controls">
        <button type="button" class="btn btn-dark" data-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="exportToERPModal" tabindex="-1" role="dialog" aria-labelledby="exportToERPModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <form action="{% url 'exports:exam_export_report' pk=object.pk %}">
        <div class="modal-header">
          <h5 class="modal-title" id="exportToERPModalLabel">Exportar para ERP</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="height: unset; max-height: unset; overflow: unset;">
          <div class="row mb-0">
            <div class="col-12">
              <p>Dica: esta tela de exportação pode ser acessada diretamente da <a href="{% url 'exams:exams_list' %}">listagem de provas</a>, ao clicar na opção "Exportar dados de prova" da respectiva avaliação.</p>
            </div>
            <div class="col-6">
              <h6>Unidade:</h6>
              <select class="form-control mb-3" name="unidade">
                <option value="">Todas as unidades</option>
                {% for unity in unities %}
                  <option value="{{ unity.pk }}">{{ unity.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-6">
              <h6>Turma:</h6>
              <select class="form-control mb-3" name="turma">
                <option value="">Todas as turmas</option>
                {% for school_class in school_classes %}
                  <option
                    value="{{ school_class.pk }}"
                    {% if school_class.pk|stringformat:"s" == request.GET.turma %}selected="selected"{% endif %}
                  >
                    {{ school_class.full_name }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>
          <h6>Disciplinas:</h6>
          <select multiple class="form-control" name="disciplinas" id="subjects-export">
            {% for subject in exam_subjects %}
              <option
                value="{{ subject.pk }}"
                {% if subject.pk|stringformat:"s" in subjects_filter %}selected="selected"{% endif %}
              >
                {{ subject }}
              </option>
            {% endfor %}
          </select>
          <div class="row mb-0">
            <div class="col-6">
              <h6 class="mt-3">Formato de exportação:</h6>
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-outline-primary btn-lg active">
                  <input type="radio" name="formato" id="formato_default" value="xlsx" autocomplete="off" checked />
                  <i class="fas fa-file-excel"></i> XLSX
                </label>
                <label class="btn btn-outline-primary btn-lg">
                  <input type="radio" name="formato" id="formato_csv" value="csv" autocomplete="off" />
                  <i class="fas fa-file-csv"></i> CSV
                </label>
              </div>
            </div>
            <div class="col-6">
              <h6 class="mt-3">Alunos:</h6>
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-outline-primary btn-lg active">
                  <input type="radio" name="alunos" id="todos" value="todos" autocomplete="off" checked />
                  Todos
                </label>
                <label class="btn btn-outline-primary btn-lg">
                  <input type="radio" name="alunos" id="presentes" value="presentes" autocomplete="off" />
                  Presentes
                </label>
                <label class="btn btn-outline-primary btn-lg">
                  <input type="radio" name="alunos" id="ausentes" value="ausentes" autocomplete="off" />
                  Ausentes
                </label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <h6 class="mt-3">Disciplinas:</h6>
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-outline-primary btn-lg active">
                  <input type="radio" name="disciplinas-detalhadas" value="somadas" autocomplete="off" checked />
                  Somadas
                </label>
                <label class="btn btn-outline-primary btn-lg">
                  <input type="radio" name="disciplinas-detalhadas" value="colunas" autocomplete="off" />
                  Colunas
                </label>
                <label class="btn btn-outline-primary btn-lg">
                  <input type="radio" name="disciplinas-detalhadas" value="linhas" autocomplete="off" />
                  Linhas
                </label>
              </div>
            </div>
            <div class="col-6">
              <div class="custom-control custom-switch mt-4">
                <input type="checkbox" id="extra_columns" name="colunas-extras" class="custom-control-input" value="160" />
                <label class="custom-control-label" for="extra_columns">
                  <h6 class="mb-0">Adicionar unidade e turma</h6>
                </label>
                <small class="form-text text-muted mt-0">
                  Selecione essa opção se deseja adicionar os campos<br/>"turma" e "unidade" à planilha.
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
          <button type="submit" class="btn btn-success">Exportar relatório</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock extra-modal %}

{% block js-additional %}
<script src="{% static 'administration/lib/select2/js/select2.min.js' %}"></script>
<script src="{% static 'administration/lib/datatables.net-responsive-dt/js/responsive.dataTables.min.js' %}"></script>
<script src="{% static 'administration/lib/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<!-- <script src="{% static 'js/lodash/lodash.min.js' %}"></script> -->
<!-- <script src="{% static 'js/sweetalert/sweetalert2-11.min.js' %}"></script> -->

<script src="{% static 'js/tippy/popper.min.js' %}"></script>
<script src="{% static 'js/tippy/tippy.min.js' %}"></script>
<!-- <script src="{% static 'js/viewerjs/viewer.min.js' %}"></script> -->
<script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script type="text/javascript">

    moment.locale('pt-br');
    var app = new Vue({
        delimiters: ['${', '}'],
        el: '#app',
        data: {
            expandedEnunciation: false,
            currentAnswerTab: 'student-answer',
            imagesLoaded: [],
            anno: '',
            annotationsList: [],
            viewer: '',
            groupExamTeacherAttachments: [],
            selectPoint: [],
            correctionTextual: [],
            spinnerVerification: false,
            totalPoints: 0,
            correctionFast: false,
            listQuestions: [],
            selectedQuestionOrder: 0,
            spinnerFeedbackSaved: false,
            errors: {
                forbidden: false,
                notQuestions: false,
            },
            type: 'iddle', 
            imgLoading: false,
            shownImage: '',
            sumValue: 0,
            filterCorrectionFast: ['Objetiva', 'Discursiva', 'Arquivo anexado', 'Somatório'],
            {% include 'dashboard/exams/includes/exam-detail-data.js' %}
        },
        watch:{
            selectedQuestion: function(val) {
                let changeFile = this.type != val.category
                if((!this.correctionFast || this.selectedQuestion.id) &&  (val && val.category)) {
                    this.getFile(val.category, changeFile)
                }
            }
        },
        computed: {
          availableCategories() {
            let categories = this.applicationStudent.questions.map(question => question.category)
            return {
              choice: categories.includes('Objetiva'),
              discursive: categories.includes('Discursiva') || categories.includes('Arquivo anexado'),
              sum: categories.includes('Somatório'),
            }
          },
          visibleButtons() {
            let buttons = []
            if (this.availableCategories.choice) buttons.push('Objetivas')
            if (this.availableCategories.discursive) buttons.push('Dissertativas')
            if (this.availableCategories.sum) buttons.push('Somatórias')
            return buttons
          },
          previousSelectedApplicationStudent: function () {
            let index = this.applicationsStudent.findIndex(applicationStudent => applicationStudent.id === this.applicationStudent?.pk)
            if (index === 0 || index === -1) {
              return null
            }
            return this.applicationsStudent[index - 1]
          },
          nextSelectedApplicationStudent: function () {
            let index = this.applicationsStudent.findIndex(applicationStudent => applicationStudent.id === this.applicationStudent?.pk)
            if (index === this.applicationsStudent.length - 1 || index === -1) {
              return null
            }
            return this.applicationsStudent[index + 1]
          },
          previousSelectedQuestion: function () {
            let index = this.applicationStudent.questions.findIndex(question => question.pk === this.selectedQuestion.pk)
            if (index === 0 || index === -1) {
              return null
            }
            return this.applicationStudent.questions[index - 1]
          },
          nextSelectedQuestion: function () {
            let index = this.applicationStudent.questions.findIndex(question => question.pk === this.selectedQuestion.pk)
            if (index === this.applicationStudent.questions.length - 1 || index === -1) {
              return null
            }
            return this.applicationStudent.questions[index + 1]
          },
        },
        methods: {
            getLastRoundedClasses(index) {
              let last = index === this.visibleButtons.length - 1
              return {'tw-rounded-r-lg': last}
            },
            getAlternativeLetter(index) {
              return 'abcdefghijk'[index]
            },
            getPerformance(applicationStudent) {
              let value = ((applicationStudent.total_text_file_answers > 0 ? (!applicationStudent.questions ? applicationStudent.total_corrected_answers : applicationStudent.questions.filter((question) => !question.annuled && question.teacher_grade && question.category != 'Objetiva').length) / applicationStudent.total_text_file_answers : 0) * 100)
              return Number.isInteger(value) ? value : parseFloat(value.toFixed(2))
            },
            viewImage(title = 'Folha de resposta') {
                const viewer = new Viewer(document.getElementById('previewImage'), {
                    inline: false,
                    viewed() {
                        viewer.zoomTo(0.4);
                    },
                    toolbar: {
                        zoomIn: 2,
                        zoomOut: 4,
                        oneToOne: 4,
                        reset: 4,
                        prev: 0,
                        play: {
                            show: 1,
                            size: 'large',
                        },
                        next: 0,
                        rotateLeft: 4,
                        rotateRight: 4,
                        flipHorizontal: 0,
                        flipVertical: 0,
                    },
                    title: [4, () => `${title}`],
                })
                $('#previewImage').click()
            },
            moment(date) {
                return moment(date)
            },
            hasFiles() {
                if((this.applicationStudent && this.applicationStudent.omr_scan_url) && (this.applicationStudent.omr_scan_url.objectives_urls.length || this.applicationStudent.omr_scan_url.discursive_urls.length)) {
                    return true;
                }
                return false;
            },
            handleImageLoad(url) {
                if(!this.imagesLoaded.includes(url)) {
                    this.imgLoading = true
                }
                this.imagesLoaded.push(url)
            },
            selectImage(url, type = 'Objetiva') {
                this.handleImageLoad(url)
                this.shownImage = url
                this.type = type
            },
            getFile(category, changeFile) {
                if(this.applicationStudent.omr_scan_url && (this.applicationStudent.omr_scan_url.objectives_urls || this.applicationStudent.omr_scan_url.discursive_urls)) {
                    let objectives_urls = this.applicationStudent.omr_scan_url.objectives_urls.filter(u => u.length)
                    let discursive_urls = this.applicationStudent.omr_scan_url.discursive_urls.filter(u => u.length)
                    let url = ''
                    if(changeFile) {
                        const objectiveCategories = ['Objetiva', 'Somatório']
                        if(objectiveCategories.includes(category) && objectives_urls.length) {
                            url = objectives_urls.at(objectives_urls.length - 1)
                        } else if(discursive_urls.length) {
                            url = discursive_urls[0]
                        }
                        this.shownImage = url
                        this.handleImageLoad(url)
                    }
                }
            },
            {% include 'dashboard/exams/includes/exam-detail-functions.js' %},
            {% include 'dashboard/exams/includes/exam-annotations-methods.js' %},
            commentQuestion(question){
                this.verificationCommentQuestion
            },
            onClickOutsideFilters(event) {
              const target = event.target
              const button = document.getElementById('headlessui-slider-over-button-1')

              const select2DropdownAbove = document.getElementsByClassName('select2-dropdown--above')[0]
              const select2DropdownBelow = document.getElementsByClassName('select2-dropdown--below')[0]
              if (select2DropdownAbove || select2DropdownBelow) {
                return
              }

              if (!(target === button || button.contains(target))) {
                const rightOffCanvasContent = document.getElementById('right-off-canvas')
                if (rightOffCanvasContent.classList.contains('tw-show')) {
                  rightOffCanvasContent.classList.remove('tw-show')
                }
              }
            },
            changeSchoolClass(event) {
              event.target.form.submit()
            },
        },
        mounted: function(){
            self = this
            {% comment %}
                let url = "{% url 'answers:api_fileanswer_annotations' pk='00000000-0000-0000-0000-000000000000'  %}"
                axios.get(url.replace('00000000-0000-0000-0000-000000000000', '14133b05-0bdb-4643-82bc-f3e5dd9ebeee')).then((response) => {
                    anno.setAnnotations(response.data.img_annotations);
                })
            {% endcomment %}
            
            $('[data-toggle="tooltip"]').tooltip()
            $('[data-toggle="popover"]').popover({ trigger: "hover" }) 

            $(document).ready(function() {
                $('#subjects-select').select2({
                    placeholder: "Todas as disciplinas",
                    closeOnSelect: false
                });

                // $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                //     $('#subjects-export').select2({
                //         placeholder: "Todas as disciplinas",
                //         closeOnSelect: false
                //     });
                // })            
            }); 

            let dataTable = $('#table-students').DataTable({
              lengthChange: false,
              responsive: true,
              pageLength: 50,
              language: {url: '//cdn.datatables.net/plug-ins/1.10.22/i18n/Portuguese-Brasil.json'},
              order: [[3, 'desc']],
              columnDefs: [{'type': 'html-num-fmt', 'targets': 2}]
            })
            $('#idDataTableSearch').on('keyup', function() {
              dataTable.search(this.value).draw()
            })

            $(".filter-button").click(function(e) {
                e.preventDefault();

                var form = $("#filter-form");

                form.prop("action", $(this).data("url"));
                form.submit();            
            });

            $(window).blur(function(){
                $(".filter-button").prop("disabled", false);
            })

            if(window.location.hash) {
                var hash = window.location.hash.substring(1);
                self.openStudentModal(hash);
            }

            $(document).on('hidden.bs.modal', function (e) {
                if($('modal:visible').length)
                    $('body').addClass('modal-open');
            })
            if(localStorage.getItem('correctionFast') == 'true'){
                self.correctionFast = true;
            }

            $('.tw-off-canvas-menu').on('click', function (e) {
              e.preventDefault();
              var target = $(this).attr('data-toggle-off-canvas');
              $(target).addClass('tw-show');
            });
        
            $('.tw-off-canvas .tw-off-canvas-close').on('click', function (e) {
              e.preventDefault();
              $(this).closest('.tw-off-canvas').removeClass('tw-show');
            })
          
            $(document).on('click touchstart', function (e) {
              if($(e.target).hasClass('select2-results__option') || $(e.target).hasClass('select2-results__custom_option')) {
                return
              }
              e.stopPropagation();
              if (!$(e.target).closest('.tw-off-canvas-menu').length) {
                var offCanvas = $(e.target).closest('.tw-off-canvas').length;
                if (!offCanvas) {
                  $('.tw-off-canvas.tw-show').removeClass('tw-show');
                }
              }
            });

            $('#exportToERPModal').on('shown.bs.modal', function (e) {
              $('#subjects-export').select2({
                placeholder: 'Todas as disciplinas',
                closeOnSelect: false,
              });
            });
        },
        updated(){
            tippy('.tooltips', {
                placement: 'left',
                allowHTML: true,
                theme: 'custom',
            })
            // Não remova isso se não o as formulas do MathType param de renderizar.
            if (window.MathJax) {
                MathJax.typesetPromise()
                .then(() => {})
                .catch((err) => console.error("Erro ao renderizar MathJax:", err));
            }
        },
        directives: {
          'click-outside': {
            bind: function(el, binding, vNode) {
              // Provided expression must evaluate to a function.
              if (typeof binding.value !== 'function') {
                const compName = vNode.context.name
                let warn = `[Vue-click-outside:] provided expression '${binding.expression}' is not a function, but has to be`
                if (compName) { warn += `Found in component '${compName}'` }

                console.warn(warn)
              }
              // Define Handler and cache it on the element
              const bubble = binding.modifiers.bubble
              const handler = (e) => {
                if (bubble || (!el.contains(e.target) && el !== e.target)) {
                  binding.value(e)
                }
              }
              el.__vueClickOutside__ = handler

              // add Event Listeners
              document.addEventListener('click', handler)
            },

            unbind: function(el, binding) {
              // Remove Event Listeners
              document.removeEventListener('click', el.__vueClickOutside__)
              el.__vueClickOutside__ = null
            }
          }
        },
    })
</script>

{% endblock js-additional %}